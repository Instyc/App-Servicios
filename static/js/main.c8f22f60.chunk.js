(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{181:function(e){e.exports=JSON.parse('{"typography":{"fontFamily":"[\'Century Gothic\',\'Roboto\',\'Arial\',\'sans-serif\']"},"palette":{"common":{"black":"#000","white":"#fff"},"background":{"paper":"rgba(213, 209, 209, 1)","default":"rgba(174, 168, 179, 1)"},"primary":{"light":"rgba(159, 218, 90, 1)","main":"rgba(159, 218, 90, 1)","dark":"rgba(159, 218, 90, 1)","contrastText":"rgba(0, 0, 0, 1)"},"secondary":{"light":"rgba(106, 190, 7, 1)","main":"rgba(106, 190, 7, 1)","dark":"rgba(106, 190, 7, 1)","contrastText":"rgba(0, 0, 0, 1)"},"error":{"light":"rgba(218, 44, 32, 1)","main":"rgba(218, 44, 32, 1)","dark":"rgba(218, 44, 32, 1)","contrastText":"rgba(0, 0, 0, 1)"},"text":{"primary":"rgba(0, 0, 0, 1)","secondary":"rgba(0, 0, 0, 0.6)","disabled":"rgba(0, 0, 0, 0.38)","hint":"rgba(0, 0, 0, 0.38)"}}}')},200:function(e,t,a){e.exports=a(331)},205:function(e,t,a){},206:function(e,t,a){},236:function(e,t,a){},237:function(e,t,a){},238:function(e,t,a){},312:function(e,t,a){},313:function(e,t,a){},314:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},324:function(e,t,a){},325:function(e,t,a){},326:function(e,t,a){},327:function(e,t,a){},328:function(e,t,a){},329:function(e,t,a){},330:function(e,t,a){e.exports=a.p+"static/media/Miniatura.f4e4e06b.png"},331:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(20),r=a.n(i),c=(a(205),a(3)),s=(a(206),a(12)),l=a(27),u=a(433),d=a(432),m=a(182),p=a(23),h=a(7),f=a.n(h),b=a(385),v=a(386),g=a(62),E=a(445),j=a(374),y=a(383),O=a(188),x=a(387),C=a(183),S=a(384),k=a(391),N=a(388),w=a(389),_=a(390),A=a(392),P=a(393),B=a(394),D=a(395),M=a(396),q=a(21),z=a(371),F=a(338),I=a(333),R=a(187),U=a(443),L=a(381),T=a(438),V=a(382),H=a(369),W=Object(H.a)((function(e){return{mostrarFlex:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",padding:10},fondo:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",padding:10,minHeight:"calc(100vh - 130px)"},proveedorSticky:{display:"scroll",position:"sticky",top:10,flexWrap:"wrap",marginBottom:10,marginTop:10},margenArriba:{marginTop:10},padding:{padding:20},padding2:{padding:10},filaPublicacion:{padding:10,marginTop:10,background:"rgba(214, 215, 204, 100)"},imagenPublicacion:{borderRadius:"6px",objectFit:"cover",border:"1px solid #000",width:170,height:170,margin:"auto",marginBottom:15,marginTop:15},gridRegistro:{maxWidth:550,padding:20,marginBottom:10},inputAncho:{width:"100%"},papelFondo:{border:"1px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),backgroundColor:"#d7d6d9"},pantallaMedia:{maxWidth:800,minWidth:360},botonFijo:{display:"scroll",position:"fixed",left:"50%",top:"calc(100% - 80px)",transform:"translate(-50%, -50%)",zIndex:100},button:{textTransform:"none"},margenAuto:{margin:"auto"},reporte:{padding:10,marginTop:10},botonesNav:{textDecoration:"none",color:e.palette.secondary.main,display:"inline","@media (max-width:1075px)":{display:"none"}},EstiloMovil:{display:"none","@media (max-width:1075px)":{display:"inline"}},EstiloPC:{display:"inline","@media (max-width:1075px)":{display:"none"}},EstiloLink:{textDecoration:"none",color:e.palette.secondary.contrastText},EstiloVacio:{},Categoria:{width:100,height:100,padding:0,margin:"auto",paddingTop:20},BotonSolicitar:{display:"inline","@media (max-width:1075px)":{display:"none"},position:"absolute",left:"90%",top:"35px",transform:"translate(-70%, -50%)",zIndex:1e3,width:"195px"},BotonSolicitarMovil:{display:"none","@media (max-width:1075px)":{display:"inline"},position:"absolute",left:"90%",top:"35px",transform:"translate(-70%, -50%)",zIndex:1e3}}})),J={servidor:"https://prueba-3.herokuapp.com",ruta:"/App-Servicios",jwt:"",publico:!1,guardar:!1,imagen_predeterminada:"/App-Servicios/Icono4.png",datosSesion:{apellido:"",blocked:"",confirmed:!1,created_at:"",descripcion:"",dni:"",email:"",estado:!1,fecha_creacion:"",id:null,mostrar_telefono:!1,nombre:"",permiso:0,provider:"local",role:{id:1,name:"Authenticated",description:"Default role given to authenticated user.",type:"authenticated"},telefono:"",tipo:0,ubicacion:"",updated_at:"",username:"",identidad_verificada:!1,imagenes_dni:[]}},K=function(e,t){var a=t.value;switch(t.type){case"setDatos":return Object(q.a)(Object(q.a)({},e),{},{datosSesion:a});case"setJwt":return Object(q.a)(Object(q.a)({},e),{},{jwt:a});case"setGuardar":return Object(q.a)(Object(q.a)({},e),{},{guardar:a});case"setPublico":return Object(q.a)(Object(q.a)({},e),{},{publico:a});default:return Object(q.a)({},e)}},G=Object(n.createContext)(J);function Y(e){var t=e.children,a=Object(n.useReducer)(K,J),i=Object(c.a)(a,2),r=i[0],s=i[1];return o.a.createElement(G.Provider,{value:{state:r,dispatch:s}},t)}function Q(e){var t=e.mensaje,a=W(),i=Object(n.useContext)(G),r=i.state,l=i.dispatch,u=Object(n.useState)(!1),d=Object(c.a)(u,2),m=d[0],h=d[1],b=Object(n.useState)(!1),v=Object(c.a)(b,2),E=v[0],O=v[1],x=Object(n.useState)(""),C=Object(c.a)(x,2),S=C[0],k=C[1],N=Object(n.useState)(!1),w=Object(c.a)(N,2),_=w[0],A=w[1],P=Object(n.useState)({email:"",contrasena:""}),B=Object(c.a)(P,2),D=B[0],M=B[1],H=function(){h(!1)},J=function(e){var t=e.target.value,a=e.target.name;M(Object(q.a)(Object(q.a)({},D),{},Object(p.a)({},a,t)))};return o.a.createElement("div",null,o.a.createElement(z.a,{href:"#",style:{color:"black",padding:"10px"},onClick:function(){h(!0)}},t),o.a.createElement(F.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:a.mostrarFlex,open:m,onClose:H,closeAfterTransition:!0,BackdropComponent:I.a,BackdropProps:{timeout:500}},o.a.createElement(R.a,{in:m},o.a.createElement("div",{className:a.papelFondo},o.a.createElement("div",{className:"Fondo",style:{maxWidth:350}},o.a.createElement(j.a,{container:!0,direction:"row",justify:"center",spacing:2},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"h5",component:"h1",align:"center",className:a.form},_?"Recuperar contrase\xf1a":"Iniciar Sesi\xf3n")),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(U.a,{onChange:J,name:"email",value:D.email,className:a.inputAncho,id:"filled-basic",label:"Correo electr\xf3nico",variant:"filled",required:!0})),o.a.createElement(L.a,null),o.a.createElement(j.a,{item:!0,xs:12},!_&&o.a.createElement(U.a,{onChange:J,name:"contrasena",value:D.contrasena,required:!0,type:"password",label:"Contrase\xf1a",variant:"filled",style:{marginTop:"15px"},className:a.inputAncho})),o.a.createElement(T.a,{xlDown:""===t},o.a.createElement(g.a,{color:"error"},S)),o.a.createElement(j.a,{item:!0,xs:12,align:"center"},!_&&o.a.createElement(z.a,{color:"black",className:a.margenArriba,href:"#",onClick:function(){A(!0)}},"Olvid\xe9 mi contrase\xf1a")),o.a.createElement(j.a,{item:!0,xs:12,align:"center"},_&&o.a.createElement(z.a,{color:"error",className:a.margenArriba,href:"#",onClick:function(){A(!1)}},"Cancelar")),o.a.createElement("div",{className:a.inputAncho,hidden:!E},o.a.createElement(V.a,null)),o.a.createElement(j.a,{item:!0,xs:12,align:"center"},o.a.createElement(y.a,{onClick:function(){O(!0),_?(console.log(D),f.a.post(r.servidor+"/auth/forgot-password",{email:D.email},{headers:{"Content-Type":"application/json"}}).then((function(e){console.log("Your user received an email",e.data)})).catch((function(e){console.log("An error occurred:",e.response)}))):f.a.post(r.servidor+"/auth/local/",{identifier:D.email,password:D.contrasena}).then((function(e){l({type:"setDatos",value:e.data.user}),l({type:"setJwt",value:e.data.jwt}),l({type:"setPublico",value:!1}),localStorage.setItem("datosLocal",JSON.stringify({jwt:e.data.jwt,datosSesion:e.data.user})),O(!1),h(!1)})).catch((function(e){var t=JSON.parse(e.response.request.response).message[0].messages[0].id;console.log("Error: ",t),"Auth.form.error.invalid"===t&&k("Correo o contrase\xf1a incorrectos"),O(!1)}))},size:"large",variant:"contained",color:"primary"},_?"Recuperar":"Iniciar Sesi\xf3n")),o.a.createElement(L.a,null),o.a.createElement(j.a,{item:!0,xs:12},!_&&o.a.createElement(g.a,{onClick:H,variant:"body1",align:"center"},"\xbfEres nuevo en el sitio? ",o.a.createElement(s.b,{to:r.ruta+"/registrar"},"Crear cuenta")))))))))}function Z(e){var t=e.plegarNoti,a=e.notificaciones,i=W(),r=Object(n.useContext)(G),c=r.state;r.dispatch;return o.a.createElement("div",{style:{padding:"0px 15px 0px 15px"}},o.a.createElement(g.a,{align:"center",component:"h5",variant:"h5"},"Notificaciones"),0===a.length&&o.a.createElement(g.a,null,"No tienes nuevas notificaciones"),a.map((function(e,a){return o.a.createElement("div",{key:a},o.a.createElement(S.a,{onClick:t},o.a.createElement(j.a,{container:!0,spacing:1,justify:"center"},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(s.b,{to:c.ruta+"/notificaciones",className:i.EstiloLink},o.a.createElement(g.a,null,0===e.tipo&&(null!==e.solicitud?'Tienes nueva informaci\xf3n con respecto a un reporte hecho a tu publicaci\xf3n "'+e.solicitud.titulo+'"':"Tienes nueva informaci\xf3n sobre un reporte hecho a tu perfil"),1===e.tipo&&(""===e.datos_notificacion?"\xa1Tu solicitud de verificaci\xf3n de identidad ha sido aceptada!":"Tu solicitud de verificaci\xf3n de identidad ha sido rechazada."),2===e.tipo&&"\xa1Tienes una nueva solicitud de rese\xf1a de ".concat(e.emisor.nombre," ").concat(e.emisor.apellido,"!")))))),o.a.createElement(L.a,null))})),o.a.createElement(S.a,{onClick:t},o.a.createElement(s.b,{to:c.ruta+"/notificaciones",className:i.EstiloLink},o.a.createElement(g.a,{color:"secondary"},"Ver todas las notificaciones"))))}function $(){var e=Object(n.useContext)(G),t=e.state,a=e.dispatch,i=W(),r=Object(l.g)(),u=Object(n.useState)(null),d=Object(c.a)(u,2),m=d[0],h=d[1],q=Object(n.useState)(null),z=Object(c.a)(q,2),F=z[0],I=z[1],R=Object(n.useState)(null),U=Object(c.a)(R,2),L=U[0],T=U[1],V=Object(n.useState)(!1),H=Object(c.a)(V,2),J=H[0],K=H[1],Y=Object(n.useState)(t.datosSesion.tipo),$=Object(c.a)(Y,2),X=$[0],ee=$[1],te=Object(n.useState)([]),ae=Object(c.a)(te,2),ne=ae[0],oe=ae[1],ie=Object(n.useState)(0),re=Object(c.a)(ie,2),ce=re[0],se=re[1];Object(n.useEffect)((function(){var e=localStorage.getItem("datosLocal")||null,n=JSON.parse(e);if(null!==n){a({type:"setDatos",value:n.datosSesion}),a({type:"setJwt",value:n.jwt});var o="Bearer "+n.jwt;f.a.get(t.servidor+"/users/"+n.datosSesion.id,{headers:{Authorization:o}}).then((function(e){a({type:"setDatos",value:e.data}),a({type:"setJwt",value:n.jwt}),localStorage.setItem("datosLocal",JSON.stringify({jwt:n.jwt,datosSesion:e.data})),function(e,a){var n="Bearer "+e;f.a.get(t.servidor+"/api/chats/",{headers:{Authorization:n}}).then((function(e){var t=e.data.filter((function(e){return e.receptor.id===a.id||e.emisor.id===a.id})),n=0;t.map((function(e){e.emisor.id===a.id&&(n+=e.noleido_emisor),e.receptor.id===a.id&&(n+=e.noleido_receptor)})),se(n)})).catch((function(e){console.log("Un error ha ocurrido al buscar las notificaciones."),console.log(e.response)}))}(n.jwt,e.data)})).catch((function(e){console.log("Error: ",e.response)})),f.a.get(t.servidor+"/api/notificaciones?receptor="+n.datosSesion.id+"&leido=false",{headers:{Authorization:o}}).then((function(e){oe(e.data.reverse())})).catch((function(e){console.log(e.response)}))}else a({type:"setPublico",value:!0})}),[]),Object(n.useEffect)((function(){ee(t.datosSesion.tipo)}),[t.datosSesion.tipo]);var le=function(){h(null)},ue=function(){I(null)},de=function(){T(null)};return o.a.createElement("div",{style:{flexGrow:1}},o.a.createElement(b.a,{position:"relative",style:{padding:"0% 7% 0% 7%"}},o.a.createElement(v.a,null,o.a.createElement(g.a,{style:{flexGrow:1,width:"200px"},component:"h2",variant:"h5"},o.a.createElement(s.b,{to:t.ruta+"/",style:{flexGrow:1,textDecoration:"none",color:"#393939",fontFamily:"Homework",fontSize:50,width:"200px"}},o.a.createElement("div",{style:{display:"flex",width:"200px",alignItems:"center"}},o.a.createElement(E.a,{style:{width:"50px",height:"50px"},src:t.ruta+"/Icono1.png",variant:"square",fontSize:"inherit"}),"Servia"))),o.a.createElement("div",null,o.a.createElement(j.a,{container:!0,justify:"center",alignContent:"center"},o.a.createElement(j.a,{item:!0},o.a.createElement(s.b,{to:t.ruta+"/",className:i.botonesNav},o.a.createElement(y.a,{style:{padding:"20px"}},"Explorar servicios")),o.a.createElement(s.b,{to:t.ruta+"/solicitar-servicio",hidden:1!==X,className:1===X?i.botonesNav:i.EstiloVacio},o.a.createElement(y.a,{style:{padding:"20px"}},"Solicitar servicio")),o.a.createElement(s.b,{to:t.ruta+"/mis-servicios-solicitados",hidden:1!==X,className:1===X?i.botonesNav:i.EstiloVacio},o.a.createElement(y.a,{style:{padding:"20px"}},"Mis servicios solicitados")),o.a.createElement(s.b,{to:t.ruta+"/mis-publicaciones",hidden:2!==X,className:2===X?i.botonesNav:i.EstiloVacio},o.a.createElement(y.a,{style:{padding:"20px"}},"Mis publicaciones")),o.a.createElement(s.b,{to:t.ruta+"/crear-publicacion",hidden:2!==X,className:2===X?i.botonesNav:i.EstiloVacio},o.a.createElement(y.a,{style:{padding:"20px"}},"Crear publicaci\xf3n"))),o.a.createElement(j.a,{item:!0,hidden:X>0},o.a.createElement(y.a,{style:{margin:10,padding:"8px 0px 8px 0px"},variant:"contained",color:"secondary"},o.a.createElement(Q,{mensaje:"Iniciar sesi\xf3n"})),o.a.createElement(s.b,{to:t.ruta+"/registrar",className:i.EstiloPC,style:{textDecoration:"none",color:"black"}},o.a.createElement(y.a,{variant:"contained",color:"secondary",style:{padding:8}},"Registrar cuenta"))))),o.a.createElement("div",{hidden:0===X},o.a.createElement(O.a,{color:"inherit",onClick:function(e){K(!0),T(e.currentTarget)}},o.a.createElement(x.a,{badgeContent:ne.length,color:"secondary"},o.a.createElement(N.a,null))),o.a.createElement(C.a,{id:"simple-menu",anchorEl:L,keepMounted:!0,open:Boolean(L),onClose:de},J&&o.a.createElement(Z,{notificaciones:ne,plegarNoti:de})),o.a.createElement(s.b,{to:t.ruta+"/mis-chats",style:{color:"black"}},o.a.createElement(O.a,{color:"inherit"},o.a.createElement(x.a,{badgeContent:ce,color:"secondary"},o.a.createElement(w.a,null)))),o.a.createElement(O.a,{edge:"end","aria-label":"account of current user","aria-haspopup":"true",color:"inherit",onClick:function(e){h(e.currentTarget)}},o.a.createElement(_.a,null)),o.a.createElement(C.a,{id:"simple-menu",anchorEl:m,keepMounted:!0,open:Boolean(m),onClose:le},o.a.createElement(S.a,{onClick:le},o.a.createElement(s.b,{to:t.ruta+"/modificar-usuario",className:i.EstiloLink},o.a.createElement(k.a,null,o.a.createElement(E.a,{style:{color:"gray",width:"20px",height:"20px"},src:t.ruta+"/usuario_editar.png",variant:"square",fontSize:"small"})),o.a.createElement(g.a,{variant:"inherit"},"Modificar mi perfil"))),o.a.createElement("div",{hidden:2!==X},o.a.createElement(S.a,{onClick:le},o.a.createElement(k.a,null,o.a.createElement(A.a,{fontSize:"small"})),o.a.createElement(s.b,{to:t.ruta+"/modificar-proveedor",className:i.EstiloLink},o.a.createElement(g.a,{variant:"inherit"},"Modificar mi perfil de proveedor")))),o.a.createElement("div",{hidden:2!==X},o.a.createElement(S.a,{onClick:le},o.a.createElement(k.a,null,o.a.createElement(P.a,{fontSize:"small"})),o.a.createElement(s.b,{to:t.ruta+"/perfil-proveedor/"+t.datosSesion.id,className:i.EstiloLink},o.a.createElement(g.a,{variant:"inherit"},"Ver mi perfil de proveedor")))),o.a.createElement("div",{hidden:2!==X||!0===t.datosSesion.identidad_verificada},o.a.createElement(S.a,{onClick:le},o.a.createElement(k.a,null,o.a.createElement(B.a,{fontSize:"small"})),o.a.createElement(s.b,{to:t.ruta+"/verificar-mi-identidad/",className:i.EstiloLink},o.a.createElement(g.a,{variant:"inherit"},"Verificar mi identidad")))),o.a.createElement(S.a,{onClick:function(){h(null),a({type:"setDatos",value:{apellido:"",blocked:"",confirmed:!1,created_at:"",descripcion:"",dni:"",email:"",estado:!1,id:null,mostrar_telefono:!1,nombre:"",permiso:0,provider:"local",role:{id:1,name:"Authenticated",description:"Default role given to authenticated user.",type:"authenticated"},telefono:"",tipo:0,ubicacion:"",updated_at:"",username:"",identidad_verificada:!1}}),a({type:"setJwt",value:""}),a({type:"setPublico",value:!0}),localStorage.setItem("datosLocal",JSON.stringify(null)),r.push(t.ruta+"/")}},o.a.createElement(k.a,null,o.a.createElement(D.a,{fontSize:"small"})),o.a.createElement(g.a,{variant:"inherit"},"Cerrar sesi\xf3n")))),o.a.createElement("div",{className:0===X?i.EstiloMovil:i.EstiloVacio},o.a.createElement(O.a,{className:i.hambur,onClick:function(e){I(e.currentTarget)},color:"inherit",edge:"end","aria-label":"menu hamburguesa"},o.a.createElement(M.a,null)),o.a.createElement(C.a,{id:"simple-menu",anchorEl:F,keepMounted:!0,open:Boolean(F),onClose:ue},o.a.createElement(s.b,{to:t.ruta+"/registrar",hidden:0!==X,className:i.EstiloLink},o.a.createElement(S.a,{onClick:ue},"Crear una nueva cuenta"),o.a.createElement("hr",null)),o.a.createElement(s.b,Object(p.a)({to:t.ruta+"/",className:i.EstiloMovil},"className",i.EstiloLink),o.a.createElement(S.a,{onClick:ue},o.a.createElement(g.a,{variant:"inherit"},"Explorar servicios"))),o.a.createElement("div",{hidden:X<1||X>2},o.a.createElement(s.b,Object(p.a)({to:t.ruta+"/solicitar-servicio",className:1===X?i.EstiloMovil:i.EstiloVacio},"className",i.EstiloLink),o.a.createElement(S.a,{onClick:ue},"Solicitar servicio")),o.a.createElement(s.b,Object(p.a)({to:t.ruta+"/mis-servicios-solicitados",className:1===X?i.EstiloMovil:i.EstiloVacio},"className",i.EstiloLink),o.a.createElement(S.a,{onClick:ue},"Mis servicios solicitados"))),o.a.createElement("div",{hidden:2!==X},o.a.createElement(s.b,Object(p.a)({to:t.ruta+"/crear-publicacion",className:i.EstiloMovil},"className",i.EstiloLink),o.a.createElement(S.a,{onClick:ue},"Crear publicaci\xf3n")),o.a.createElement(s.b,Object(p.a)({to:t.ruta+"/mis-publicaciones",className:i.EstiloMovil},"className",i.EstiloLink),o.a.createElement(S.a,{onClick:ue},"Mis publicaciones"))),o.a.createElement("div",{hidden:3!==X},o.a.createElement(s.b,{to:t.ruta+"/gestionar-reportes",className:i.EstiloLink},o.a.createElement(S.a,{onClick:ue},"Gestionar reportes")),o.a.createElement(s.b,{to:t.ruta+"/verificar-identidad",className:i.EstiloLink},o.a.createElement(S.a,{onClick:ue},"Verificar identidades "))))))))}var X=a(397),ee=a(398);function te(){var e=W(),t=Object(n.useState)(!1),a=Object(c.a)(t,2),i=a[0],r=a[1],l=Object(n.useContext)(G),u=l.state;l.dispatch;return o.a.createElement("div",null,o.a.createElement(b.a,{position:"relative",bottom:"0px",style:{zIndex:0}},o.a.createElement(v.a,null,o.a.createElement(j.a,{container:!0,direction:"row",alignItems:"center",justify:"center"},o.a.createElement(j.a,{item:!0,xs:12,sm:4,align:"center"},o.a.createElement(s.b,{className:e.EstiloLink,to:u.ruta+"/preguntas-frecuentes"},"Preguntas frecuentes")),o.a.createElement(j.a,{item:!0,xs:12,sm:4,align:"center"},o.a.createElement("a",{href:"#",className:e.EstiloLink,onClick:function(){r(!i)}},"Cont\xe1ctanos"),i&&o.a.createElement("div",null,o.a.createElement("a",{href:"mailto:angelruggia@gmail.com",className:e.EstiloLink},"angelruggia@gmail.com"),o.a.createElement("br",null),o.a.createElement("a",{href:"mailto:ferransolischorvat@gmail.com",className:e.EstiloLink},"ferransolischorvat@gmail.com"))),o.a.createElement(j.a,{item:!0,xs:12,sm:4,align:"center"},o.a.createElement(g.a,null,"Nuestras redes"),o.a.createElement("a",{href:"https://www.facebook.com/RuggiaAngel",target:"_blank",className:e.EstiloLink},o.a.createElement(X.a,{fontSize:"large"})),o.a.createElement("a",{href:"https://www.instagram.com/ferransolischorvat/",target:"_blank",className:e.EstiloLink},o.a.createElement(ee.a,{fontSize:"large"})))))))}var ae=a(24),ne=a(399),oe=a(400),ie=a(401),re=a(440),ce=a(446),se=a(402),le=a(403);function ue(e){var t=e.tipoPublicacion,a=e.settipoPublicacion,i=e.servicios,r=e.agregarSeleccionado,s=e.buscarServicios,l=e.inputBusqueda,u=e.setinputBusqueda,d=W(),m=Object(n.useState)(!1),h=Object(c.a)(m,2),f=h[0],b=h[1];return Object(n.useEffect)((function(){a(!f)}),[f]),o.a.createElement(ne.a,Object(p.a)({className:d.margenArriba,variant:"outlined"},"className",d.filaPublicacion),o.a.createElement(oe.a,null,o.a.createElement(g.a,{variant:"h5",component:"h2"},"Seleccione los filtros deseados"),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(ie.a,{className:d.inputAncho,control:o.a.createElement(re.a,{checked:f,name:"tipo",onChange:function(e){b(e.target.checked)}}),label:"Filtrar por publicaciones de solicitudes de servicios de usuarios."})),t&&o.a.createElement(j.a,{container:!0,className:d.margenArriba,spacing:2,justify:"space-around",alignItems:"center"},i.map((function(e,t){return o.a.createElement(j.a,{item:!0,xs:6,sm:4,md:3,lg:2,key:t},o.a.createElement(de,{key:t,servicio:e,agregarSeleccionado:r}))}))),o.a.createElement(U.a,{className:d.margenArriba,value:l,color:"secondary",onChange:function(e){u(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&s()},label:"Buscar por nombre",variant:"outlined",size:"medium",fullWidth:!0}),o.a.createElement(y.a,{onClick:s,className:d.margenArriba,color:"secondary",variant:"contained"},"Buscar")))}function de(e){var t=e.servicio,a=e.agregarSeleccionado,i=W(),r=Object(n.useState)(!1),s=Object(c.a)(r,2),l=s[0],u=s[1],d=Object(n.useState)(!1),m=Object(c.a)(d,2),p=m[0],h=m[1];return o.a.createElement("div",{className:i.mostrarFlex},o.a.createElement(ce.a,{clickable:!0,color:"primary",label:t.nombre,icon:l?o.a.createElement(se.a,null):o.a.createElement(le.a,null),onClick:function(){a(t.id),!1===p?(h(!0),u(!0)):(h(!1),u(!1))}}))}var me=a(447),pe=a(150),he=a.n(pe),fe=a(152),be=a.n(fe),ve=a(151),ge=a.n(ve),Ee=a(153),je=a.n(Ee),ye=a(436),Oe=a(103),xe=a.n(Oe),Ce=a(404),Se=a(405),ke=a(406),Ne=a(407),we=a(408);function _e(e){var t=e.titulo,a=e.funcionAceptar,i=e.mensaje,r=Object(n.useState)(!0),s=Object(c.a)(r,2),l=s[0],u=s[1],d=Object(n.useState)(!1),m=Object(c.a)(d,2),p=m[0],h=m[1],f=function(e){h(!0),a(e),h(!1),u(!1)};return o.a.createElement("div",null,o.a.createElement(Ce.a,{open:l,onClose:function(){f(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(Se.a,{id:"alert-dialog-title"},t),o.a.createElement(ke.a,null,o.a.createElement(Ne.a,{id:"alert-dialog-description"},i)),o.a.createElement(we.a,null,o.a.createElement(y.a,{onClick:function(){f(!1)},variant:"contained",color:"error"},"Cancelar"),o.a.createElement(y.a,{onClick:function(){f(!0)},variant:"contained",color:"primary",autoFocus:!0},"Aceptar"),p&&o.a.createElement(V.a,null))))}var Ae=a(450);function Pe(e){var t=e.valor,a=e.clickeable,n=e.cambiarValor,i=W();return o.a.createElement("div",{className:i.mostrarFlex},o.a.createElement(Ae.a,{name:"half-rating",onChange:n,readOnly:!a,value:t,precision:.5}))}var Be=a(377),De=a(378),Me=a(437),qe=a(409),ze=a(441);function Fe(e){return o.a.createElement(ye.a,Object.assign({elevation:6,variant:"filled"},e))}function Ie(e){var t=e.mensaje,a=e.setabrir,n=e.abrir,i=function(e,t){"clickaway"!==t&&a(!1)};return o.a.createElement("div",null,o.a.createElement(j.a,{container:!0},o.a.createElement(ze.a,{open:n,autoHideDuration:4e3,onClose:i},o.a.createElement(Fe,{onClose:i,severity:"success"},t))))}function Re(e){var t=e.fijo,a=e.esDePerfil,i=e.datos,r=W(),s=Object(n.useContext)(G).state,l=Object(n.useState)(!1),u=Object(c.a)(l,2),d=u[0],m=u[1],p=Object(n.useState)(!1),h=Object(c.a)(p,2),b=h[0],v=h[1],O=Object(n.useState)(""),x=Object(c.a)(O,2),C=x[0],k=x[1],N=Object(n.useState)(!1),w=Object(c.a)(N,2),_=w[0],A=w[1],P=Object(n.useState)({}),B=Object(c.a)(P,2),D=B[0],M=B[1],q=Object(n.useState)([]),z=Object(c.a)(q,2),L=z[0],T=z[1];return Object(n.useEffect)((function(){if(a){var e={},t=[];i.servicios.map((function(a){e.hasOwnProperty(a.categoria)||(e[a.categoria]=a.categoria,t.push(a.categoria))}));var n="";t.map((function(e){null!==e&&(n+="id_in="+e+"&")}));var o="Bearer "+s.jwt;0!==t.length&&f.a.get(s.servidor+"/api/categorias?"+n,{headers:{Authorization:o}}).then((function(e){T(e.data)})).catch((function(e){console.log("Un error ha ocurrido al cargar los chats."),console.log(e.response)}))}}),[i]),o.a.createElement("div",null,o.a.createElement("div",{className:t?r.botonFijo:r.botonNoF},o.a.createElement(y.a,{variant:"contained",color:"primary",startIcon:o.a.createElement(qe.a,null),onClick:function(){m(!0)}},"Contactar")),o.a.createElement(F.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:r.mostrarFlex,open:d,onClose:function(){m(!1)},closeAfterTransition:!0,BackdropComponent:I.a,BackdropProps:{timeout:500}},o.a.createElement(R.a,{in:d,style:{padding:"15px"}},o.a.createElement("div",{className:r.papelFondo},o.a.createElement("div",{style:{maxWidth:750},className:"Fondo"},o.a.createElement(j.a,{container:!0,direction:"row",justify:"center",spacing:2},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement("div",{align:"center"},o.a.createElement(E.a,{alt:"Perfil",src:null!==i.imagen_perfil?i.imagen_perfil:s.imagen_predeterminada,className:r.imagenPublicacion}))),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"h5",component:"h2",align:"center",className:r.form},i.nombre)),o.a.createElement("form",{onSubmit:function(e){v(!0);var t="Bearer "+s.jwt;if(e.preventDefault(),""!==s.jwt){var n=L.filter((function(e){return e.nombre===D}));f.a.post(s.servidor+"/api/chats/",{noleido_emisor:0,noleido_receptor:1,emisor:s.datosSesion.id,receptor:i.idP,solicitud:i.idS,categoria:a?n[0].id:null,peticion:!1},{headers:{Authorization:t}}).then((function(e){f.a.post(s.servidor+"/api/mensajes/",{contenido:C,enviado_por:!0,chat:e.data.id},{headers:{Authorization:t}}).then((function(e){A(!0),m(!1),v(!1)})).catch((function(e){console.log("Un error ha ocurrido al cargar los chats."),console.log(e.response)}))})).catch((function(e){console.log("Un error ha ocurrido al cargar los chats."),console.log(e.response)}))}else alert("Debes iniciar sesi\xf3n para poder contactar al proveedor."),v(!1)},className:r.inputAncho},o.a.createElement(Be.a,{color:"primary",fullWidth:!0},a&&o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(De.a,{id:"categoria",variant:"filled"},"Categor\xeda"),o.a.createElement(Me.a,{value:D,name:"categoria",onChange:function(e){M(e.target.value)},id:"categoria",labelId:"categoria",variant:"filled",label:"Categor\xeda",className:r.inputAncho,required:!0},L.map((function(e,t){return o.a.createElement(S.a,{key:t,value:e.nombre},e.nombre)})))),o.a.createElement("br",null),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(U.a,{onChange:function(e){k(e.target.value)},className:r.inputAncho,id:"filled-basic",label:"Escribe tu mensaje",variant:"filled",required:!0,multiline:!0})),o.a.createElement(j.a,{item:!0,xs:12,align:"center"},o.a.createElement("br",null),b&&o.a.createElement(V.a,null),o.a.createElement(y.a,{disabled:b,variant:"contained",color:"primary",type:"submit"},"Contactar"))))))))),o.a.createElement(Ie,{mensaje:"\xa1Mensaje enviado con \xe9xito!",setabrir:A,abrir:_}))}function Ue(e){var t=e.tipoPublicacion,a=e.datos,i=e.contactar,r=e.buscarSolicitudes,l=e.resenas,u=W(),d=Object(n.useContext)(G),m=d.state,p=(d.dispatch,Object(n.useState)("")),h=Object(c.a)(p,2),b=h[0],v=h[1],E=Object(n.useState)(!0),x=Object(c.a)(E,2),C=x[0],S=x[1],k=Object(n.useState)(!1),N=Object(c.a)(k,2),w=N[0],_=N[1],A=Object(n.useState)(!1),P=Object(c.a)(A,2),B=P[0],D=P[1],M=Object(n.useState)(0),z=Object(c.a)(M,2),F=z[0],I=z[1],R=Object(n.useState)({id:null,titulo:"",descripcion:"",precio_estimado:0,imagenes:[],servicio:"",estrellas:0,tipo:!1,Usuario_id:{id:null,nombre:"",apellido:"",imagen_perfil:null},Servicio_id:{nombre:""},pausado:!1}),U=Object(c.a)(R,2),L=U[0],V=U[1];Object(n.useEffect)((function(){v(t?"Precio estimado":"Presupuesto")}),[]),Object(n.useEffect)((function(){if(null!==a.Usuario_id){V(a);var e=a.Usuario_id.id===m.datosSesion.id;S(!e)}}),[a]),Object(n.useEffect)((function(){if(null!==l&&void 0!==l){var e=0,t=0;l.resenas.map((function(n){n.proveedor.id===a.Usuario_id.id&&(e+=n.recomendacion,t++)})),I(e/t)}}),[l]);return o.a.createElement(ne.a,{className:u.filaPublicacion},o.a.createElement(j.a,{container:!0,spacing:1,justify:"center"},L.pausado&&o.a.createElement(ye.a,{className:u.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"warning"},"Esta publicaci\xf3n se encuentra pausada."),L.bloqueado&&o.a.createElement(ye.a,{className:u.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"error"},"Esta publicaci\xf3n se encuentra bloqueada, contacte a un administrador."),function(){var e=Date.now(),t=new Date(L.updated_at);if(parseInt((e-t)/1e3/60/60/24)>(L.tipo?30:15))return o.a.createElement(ye.a,{className:u.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"info"},"Esta publicaci\xf3n se encuentra vencida, por lo tanto no aparecer\xe1 en las b\xfasquedas. Para que vuelva a aparecer su creador debe editarla. Tenga en cuenta que las solicitudes se vencen al cabo de 15 d\xedas y las publicaciones de proveedores a los 30 d\xedas. --Si usted quiere contactar a este proveedor/cliente, tenga en cuenta que es posible que no le responda o no le responda a  tiempo, ya que puede estar inactivo en Servia.--")}(),o.a.createElement(j.a,{container:!0,spacing:1,justify:"center",alignItems:"center"},o.a.createElement(j.a,{item:!0,xs:12,md:3,sm:12,align:"center"},o.a.createElement("img",{className:u.imagenPublicacion,src:0!==L.imagenes.length?m.servidor+L.imagenes[0].url:m.imagen_predeterminada,alt:"1\xb0 imagen"})),o.a.createElement(j.a,{item:!0,xs:12,md:9,sm:12},o.a.createElement(g.a,{align:"left",component:"h5",variant:"h5"},"".concat(L.Usuario_id.nombre," ").concat(L.Usuario_id.apellido),o.a.createElement(T.a,{xlDown:!L.Usuario_id.identidad_verificada},o.a.createElement(me.a,{title:"Usuario verificado"},o.a.createElement(O.a,{style:{padding:1}},o.a.createElement(xe.a,{color:"inherit"}))))),o.a.createElement(g.a,{align:"left",component:"h5",variant:"h5"},L.titulo,o.a.createElement(T.a,{xlDown:C},o.a.createElement(s.b,{to:t?m.ruta+"/modificar-publicacion/"+L.id:m.ruta+"/modificar-solicitud-servicio/"+L.id},o.a.createElement(me.a,{title:"Editar publicaci\xf3n"},o.a.createElement(O.a,null,o.a.createElement(he.a,{color:"primary"})))),o.a.createElement(me.a,{title:"Pausar publicaci\xf3n"},o.a.createElement(O.a,{onClick:function(){_(!0)}},L.pausado?o.a.createElement(ge.a,{color:"secondary"}):o.a.createElement(be.a,{color:"primary"}))),o.a.createElement(me.a,{title:"Eliminar publicaci\xf3n"},o.a.createElement(O.a,{onClick:function(){D(!0)}},o.a.createElement(je.a,{color:"error"}))),w&&o.a.createElement(_e,{mensaje:L.pausado?'La publicaci\xf3n "'+L.titulo+'" volver\xe1 a aparecer en la secci\xf3n de b\xfasqueda.':'La publicaci\xf3n "'+L.titulo+'" ser\xe1 pausada y no se mostrar\xe1 en la secci\xf3n de b\xfasqueda.',funcionAceptar:function(e){var t="Bearer "+m.jwt;if(e){var a=!L.pausado;f.a.put(m.servidor+"/api/solicitud/"+L.id,{pausado:a},{headers:{Authorization:t}}).then((function(e){})).catch((function(e){console.log("Error, no se ha podido pausar la publicaci\xf3n.",e.response)})),V((function(e){return Object(q.a)(Object(q.a)({},e),{},{pausado:a})}))}_(!1)},titulo:L.pausado?"\xbfEst\xe1 seguro que quiere despausar la publicaci\xf3n?":"\xbfEst\xe1 seguro que quiere pausar la publicaci\xf3n?"}),B&&o.a.createElement(_e,{mensaje:'Se va a eliminar la publicaci\xf3n "'+L.titulo+'", esta acci\xf3n no se puede revertir.',funcionAceptar:function(e){var t="Bearer "+m.jwt;e&&f.a.delete(m.servidor+"/api/solicitud/"+L.id,{headers:{Authorization:t}}).then((function(e){r()})).catch((function(e){console.log("Error, no se ha podido eliminar la publicaci\xf3n.",e.response)})),D(!1)},titulo:"\xbfEst\xe1 seguro que quiere eliminar la publicaci\xf3n?"}))),o.a.createElement("div",{style:{overflow:"auto",textOverflow:"ellipsis",textJustify:"auto",align:"left",WebkitLineClamp:"3",height:"3"}},o.a.createElement(g.a,null,L.descripcion)))),o.a.createElement(j.a,{item:!0,xs:8,sm:12,md:6,lg:3,align:"center"},o.a.createElement(g.a,{component:"h6",variant:"h6"},b,": $",L.precio_estimado)),t&&null!==L.Servicio_id&&o.a.createElement(j.a,{item:!0,xs:4,sm:6,md:6,lg:3,align:"center"},o.a.createElement(ce.a,{variant:"outlined",label:L.Servicio_id.nombre})),t&&o.a.createElement(j.a,{item:!0,xs:12,sm:6,md:6,lg:3,align:"center"},o.a.createElement(Pe,{valor:F,clickeable:!1,cambiarValor:function(){}})),L.Usuario_id.id!==m.datosSesion.id&&(!!L.tipo||1!==m.datosSesion.tipo)&&o.a.createElement(j.a,{item:!0,xs:6,sm:6,md:6,lg:3,align:"center",hidden:!i},o.a.createElement(Re,{fijo:!1,esDePerfil:!1,datos:{idS:L.id,idP:L.Usuario_id.id,nombre:"".concat(L.Usuario_id.nombre," ").concat(L.Usuario_id.apellido),imagen_perfil:null===L.Usuario_id.imagen_perfil?null:m.servidor+L.Usuario_id.imagen_perfil.url}})),o.a.createElement(j.a,{item:!0,xs:6,lg:12,md:12,sm:6,align:"center"},o.a.createElement(s.b,{to:m.ruta+"/publicacion/"+L.id,style:{textDecoration:"none",padding:0,color:"black"}},o.a.createElement(y.a,{variant:"outlined",color:"default"},"Leer m\xe1s")))))}var Le=a(119);function Te(){var e=W(),t=Object(l.h)().id,a=Object(n.useContext)(G),i=a.state,r=(a.dispatch,Object(n.useState)([])),s=Object(c.a)(r,2),u=s[0],d=s[1],m=Object(n.useState)({nombre:""}),p=Object(c.a)(m,2),h=p[0],b=p[1],v=Object(n.useState)([]),E=Object(c.a)(v,2),j=E[0],y=E[1],O=Object(n.useState)([]),x=Object(c.a)(O,2),C=x[0],S=x[1],k=Object(n.useState)(!1),N=Object(c.a)(k,2),w=N[0],_=N[1],A=Object(n.useState)(null),P=Object(c.a)(A,2),B=P[0],D=P[1],M=Object(n.useState)(!0),q=Object(c.a)(M,2),z=q[0],F=q[1],I=Object(n.useState)(""),R=Object(c.a)(I,2),U=R[0],L=R[1];function T(){f.a.get(i.servidor+"/api/solicitud?Categoria_id="+t+"&pausado=false&bloqueado=false&tipo="+z).then((function(e){var t=Date.now(),a=[];e.data.map((function(e){var n=new Date(e.updated_at);parseInt((t-n)/1e3/60/60/24)<=(z?30:15)&&a.push(e)})),_(!1),z?(a=a.filter((function(e){return!1===e.Usuario_id.estado&&!1===e.Usuario_id.bloqueado})),S(a)):S(a)})).catch((function(e){console.log("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)}))}Object(n.useEffect)((function(){_(!0),""===i.jwt&&!0!==i.publico||f.a.get(i.servidor+"/api/categorias/"+t).then((function(e){b(e.data),y(e.data.servicios)})).catch((function(e){console.log("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)})),T()}),[i.jwt,i.publico]);return Object(n.useEffect)((function(){if(0!==j.length){var e="";j.map((function(t){e+="servicios="+t.id+"&"})),f.a.get(i.servidor+"/api/resenas?"+e).then((function(e){var t={};e.data.map((function(e){e.servicios.map((function(a){t.hasOwnProperty(a.nombre)||(t[a.nombre]={resenas:[]}),t[a.nombre].resenas.push(e)}))})),D(t)})).catch((function(e){console.log("Un error ha ocurrido al buscar las rese\xf1as."),console.log(e.response)}))}}),[j]),o.a.createElement("div",{className:e.fondo},o.a.createElement(Le.a,{elevation:3,style:{width:950,padding:15},className:"Fondo"},o.a.createElement(g.a,{variant:"h5",component:"h2",align:"center"},h.nombre),o.a.createElement(ue,{tipoPublicacion:z,settipoPublicacion:F,inputBusqueda:U,setinputBusqueda:L,servicios:j,agregarSeleccionado:function(e){var t=u.some((function(t){return t===e}));d(t?u.filter((function(t){return e!==t})):function(t){return[].concat(Object(ae.a)(t),[e])})},buscarServicios:function(){var e="&";_(!0),u.map((function(t){null!==t&&(e+="Servicio_id="+t+"&")})),1===e.length&&(z?j.map((function(t){null!==t&&(e+="Servicio_id="+t.id+"&")})):e+="Categoria_id="+t+"&"),f.a.get(i.servidor+"/api/solicitud?"+e+"pausado=false&bloqueado=false&tipo="+z+"&titulo_contains="+U).then((function(e){var t=Date.now(),a=[];e.data.map((function(e){var n=new Date(e.updated_at);parseInt((t-n)/1e3/60/60/24)<=(z?30:15)&&a.push(e)})),z?(a=a.filter((function(e){return!1===e.Usuario_id.estado&&!1===e.Usuario_id.bloqueado})),S(a)):S(a),_(!1)})).catch((function(e){console.log("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)}))}}),o.a.createElement("br",null),w&&o.a.createElement(V.a,null),!w&&0===C.length&&o.a.createElement(ye.a,{variant:"outlined",severity:"info"},"Lo sentimos, por el momento no hay ",z?"publicaciones ":"solicitudes "," de servicios que coincidan con los filtros de b\xfasqueda."),C.map((function(e,t){return o.a.createElement(Ue,{key:t,resenas:e.tipo?null===B?null:B[e.Servicio_id.nombre]:null,buscarSolicitudes:T,datos:e,tipoPublicacion:z,contactar:!0})}))))}function Ve(e){var t=e.tipo,a=W(),i=Object(n.useContext)(G),r=i.state,l=(i.dispatch,Object(n.useState)([])),u=Object(c.a)(l,2),d=u[0],m=u[1],p=Object(n.useState)(!1),h=Object(c.a)(p,2),b=h[0],v=h[1];return Object(n.useEffect)((function(){""===r.jwt&&!0!==r.publico||(v(!0),f.a.get(r.servidor+"/api/categorias").then((function(e){m(e.data),v(!1)})).catch((function(e){console.log("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)})))}),[r.jwt,r.publico]),o.a.createElement("div",{className:a.fondo},o.a.createElement(Le.a,{elevation:3,className:"Fondo",style:{width:"85%"}},o.a.createElement(g.a,{component:"h3",variant:"h3",align:"center"},"Servia"),o.a.createElement(g.a,{component:"h4",variant:"h5",align:"center"},t?"\xa1Encuentra tu servicio ideal!":"\xa1Contacta con personas que buscan tu ayuda!"),b&&o.a.createElement(V.a,{style:{margin:"15px"}}),o.a.createElement("hr",null),o.a.createElement(j.a,{container:!0,spacing:5,justify:"space-around",alignItems:"center"},d.map((function(e,t){return o.a.createElement(j.a,{item:!0,sm:4,md:3,lg:2,key:t,align:"center"},o.a.createElement(s.b,{to:r.ruta+"/publicaciones/"+e.id,className:a.EstiloLink},o.a.createElement(g.a,{align:"center"},e.nombre),o.a.createElement(O.a,null,o.a.createElement(E.a,{style:{width:"100px",height:"100px"},src:r.servidor+e.imagen.formats.thumbnail.url,color:"secondary",fontSize:"inherit"}))))}))),o.a.createElement("hr",null),b&&o.a.createElement("br",null)))}var He=a(418),We=a(380),Je=a(411),Ke=a(335),Ge=a(414),Ye=a(417),Qe=a(410),Ze=a(412),$e=a(413),Xe=a(415),et=a(416);function tt(e){var t=e.esDePerfil,a=e.datosPerfil,i=W(),r=Object(n.useContext)(G).state,l=Object(n.useState)([]),u=Object(c.a)(l,2),d=u[0],m=u[1],p=Object(n.useState)(!1),h=Object(c.a)(p,2),b=h[0],v=h[1],x=Object(n.useState)({id:null,descripcion:"",titulo:"",identidad_verificada:!1,telefono:"",mostrar_telefono:!1,servicios:[],pausado:!1,bloqueado:!1}),C=Object(c.a)(x,2),S=C[0],k=C[1];return Object(n.useEffect)((function(){""===r.jwt&&!0!==r.publico||null!==a&&(k(a),function(e){var t=e.servicios.map((function(e){return e.categoria})),a="";t.map((function(e){a+="id_in="+e+"&"})),""!==a&&f.a.get(r.servidor+"/api/categorias?"+a).then((function(e){m(e.data)})).catch((function(e){console.log("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)}))}(a))}),[a]),o.a.createElement("div",{className:i.proveedorSticky},o.a.createElement(Le.a,{elevation:5},o.a.createElement(j.a,{className:i.padding,container:!0,direction:"row",justify:"space-between",alignItems:"center"},o.a.createElement(j.a,{item:!0,xs:12,className:t?i.EstiloPC:i.EstiloVacio},o.a.createElement(E.a,{alt:"Perfil",src:null!==S.imagen_perfil?r.servidor+S.imagen_perfil:r.imagen_predeterminada,className:i.imagenPublicacion})),o.a.createElement(j.a,{item:!0,xs:12,hidden:t},o.a.createElement(g.a,{variant:"h5",component:"h3",align:"center"},o.a.createElement(s.b,{to:r.ruta+"/perfil-proveedor/"+S.id,className:i.EstiloLink},S.titulo,o.a.createElement(T.a,{xlDown:!S.identidad_verificada},o.a.createElement(me.a,{title:"Usuario verificado"},o.a.createElement(O.a,null,o.a.createElement(Qe.a,{color:"primary"}))))))),o.a.createElement(j.a,{item:!0,xs:12,hidden:t},S.pausado&&o.a.createElement(ye.a,{className:i.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"warning"},"Este proveedor ha pausado sus servicios."),S.bloqueado&&o.a.createElement(ye.a,{className:i.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"error"},"Este proveedor se encuentra bloqueado.")),o.a.createElement(j.a,{item:!0,xs:12,hidden:t},o.a.createElement(L.a,null),o.a.createElement(g.a,{variant:"body1",component:"p",align:"justify"},S.descripcion)),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(L.a,null),o.a.createElement(We.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:o.a.createElement(Je.a,{component:"div",id:"nested-list-subheader"},"Servicios ofrecidos")},o.a.createElement(L.a,null),d.map((function(e,t){return o.a.createElement(at,{key:t,categoria:e,DatosPerfil:S})})),o.a.createElement(L.a,null))),o.a.createElement(T.a,{xlDown:!S.mostrar_telefono},0!==S.telefono.length&&o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement("a",{className:i.EstiloLink,href:"tel:"+S.telefono},o.a.createElement(y.a,{startIcon:o.a.createElement(Ze.a,null)},S.telefono)),o.a.createElement(me.a,{title:"Copiar"},o.a.createElement(O.a,{onClick:function(){return function(e){var t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),v(!0)}(S.telefono)}},o.a.createElement($e.a,null))))))),o.a.createElement(Ie,{mensaje:"Copiado al portapapeles",abrir:b,setabrir:v}))}function at(e){var t=e.categoria,a=e.DatosPerfil,i=Object(n.useState)(!0),r=Object(c.a)(i,2),s=r[0],l=r[1];return o.a.createElement("div",null,o.a.createElement(Ke.a,{button:!0,onClick:function(){l(!s)}},o.a.createElement(Ge.a,{primary:t.nombre}),s?o.a.createElement(Xe.a,null):o.a.createElement(et.a,null)),o.a.createElement(Ye.a,{in:s,timeout:"auto",unmountOnExit:!0},o.a.createElement(We.a,{component:"div",disablePadding:!0},o.a.createElement(L.a,null),a.servicios.map((function(e,a){if(e.categoria===t.id)return o.a.createElement(g.a,{key:a,variant:"h6",component:"h5",align:"left"},e.nombre)})),o.a.createElement(L.a,null))))}var nt=a(442),ot=a(155),it=a.n(ot),rt=a(154),ct=a.n(rt),st=a(336),lt=a(115),ut=a.n(lt);function dt(e){var t=e.esDePerfil,a=e.solicitud,i=(e.abrirAlerta,W()),r=Object(n.useContext)(G).state,s=Object(n.useState)(!1),l=Object(c.a)(s,2),u=l[0],d=l[1],m=Object(n.useState)([{id:null,nombre:"",tipo:!1}]),p=Object(c.a)(m,2),h=p[0],b=p[1],v=Object(n.useState)([]),E=Object(c.a)(v,2),j=E[0],O=E[1],x=Object(n.useState)(""),C=Object(c.a)(x,2),S=C[0],k=C[1],N=Object(n.useState)(!1),w=Object(c.a)(N,2),_=w[0],A=w[1],P=Object(n.useState)(!1),B=Object(c.a)(P,2),D=B[0],M=B[1],q=Object(n.useState)(!1),z=Object(c.a)(q,2),L=z[0],H=z[1],J=function(){O([]),d(!1)};function K(e){var n="Bearer "+r.jwt;if(0!==j.length)if(0!==e.length){var o=new Date,i=e[0],c=0!==S.length?S:"El usuario no ha proporcionado informaci\xf3n adicional.",s="##Nuevo reporte (Motivos:"+j.map((function(e){return" "+e.nombre}))+") del d\xeda "+o.getDate()+"/"+(o.getMonth()+1)+"/"+o.getFullYear()+": "+c;f.a.put(r.servidor+"/api/reportes/"+i.id,{descripcion:i.descripcion+s},{headers:{Authorization:n}}).then((function(e){H(!1),J(),A(!0),M(!1),O([]),k("")})).catch((function(e){console.log("Un error ha ocurrido al cargar las motivos."),console.log(e.response)}))}else f.a.post(r.servidor+"/api/reportes",{motivos:j.map((function(e){return e.id})),Solicitud_id:t?null:a.id,Usuario_id:t?a.id:a.Usuario_id.id,accion:!1,estado:0,descripcion:S},{headers:{Authorization:n}}).then((function(e){console.log(e.data),H(!1),J(),A(!0),M(!1),O([]),k("")})).catch((function(e){console.log("Un error ha ocurrido al cargar las motivos."),console.log(e.response)}));else M(!1),H(!0)}return Object(n.useEffect)((function(){""===r.jwt&&!0!==r.publico||f.a.get(r.servidor+"/api/motivos?tipo="+t).then((function(e){b(e.data)})).catch((function(e){console.log("Un error ha ocurrido al cargar las motivos."),console.log(e.response)}))}),[r.jwt,r.publico]),o.a.createElement("div",null,_&&o.a.createElement(Ie,{mensaje:"\xa1Se ha enviado su reporte correctamente!",abrir:_,setabrir:A}),o.a.createElement(me.a,{title:t?"Reportar proveedor de servicios":"Reportar publicaci\xf3n"},o.a.createElement(y.a,{onClick:function(){d(!0)}},o.a.createElement(ut.a,null))),o.a.createElement(F.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:i.mostrarFlex,open:u,onClose:J,closeAfterTransition:!0,BackdropComponent:I.a,BackdropProps:{timeout:500}},o.a.createElement(R.a,{in:u},o.a.createElement("div",{className:i.papelFondo},o.a.createElement(g.a,{variant:"h5",component:"h2",align:"center"},"Seleccione los motivos:"),o.a.createElement(st.a,{required:!0},h.map((function(e,t){return o.a.createElement(ie.a,{key:t,control:o.a.createElement(re.a,{variant:"error",onChange:function(){!function(e){!0===L&&H(!1);var t=j.some((function(t){return t.id===e.id}));O(t?j.filter((function(t){return t.id!==e.id})):function(t){return[].concat(Object(ae.a)(t),[{id:e.id,nombre:e.nombre}])})}(e)}}),label:e.nombre})}))),o.a.createElement(T.a,{xlDown:!L||D},o.a.createElement(g.a,{color:"error"},"Debe seleccionar un motivo.")),o.a.createElement(U.a,{className:i.inputAncho,onChange:function(e){k(e.target.value)},value:S,id:"filled-basic",label:"Informacion adicional",variant:"filled",multiline:!0}),o.a.createElement("br",null),D&&o.a.createElement(V.a,{color:"secondary"}),o.a.createElement(y.a,{disabled:D,className:i.inputAncho,style:{marginTop:10},size:"large",variant:"contained",color:"primary",onClick:function(){M(!0);var e="Bearer "+r.jwt;t||null===a.id||f.a.get(r.servidor+"/api/reportes?Solicitud_id="+a.id+"&estado=0",{headers:{Authorization:e}}).then((function(e){K(e.data)})).catch((function(e){console.log("Un error ha ocurrido al cargar las motivos."),console.log(e.response)})),t&&null!==a.id&&f.a.get(r.servidor+"/api/reportes?Usuario_id="+a.id+"&estado=0",{headers:{Authorization:e}}).then((function(e){K(e.data.filter((function(e){return null===e.Solicitud_id})))})).catch((function(e){console.log("Un error ha ocurrido al cargar las motivos."),console.log(e.response)}))}},"Enviar")))))}function mt(e){var t=e.esDePerfil,a=e.datosPagina,i=(e.abrirAlerta,W()),r=Object(n.useContext)(G).state,s=Object(n.useState)([]),l=Object(c.a)(s,2),u=l[0],d=l[1],m=Object(n.useState)({id:null,titulo:"",precio:"",categoria:"",servicio:"",estrella:0,descripcion:"",imagenes:[""],pausado:!1,bloqueado:!1,Usuario_id:null,imagen_perfil:"",updated_at:Date.now()}),p=Object(c.a)(m,2),h=p[0],f=p[1];return Object(n.useEffect)((function(){if((""!==r.jwt||!0===r.publico)&&null!==a){var e=a.imagenes.map((function(e){return{original:r.servidor+e.url,thumbnail:r.servidor+e.url}}));d(e),f({id:a.id,titulo:a.titulo,categoria:a.categoria,servicio:a.servicio,estrella:0,descripcion:a.descripcion,precio_estimado:a.precio_estimado,tipo:a.tipo,pausado:a.pausado,imagenes:a.imagenes,bloqueado:a.bloqueado,Usuario_id:a.Usuario_id,imagen_perfil:a.imagen_perfil,updated_at:a.updated_at})}}),[a,r.jwt,r.publico]),o.a.createElement("div",{className:i.mostrarFlex},o.a.createElement(Le.a,{elevation:5},o.a.createElement(j.a,{className:i.padding,container:!0,direction:"row",justify:"space-between",alignItems:"center"},h.pausado&&o.a.createElement(ye.a,{className:i.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"warning"},"perfil"===h.precio_estimado?"Este proveedor ha pausado sus servicios.":"Esta publicaci\xf3n se encuentra pausada."),h.bloqueado&&o.a.createElement(ye.a,{className:i.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"error"},"perfil"===h.precio_estimado?"Este proveedor se encuentra bloqueado.":"Esta publicaci\xf3n se encuentra bloqueada."),!t&&function(){var e=Date.now(),t=new Date(h.updated_at);if(parseInt((e-t)/1e3/60/60/24)>(h.tipo?30:15))return o.a.createElement(ye.a,{className:i.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"info"},"Esta publicaci\xf3n se encuentra vencida, por lo tanto no aparecer\xe1 en las b\xfasquedas. Para que vuelva a aparecer su creador debe editarla. Tenga en cuenta que las solicitudes se vencen al cabo de 15 d\xedas y las publicaciones de proveedores a los 30 d\xedas. --Si usted quiere contactar a este proveedor/cliente, tenga en cuenta que es posible que no le responda o no le responda a  tiempo, ya que puede estar inactivo en Servia.--")}(),o.a.createElement(j.a,{item:!0,lg:12,hidden:!t,align:"center",className:t?i.EstiloMovil:i.EstiloVacio},o.a.createElement(E.a,{alt:"Perfil",src:""!==h.imagen_perfil?r.servidor+h.imagen_perfil:r.imagen_predeterminada,className:i.imagenPublicacion})),o.a.createElement(j.a,{item:!0,lg:4,md:4,sm:12,hidden:t},o.a.createElement(g.a,{variant:"h6",component:"h3",align:"left"},h.tipo?"Precio estimado:":"Presupuesto:"," $",h.precio_estimado)),o.a.createElement(j.a,{hidden:t,item:!0,lg:7,md:7,sm:11,align:"right"},o.a.createElement("div",{align:"right"},o.a.createElement(nt.a,{separator:o.a.createElement(it.a,{fontSize:"small"}),"aria-label":"breadcrumb"},o.a.createElement(g.a,{color:"inherit"},h.categoria),a.tipo&&o.a.createElement(g.a,{color:"inherit"},h.servicio)))),!1===r.publico&&!t&&!h.bloqueado&&o.a.createElement(j.a,{item:!0,lg:1,md:1,sm:1},o.a.createElement(dt,{esDePerfil:t,solicitud:h})),o.a.createElement(j.a,{item:!0,xs:t?11:12,sm:t?11:12},o.a.createElement(g.a,{variant:"h5",component:"h1",align:"left"},h.titulo,t&&o.a.createElement(T.a,{xlDown:!h.identidad_verificada},o.a.createElement(me.a,{title:"Usuario verificado"},o.a.createElement(O.a,null,o.a.createElement(xe.a,{color:"primary"})))))),!1===r.publico&&t&&!h.bloqueado&&o.a.createElement(j.a,{item:!0,lg:1,md:1,sm:1},o.a.createElement(dt,{esDePerfil:t,solicitud:h})),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"body1",component:"p",align:"justify"},h.descripcion)),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(ct.a,{items:0===u.length?[{original:r.imagen_predeterminada,thumbnail:r.imagen_predeterminada}]:u})))))}var pt=a(33);function ht(e){var t=e.datos,a=W(),i=Object(n.useContext)(G).state,r=Object(n.useState)([]),s=Object(c.a)(r,2),l=s[0],u=s[1],d=Object(n.useState)(0),m=Object(c.a)(d,2),h=m[0],b=m[1];Object(n.useEffect)((function(){(""!==i.jwt||i.publico)&&null!==t.Usuario_id&&f.a.get(i.servidor+"/api/resenas?proveedor="+t.Usuario_id.id+"&servicios="+t.servicio_id).then((function(e){u(e.data);var t=0;e.data.map((function(e){t+=e.recomendacion})),b(t/e.data.length)})).catch((function(e){console.log("Un error ha ocurrido al buscar la solicitud."),console.log(e.response)}))}),[i.jwt,i.publico,t]);return Object(pt.b)("spanish",(function(e,t,a){return[["justo ahora","justo ahora"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 d\xeda","en 1 d\xeda"],["hace %s d\xedas","en %s d\xedas"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 a\xf1o","en 1 a\xf1o"],["hace %s a\xf1os","en %s a\xf1os"]][t]})),o.a.createElement("div",{className:a.mostrarFlex},o.a.createElement(Le.a,{elevation:5},o.a.createElement(j.a,{className:a.padding,container:!0,direction:"row",justify:"flex-start",alignItems:"center"},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"h4",component:"h2",align:"left"},"Rese\xf1as")),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,Object(p.a)({variant:"h5",component:"h2",align:"center"},"align","left"),0!==l.length&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Pe,{clickeable:!1,valor:h})," ","Puntuaci\xf3n promedio de ".concat(h," en base a ").concat(l.length," rese\xf1as hechas por otros usuarios.")))),o.a.createElement(j.a,{item:!0,xs:12},0===l.length&&o.a.createElement(ye.a,{className:a.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"info"},"Esta publicaci\xf3n a\xfan no tiene rese\xf1as"),l.map((function(e,t){return o.a.createElement(ft,{opinion:e,key:t})}))))))}function ft(e){var t=e.opinion,a=W();return o.a.createElement(Le.a,{variant:"outlined",square:!0},o.a.createElement(j.a,{className:a.padding,container:!0,direction:"row",justify:"space-around",alignItems:"baseline"},o.a.createElement(j.a,{item:!0,xs:6},o.a.createElement(g.a,{variant:"h5",component:"h2",align:"left"},t.titulo)),o.a.createElement(j.a,{item:!0,xs:6},o.a.createElement(Pe,{clickeable:!1,valor:t.recomendacion})),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"body1",component:"p",align:"justify"},t.descripcion)),t.servicios.map((function(e,t){return o.a.createElement(j.a,{key:t,item:!0,xs:2,align:"center"},o.a.createElement(ce.a,{variant:"outlined",label:e.nombre}))})),o.a.createElement(j.a,{item:!0,xs:2,align:"right"},Object(pt.a)(new Date(t.created_at),"spanish"))))}function bt(){var e=Object(n.useContext)(G).state,t=Object(l.h)().id,a=Object(n.useState)({id:null,descripcion:"",nombre:"",apellido:"",identidad_verificada:!1,telefono:"",mostrar_telefono:!1,pausado:!1,bloqueado:!1,servicios:[],imagen_perfil:""}),i=Object(c.a)(a,2),r=i[0],s=i[1],u=Object(n.useState)({id:null,descripcion:"",titulo:"",precio_estimado:0,tipo:!1,pausado:!1,bloqueado:!1,imagenes:[],Usuario_id:null}),d=Object(c.a)(u,2),m=d[0],p=d[1];return Object(n.useEffect)((function(){""===e.jwt&&!0!==e.publico||f.a.get(e.servidor+"/api/solicitud/"+t).then((function(t){!function(t){p({id:t.id,titulo:t.titulo,descripcion:t.descripcion,precio_estimado:t.precio_estimado,tipo:t.tipo,pausado:t.pausado,imagenes:t.imagenes,categoria:t.Categoria_id.nombre,servicio:t.tipo?t.Servicio_id.nombre:null,Usuario_id:t.Usuario_id,bloqueado:t.bloqueado,servicio_id:t.tipo?t.Servicio_id.id:null,updated_at:t.updated_at});var a=""!==e.jwt?"Bearer "+e.jwt:"";f.a.get(e.servidor+"/users/"+t.Usuario_id.id,{headers:{Authorization:a}}).then((function(e){s({id:e.data.id,descripcion:e.data.descripcion,titulo:"".concat(e.data.nombre," ").concat(e.data.apellido),identidad_verificada:e.data.identidad_verificada,telefono:e.data.telefono,mostrar_telefono:e.data.mostrar_telefono,servicios:e.data.servicios,bloqueado:e.data.bloqueado,pausado:e.data.estado,imagen_perfil:null===e.data.imagen_perfil?null:e.data.imagen_perfil.url})})).catch((function(e){console.log("Un error ha ocurrido al buscar el usuario."),console.log(e.response)}))}(t.data)})).catch((function(e){console.log("Un error ha ocurrido al buscar la solicitud."),console.log(e.response)}))}),[e.jwt,e.publico]),o.a.createElement(He.a,{style:{width:"95%"}},o.a.createElement(j.a,{container:!0,direction:"row",justify:"center",alignItems:"stretch"},o.a.createElement(j.a,{item:!0,md:8,xs:12},o.a.createElement(mt,{esDePerfil:!1,datosPagina:m}),m.tipo&&o.a.createElement(ht,{datos:m})),m.tipo&&o.a.createElement(j.a,{item:!0,md:4,xs:12},o.a.createElement(tt,{esDePerfil:!1,datosPerfil:r})),r.id!==e.datosSesion.id&&!m.pausado&&!m.bloqueado&&!r.pausado&&!r.bloqueado&&(!!m.tipo||1!==e.datosSesion.tipo)&&o.a.createElement(Re,{fijo:!0,esDePerfil:!1,datos:{idS:m.id,idP:r.id,nombre:r.titulo,imagen_perfil:r.imagen_perfil}})))}a(235);var vt=a(156),gt=a.n(vt),Et=function(e){var t=e.cantidad,a=e.funcionSetImagen,i=e.ids,r=e.setcargando,s=Object(n.useState)([]),l=Object(c.a)(s,2),u=l[0],d=l[1],m=Object(n.useState)([]),p=Object(c.a)(m,2),h=p[0],b=p[1],v=Object(n.useContext)(G).state;Object(n.useEffect)((function(){if(null!==v.datosSesion.id&&i.some((function(e){return null!==e}))){var e="";i.map((function(t){null!==t&&(e+="id_in="+t+"&")})),f.a.get(v.servidor+"/upload/files?"+e).then((function(e){e.data.map((function(e){!function(e){var t,a=v.servidor+e.url;fetch(a).then((function(a){a.arrayBuffer().then((function(a){t=new File([a],""+e.id,{type:"image/jpeg"}),d([].concat(Object(ae.a)(u),[t])),b((function(e){return[].concat(Object(ae.a)(e),[t])}))}))}))}(e)}))})).catch((function(e){console.log("Error: ",e.response)}))}}),[i]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(gt.a,{getUploadParams:function(e){var n=e.file;e.meta;return a(n,t,0,h),{url:"https://httpbin.org/post"}},onChangeStatus:function(e,n){e.meta;var o=e.file;"removed"===n&&a(o,t,1,h),"uploading"===n&&r(!0),"done"===n&&r(!1)},maxFiles:t,initialFiles:0!==i.length?u:null,multiple:!0,maxSizeBytes:5e6,canCancel:!1,accept:"image/*",inputWithFilesContent:"Subir otra imagen",inputContent:function(){return 1===t?"Selecciona ".concat(t," imagen"):"Selecciona hasta ".concat(t," im\xe1genes")},styles:{dropzone:{width:"100%",height:"100%",overflow:"auto"},dropzoneActive:{borderColor:"green"}}}))};function jt(e){var t=e.servicio,a=e.agregarSeleccionado,i=W(),r=Object(n.useState)(o.a.createElement("div",null,o.a.createElement(le.a,null))),s=Object(c.a)(r,2),l=s[0],u=s[1],d=Object(n.useState)(t.seleccionado),m=Object(c.a)(d,2),p=m[0],h=m[1];Object(n.useEffect)((function(){!0===t.seleccionado?(h(!0),u(o.a.createElement("div",null,o.a.createElement(se.a,null)))):(h(!1),u(o.a.createElement("div",null,o.a.createElement(le.a,null))))}),[]);return o.a.createElement("div",{className:i.mostrarFlex},o.a.createElement(ce.a,{clickable:!0,color:"primary",label:t.nombre,icon:l,onClick:function(){a(!p),!1===p?(h(!0),u(o.a.createElement("div",null,o.a.createElement(se.a,null)))):(h(!1),u(o.a.createElement("div",null,o.a.createElement(le.a,null))))}}))}function yt(){var e=W(),t=Object(l.g)(),a=Object(n.useContext)(G),i=a.state,r=a.dispatch,s=Object(n.useState)(!1),u=Object(c.a)(s,2),d=u[0],m=u[1],h=Object(n.useState)(!1),b=Object(c.a)(h,2),v=b[0],E=b[1],O=Object(n.useState)([]),x=Object(c.a)(O,2),C=x[0],S=x[1],k=Object(n.useState)([]),N=Object(c.a)(k,2),w=N[0],_=N[1],A=Object(n.useState)(!1),P=Object(c.a)(A,2),B=P[0],D=P[1],M=Object(n.useState)(!1),z=Object(c.a)(M,2),F=z[0],I=z[1],R=Object(n.useState)([]),L=Object(c.a)(R,2),H=L[0],J=L[1],K=Object(n.useState)([]),Y=Object(c.a)(K,2),Q=Y[0],Z=Y[1],$=Object(n.useState)([]),X=Object(c.a)($,2),ee=X[0],te=X[1],ne=Object(n.useState)({descripcion:"",estado:!1,mostrar_telefono:!1,pasarImagenes:[]}),oe=Object(c.a)(ne,2),ce=oe[0],se=oe[1];Object(n.useEffect)((function(){if(""!==i.jwt||!0===i.publico){var e=i.datosSesion.imagenes_proveedor.map((function(e){return e.id}));se({descripcion:i.datosSesion.descripcion,estado:i.datosSesion.estado,mostrar_telefono:i.datosSesion.mostrar_telefono,pasarImagenes:e}),f.a.get(i.servidor+"/api/categorias").then((function(e){e.data.map((function(t){t.seleccionado=!1,t.servicios.map((function(e){e.seleccionado=!1})),0!==i.datosSesion.servicios.length&&e.data.map((function(e){e.servicios.map((function(t){i.datosSesion.servicios.map((function(a){a.categoria===e.id&&(e.seleccionado=!0),a.id===t.id&&(t.seleccionado=!0)}))}))}))})),S(e.data)})).catch((function(e){console.log("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)}))}}),[i.jwt,i.publico]);var le=function(e){v||E(!0);var t=e.target.checked,a=e.target.name;se(Object(q.a)(Object(q.a)({},ce),{},Object(p.a)({},a,t)))};return Object(n.useEffect)((function(){if(0!==w.length){var e="Bearer "+i.jwt;m(!0),function(e){var t=[];H.map((function(e){ee.some((function(t){return t===e}))||t.push(e)}));var a=[];Q.map((function(e){ee.some((function(t){return t===e}))&&a.push(e)}));for(var n=0;n<Q.length;n++){var o=Number(Q[n].name),c="Bearer "+i.jwt;f.a.delete(i.servidor+"/upload/files/"+o,{headers:{Authorization:c}}).then((function(e){})).catch((function(e){console.log("Error al borrar las imagenes"),console.log(e.response)}))}for(var s=new FormData,l=0;l<t.length;l++)s.append("files",t[l]);if(0!==t.length){s.append("ref","user"),s.append("refId",e),s.append("field","imagenes_proveedor"),s.append("source","users-permissions");var u="Bearer "+i.jwt;f.a.post(i.servidor+"/upload",s,{headers:{"Content-Type":"multipart/form-data",Authorization:u}}).then((function(e){var t=i.datosSesion;t.imagenes_proveedor=e.data,r({type:"setDatos",value:t}),r({type:"setJwt",value:i.jwt}),localStorage.setItem("datosLocal",JSON.stringify({jwt:i.jwt,datosSesion:t}))})).catch((function(e){console.log("Error al cargar las im\xe1genes."),console.log("Error: ",e.response)}))}}(i.datosSesion.id),f.a.put(i.servidor+"/users/"+i.datosSesion.id,{descripcion:ce.descripcion,estado:ce.estado,mostrar_telefono:ce.mostrar_telefono,servicios:w},{headers:{Authorization:e}}).then((function(e){var a=e.data;r({type:"setDatos",value:e.data}),localStorage.setItem("datosLocal",JSON.stringify({jwt:i.jwt,datosSesion:a})),I(!0),m(!1),setTimeout((function(){t.push(i.ruta+"/")}),3e3)})).catch((function(e){console.log("Ha ocurrido un error al guardar los datos"),console.log(e.response),m(!1)}))}}),[w]),o.a.createElement("div",{className:e.fondo},o.a.createElement(Le.a,{elevation:3,className:e.pantallaMedia},o.a.createElement(Be.a,{color:"primary",fullWidth:!0},o.a.createElement(j.a,{className:e.filaPublicacion,container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"h5",component:"h1",align:"center"},"Modificar mis datos de proveedor")),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(ie.a,{className:e.inputAncho,control:o.a.createElement(re.a,{checked:ce.estado,name:"estado",onChange:le}),label:"Pausar mis servicios"})),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(ie.a,{className:e.inputAncho,control:o.a.createElement(re.a,{name:"mostrar_telefono",checked:ce.mostrar_telefono,onChange:le}),label:"Mostrar mi n\xfamero de tel\xe9fono"})),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(U.a,{className:e.inputAncho,onChange:function(e){se(Object(q.a)(Object(q.a)({},ce),{},{descripcion:e.target.value})),v||E(!0)},name:"descripcion",value:ce.descripcion,id:"filled-basic",label:"Descripci\xf3n",multiline:!0,variant:"filled"})),o.a.createElement(j.a,{item:!0,xs:12,className:e.inputAncho},o.a.createElement(Et,{setcargando:m,cantidad:10,funcionSetImagen:function(e,t,a,n){if(te(n),0===a)J([].concat(Object(ae.a)(H),[e]));else{Z((function(t){return[].concat(Object(ae.a)(Q),[e])}));var o=H.filter((function(t){return t.file!==e}));J(o)}},ids:ce.pasarImagenes})),o.a.createElement(Ie,{mensaje:"\xa1Tus datos se han guardado correctamente!",abrir:F,setabrir:I}),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"h6",component:"h3",align:"left",className:e.alinearInputs},"Selecciona los servicios que ofreces")),C.map((function(e,t){return o.a.createElement(j.a,{key:t,item:!0,xs:12},o.a.createElement(j.a,{container:!0,justify:"flex-start"},o.a.createElement(ie.a,{control:o.a.createElement(re.a,{checked:e.seleccionado,onChange:function(e){S(C.map((function(a,n){return t===n&&(a.seleccionado=e.target.checked),a})))}}),label:e.nombre})),o.a.createElement(T.a,{xlDown:!e.seleccionado},o.a.createElement(j.a,{container:!0,spacing:2,justify:"space-around"},e.servicios.map((function(e,a){return o.a.createElement(j.a,{item:!0,xs:6,sm:4,md:3,lg:2,key:a},o.a.createElement(jt,{servicio:e,agregarSeleccionado:function(n){e.seleccionado=n,S(C.map((function(n,o){return t===o&&(n.servicios[a]=e),n})))}}))})))))})),o.a.createElement(T.a,{xlDown:!B||d},o.a.createElement(j.a,{item:!0,xs:12,align:"center"},o.a.createElement(g.a,{color:"error"},"Debe seleccionar al menos un servicio."))),o.a.createElement("div",{className:e.inputAncho,hidden:!d},o.a.createElement(V.a,null)),o.a.createElement(j.a,{item:!0,xs:6,align:"center"},o.a.createElement(y.a,{onClick:function(){var e=[];C.map((function(t){t.seleccionado&&t.servicios.map((function(t){t.seleccionado&&(e.push(t.id),v||E(!0))}))})),0!==e.length?D(!1):D(!0),_(e)},disabled:d,size:"large",variant:"contained",color:"primary"},"Guardar")),o.a.createElement(j.a,{item:!0,xs:6,align:"center"},o.a.createElement(y.a,{onClick:function(){t.push(i.ruta+"/")},size:"large",variant:"contained",color:"secondary"},"Cancelar"))))))}function Ot(){var e=Object(n.useContext)(G).state,t=Object(l.h)().id,a=Object(n.useState)({descripcion:"",titulo:"",identidad_verificada:!1,telefono:"",mostrar_telefono:!1,servicios:[],imagenes:[],bloqueado:!1,imagen_perfil:"",precio_estimado:"perfil",pausado:!1,tipo:!1,categoria:"",servicio:"",estrella:0}),i=Object(c.a)(a,2),r=i[0],s=i[1];return Object(n.useEffect)((function(){if(""!==e.jwt||!0===e.publico){var a=""!==e.jwt?"Bearer "+e.jwt:"";f.a.get(e.servidor+"/users/"+t,{headers:{Authorization:a}}).then((function(e){s({id:e.data.id,descripcion:e.data.descripcion,titulo:"".concat(e.data.nombre," ").concat(e.data.apellido),identidad_verificada:e.data.identidad_verificada,telefono:e.data.telefono,mostrar_telefono:e.data.mostrar_telefono,servicios:e.data.servicios,imagenes:e.data.imagenes_proveedor,bloqueado:e.data.bloqueado,pausado:e.data.estado,precio_estimado:"perfil",imagen_perfil:null===e.data.imagen_perfil?null:e.data.imagen_perfil.url})})).catch((function(e){console.log("Un error ha ocurrido al buscar el usuario."),console.log(e.response)}))}}),[e.jwt,e.publico]),o.a.createElement(He.a,null,o.a.createElement(j.a,{container:!0,direction:"row",justify:"center",alignItems:"stretch"},o.a.createElement(j.a,{item:!0,md:8,xs:12},o.a.createElement(mt,{esDePerfil:!0,datosPagina:r})),o.a.createElement(j.a,{item:!0,md:4,xs:12},o.a.createElement(tt,{esDePerfil:!0,datosPerfil:r})),r.id!==e.datosSesion.id&&0!==r.servicios.length&&!r.pausado&&!r.bloqueado&&o.a.createElement(Re,{fijo:!0,esDePerfil:!0,datos:{idS:null,idP:r.id,nombre:r.titulo,servicios:r.servicios}})))}function xt(e){var t=e.tipoPublicacion,a=e.modificar,i=W(),r=Object(n.useContext)(G).state,s=Object(l.h)().id,u=Object(l.g)(),d=Object(n.useState)(""),m=Object(c.a)(d,2),h=m[0],b=m[1],v=Object(n.useState)(""),E=Object(c.a)(v,2),O=E[0],x=E[1],C=Object(n.useState)([]),k=Object(c.a)(C,2),N=k[0],w=k[1],_=Object(n.useState)([]),A=Object(c.a)(_,2),P=A[0],B=A[1],D=Object(n.useState)(!1),M=Object(c.a)(D,2),z=M[0],F=M[1],I=Object(n.useState)([]),R=Object(c.a)(I,2),L=R[0],T=R[1],H=Object(n.useState)(!1),J=Object(c.a)(H,2),K=J[0],Y=J[1],Q=Object(n.useState)(""),Z=Object(c.a)(Q,2),$=Z[0],X=Z[1],ee=Object(n.useState)([]),te=Object(c.a)(ee,2),ne=te[0],oe=te[1],ie=Object(n.useState)([]),re=Object(c.a)(ie,2),ce=re[0],se=re[1],le=Object(n.useState)({titulo:"",precio_estimado:"",Categoria_id:{nombre:""},Servicio_id:{nombre:""},descripcion:"",imagenes:[],pausado:!1,bloqueado:!1}),ue=Object(c.a)(le,2),de=ue[0],me=ue[1];function pe(e){me(Object(q.a)(Object(q.a)({},de),{},Object(p.a)({},e.target.name,e.target.value)))}Object(n.useEffect)((function(){t?(x(a?"Modificar publicaci\xf3n":"Crear publicaci\xf3n"),b("Precio estimado")):(x(a?"Modificar solicitud de servicio":"Solicitar servicio"),b("Presupuesto")),""===r.jwt&&!0!==r.publico||(F(!0),f.a.get(r.servidor+"/api/categorias").then((function(e){w(e.data),F(!1)})).catch((function(e){console.log("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)})))}),[r.jwt,r.publico,t,a]),Object(n.useEffect)((function(){a&&0!==N.length&&(F(!0),f.a.get(r.servidor+"/api/solicitud/"+s).then((function(e){r.datosSesion.id===e.data.Usuario_id.id?(e.data.imagenes=e.data.imagenes.map((function(e){return e.id})),me(e.data),t&&N.map((function(t){t.id===e.data.Servicio_id.categoria&&B(t.servicios)}))):u.push(r.ruta+"/"),F(!1)})).catch((function(e){console.log("Un error ha ocurrido al cargar la solicitud."),console.log(e.response)})))}),[N]);return o.a.createElement("div",{className:i.fondo},o.a.createElement(Le.a,{elevation:3,style:{padding:"10px"},className:"Fondo"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),F(!0);var n=new FormData,o=[];L.map((function(e){ne.some((function(t){return t===e}))||o.push(e)}));var i=[];ce.map((function(e){ne.some((function(t){return t===e}))&&i.push(e)}));for(var c=0;c<ce.length;c++){var l=Number(ce[c].name),d="Bearer "+r.jwt;f.a.delete(r.servidor+"/upload/files/"+l,{headers:{Authorization:d}}).then((function(e){})).catch((function(e){console.log("Error al borrar las imagenes"),console.log(e.response)}))}for(var m=0;m<o.length;m++)n.append("files.imagenes",o[m]);n.append("data",JSON.stringify({titulo:de.titulo,precio_estimado:""===de.precio_estimado?0:de.precio_estimado,descripcion:de.descripcion,Categoria_id:de.Categoria_id.id,Servicio_id:t?de.Servicio_id.id:null,Usuario_id:r.datosSesion.id,pausado:!1,tipo:t}));var p="Bearer "+r.jwt;a?f.a.put(r.servidor+"/api/solicitud/"+s,n,{headers:{"Content-Type":"multipart/form-data",Authorization:p}}).then((function(e){e.data.bloqueado&&function(){var e="Bearer "+r.jwt;f.a.get(r.servidor+"/api/reportes?Solicitud_id="+de.id,{headers:{Authorization:e}}).then((function(t){t.data.filter((function(e){return 1===e.estado})).map((function(t){f.a.put(r.servidor+"/api/reportes/"+t.id,{estado:-1},{headers:{Authorization:e}}).then((function(e){})).catch((function(e){console.log("Error: ",e.response)}))}))})).catch((function(e){console.log("Error: ",e.response)}))}(),F(!1),X("\xa1Publicaci\xf3n modificada!"),Y(!0),setTimeout((function(){u.push(r.ruta+"/")}),3e3)})).catch((function(e){console.log("Error, no se ha podido modificar la solicitud.",e.response)})):f.a.post(r.servidor+"/api/solicitud",n,{headers:{"Content-Type":"multipart/form-data",Authorization:p}}).then((function(e){var a=r.datosSesion.servicios.some((function(e){return e.id===de.Servicio_id.id}));if(t&&!a){var n=r.datosSesion.servicios.map((function(e){return e.id}));n.push(de.Servicio_id.id),f.a.put(r.servidor+"/users/"+r.datosSesion.id,{servicios:n},{headers:{Authorization:p}}).then((function(e){F(!1)})).catch((function(e){console.log(e.response),console.log("Ha ocurrido un error al guardar los datos"),F(!1)}))}F(!1),X("\xa1Publicaci\xf3n creada!"),Y(!0),setTimeout((function(){u.push(r.ruta+"/")}),3e3)})).catch((function(e){console.log("Error, no se ha podido crear la solicitud.",e.response)}))}},o.a.createElement(Be.a,{className:i.padding2,color:"primary",fullWidth:!0},o.a.createElement(j.a,{className:i.pantallaMedia,container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"h5",component:"h1",align:"center"},O)),o.a.createElement(j.a,{item:!0,sm:8,xs:12},o.a.createElement(U.a,{onChange:pe,value:de.titulo,name:"titulo",className:i.inputAncho,id:"filled-basic",label:"T\xedtulo de la publicaci\xf3n",variant:"filled",maxLength:50,required:!0})),o.a.createElement(j.a,{item:!0,sm:4,xs:12},o.a.createElement(U.a,{onChange:pe,value:de.precio_estimado,name:"precio_estimado",type:"number",className:i.inputAncho,id:"formatted-numberformat-input",label:h,variant:"filled"})),o.a.createElement(j.a,{item:!0,sm:6,xs:12},o.a.createElement(Be.a,{className:i.inputAncho},o.a.createElement(De.a,{id:"Categoria_id",variant:"filled"},"Categor\xeda"),o.a.createElement(Me.a,{value:de.Categoria_id.nombre,name:"Categoria_id",onChange:function(e){var t=N.filter((function(t){return t.nombre===e.target.value}));B(t[0].servicios),me(Object(q.a)(Object(q.a)({},de),{},{Categoria_id:t[0],Servicio_id:{nombre:""}}))},id:"Categoria_id",labelId:"Categoria_id",variant:"filled",label:"Categor\xeda",required:!0},N.map((function(e,t){return o.a.createElement(S.a,{key:t,value:e.nombre},e.nombre)}))))),t&&o.a.createElement(j.a,{item:!0,sm:6,xs:12},o.a.createElement(Be.a,{className:i.inputAncho},o.a.createElement(De.a,{id:"Servicio_id",variant:"filled"},"Servicio"),o.a.createElement(Me.a,{value:de.Servicio_id.nombre,name:"Servicio_id",id:"Servicio_id",labelId:"Servicio_id",onChange:function(e){var t;N.map((function(a){a.nombre===de.Categoria_id.nombre&&(t=a.servicios.filter((function(t){return t.nombre===e.target.value})))})),me(Object(q.a)(Object(q.a)({},de),{},{Servicio_id:t[0]}))},label:"Servicio",variant:"filled",required:!0},P.map((function(e,t){return o.a.createElement(S.a,{key:t,value:e.nombre},e.nombre)}))))),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(U.a,{onChange:pe,value:de.descripcion,name:"descripcion",className:i.inputAncho,id:"filled-basic",label:"Descripci\xf3n",maxLength:400,multiline:!0,variant:"filled"})),o.a.createElement(j.a,{item:!0,xs:12,className:i.inputAncho},o.a.createElement(Et,{cantidad:10,funcionSetImagen:function(e,t,a,n){if(oe(n),0===a)T([].concat(Object(ae.a)(L),[e]));else{se((function(t){return[].concat(Object(ae.a)(ce),[e])}));var o=L.filter((function(t){return t!==e}));T(o)}oe(n)},setcargando:F,ids:de.imagenes})),o.a.createElement(j.a,{item:!0,xs:12,className:i.inputAncho},z&&o.a.createElement(V.a,null)),o.a.createElement(j.a,{item:!0,xs:6,align:"center"},o.a.createElement(y.a,{className:i.botones,disabled:z,type:"submit",size:"large",variant:"contained",color:"primary"},"Guardar")),o.a.createElement(j.a,{item:!0,xs:6,align:"center"},o.a.createElement(y.a,{className:i.botones,onClick:function(){u.push(r.ruta+"/")},size:"large",variant:"contained",color:"secondary"},"Cancelar")),o.a.createElement(Ie,{mensaje:$,abrir:K,setabrir:Y}))))))}var Ct=a(419),St=a(157),kt=a.n(St);a(135);function Nt(){var e=Object(n.useContext)(G),t=e.state,a=(e.dispatch,W()),i=Object(n.useState)([]),r=Object(c.a)(i,2),s=r[0],l=r[1],u=Object(n.useState)(!1),d=Object(c.a)(u,2),m=d[0],p=d[1];function h(e){l(s.filter((function(t){return t.id!==e})))}return Object(n.useEffect)((function(){p(!0);var e="Bearer "+t.jwt;""!==t.jwt&&f.a.get(t.servidor+"/users?espera_verificacion=true",{headers:{Authorization:e}}).then((function(e){l(e.data),p(!1)})).catch((function(e){console.log("Un error ha ocurrido al buscar los usuarios a verificar."),console.log(e.response)}))}),[t.jwt]),o.a.createElement("div",{className:a.fondo},o.a.createElement(Le.a,{elevation:5,style:{margin:"10px 0px",padding:"20px",width:"90%"},className:"Fondo"},o.a.createElement(j.a,{container:!0,justify:"center",spacing:2},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"h4",component:"h1",align:"center"},"Verificar identidades")),o.a.createElement(j.a,{item:!0,xs:12},m&&o.a.createElement(V.a,null),o.a.createElement("br",null),!m&&0===s.length&&o.a.createElement(ye.a,{variant:"outlined",severity:"info"},"No hay usuarios que deseen verificar su identidad.")),s.map((function(e,t){return o.a.createElement(j.a,{item:!0,xs:12,key:t},o.a.createElement(wt,{usuario:e,actualizarUsuario:h}))})))))}function wt(e){var t=e.usuario,a=e.actualizarUsuario,n=W();return o.a.createElement(Le.a,{className:n.filaPublicacion,variant:"outlined",square:!0},o.a.createElement(j.a,{container:!0,direction:"row",alignItems:"center"},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(y.a,{className:n.button},o.a.createElement(g.a,{variant:"h5",component:"h5",align:"left"},"".concat(t.nombre," ").concat(t.apellido))),o.a.createElement(y.a,{disabled:!0},o.a.createElement(g.a,{variant:"h5",component:"h2",align:"left"},"DNI: ",t.dni))),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(_t,{usuario:t,actualizarUsuario:a}))))}function _t(e){var t=e.usuario,a=e.actualizarUsuario,i=W(),r=Object(n.useContext)(G),s=r.state,l=(r.dispatch,Object(n.useState)(!1)),u=Object(c.a)(l,2),d=u[0],m=u[1],p=Object(n.useState)([]),h=Object(c.a)(p,2),b=h[0],v=h[1],E=Object(n.useState)(!1),O=Object(c.a)(E,2),x=O[0],C=O[1],S=Object(n.useState)(""),k=Object(c.a)(S,2),N=k[0],w=k[1],_=Object(n.useState)(""),A=Object(c.a)(_,2),P=A[0],B=A[1];function D(e){C(!0);var n="Bearer "+s.jwt;f.a.post(s.servidor+"/api/notificaciones/",{tipo:1,emisor:s.datosSesion.id,receptor:t.id,solicitud:null,datos_notificacion:e?"":N,leido:!1},{headers:{Authorization:n}}).then((function(o){f.a.put(s.servidor+"/users/"+t.id,{espera_verificacion:!1,identidad_verificada:e},{headers:{Authorization:n}}).then((function(e){a(e.data.id),C(!1)})).catch((function(e){console.log("Error, no se ha podido actualizar al usuario.",e.response),console.log("Error, no se ha podido actualizar al usuario.")}))})).catch((function(e){console.log("Error, no se ha podido crear la notificacion.",e.response),console.log("Error, no se ha podido crear la notificacion.")}))}return Object(n.useEffect)((function(){if(t.imagenes_dni){var e=t.imagenes_dni.map((function(e){return{src:s.servidor+e.url,title:e.name,description:"Imagenes de D.N.I."}}));v(e)}}),[t]),o.a.createElement("div",null,o.a.createElement(Ke.a,{button:!0,onClick:function(){m(!d)}},o.a.createElement(Ge.a,{primary:"Desplegar informaci\xf3n"}),d?o.a.createElement(Xe.a,null):o.a.createElement(et.a,null)),o.a.createElement(Ye.a,{in:d,timeout:"auto",unmountOnExit:!0},o.a.createElement(We.a,{component:"div",disablePadding:!0},o.a.createElement(j.a,{container:!0,direction:"row",alignItems:"center",justify:"center"},o.a.createElement(j.a,{item:!0,xs:4,sm:12},o.a.createElement("div",{align:"center"},o.a.createElement(kt.a,{images:b,thumbnailWidth:"100px",thumbnailHeight:"100px"}))),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(U.a,{id:"outlined-basic",name:"descripcion",label:"Agregar mensaje",multiline:!0,variant:"outlined",size:"medium",fullWidth:!0,className:i.inputAncho,onChange:function(e){w(e.target.value)}})),o.a.createElement(T.a,{xlDown:""===P||""!==N},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{color:"error"},P))),x&&o.a.createElement(V.a,null),o.a.createElement("div",{align:"center"},o.a.createElement(y.a,{disabled:x,onClick:function(){D(!0)},color:"secondary",startIcon:o.a.createElement(Ct.a,null)},"Validar Identidad"),o.a.createElement(y.a,{disabled:x,onClick:function(){""===N?B("Debe escribir un mensaje para rechazar la solicitud."):D(!1)},color:"error",startIcon:o.a.createElement(le.a,null)},"Rechazar Solicitud"))))))}var At=a(184),Pt=a(434),Bt=a(435),Dt=a(421),Mt=a(422),qt=a(162),zt=a.n(qt),Ft=a(163),It=a.n(Ft),Rt=a(164),Ut=a.n(Rt),Lt=a(334),Tt=a(420),Vt=a(439),Ht=a(158),Wt=a.n(Ht),Jt=a(159),Kt=a.n(Jt),Gt=a(160),Yt=a.n(Gt),Qt=a(161),Zt=a.n(Qt);function $t(e){var t=e.estadoReporte,a=e.reportes,i=e.modificarReporte,r=e.cargando,s=W(),l=Object(n.useState)(""),u=Object(c.a)(l,2),d=u[0],m=u[1];return Object(n.useEffect)((function(){m(0===t?"Reportes pendientes de moderaci\xf3n":1===t?"Reportes en espera":"Historial de reportes")}),[]),o.a.createElement("div",Object(p.a)({className:s.fondo},"className","Fondo"),o.a.createElement(Le.a,{elevation:5},o.a.createElement(j.a,{className:s.filaPublicacion,container:!0,justify:"center"},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"h4",component:"h1",align:"center"},d)),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement("br",null),!r&&0===a.length&&o.a.createElement(ye.a,{variant:"outlined",severity:"info"},"No hay reportes para mostrar."),a.map((function(e,t){return o.a.createElement(Xt,{key:t,datos:e,modificarReporte:i})}))))))}function Xt(e){var t,a=e.datos,i=e.modificarReporte,r=W(),c=Object(n.useContext)(G),l=c.state;c.dispatch;switch(a.estado){case-1:"#5d9b9b";break;case 0:"gray";break;case 1:"yellow";break;case 2:"#FFDED3";break;case 3:"#D6FFD3"}return o.a.createElement(Le.a,(t={className:r.filaPublicacion},Object(p.a)(t,"className","Fondo"),Object(p.a)(t,"variant","outlined"),Object(p.a)(t,"square",!0),t),o.a.createElement(j.a,{container:!0,direction:"row",justify:"center",style:{padding:"15px"}},o.a.createElement(j.a,{item:!0,xs:12,lg:9,md:9,sm:12},o.a.createElement(y.a,{disabled:!0},o.a.createElement(g.a,{color:"secondary",variant:"h5",component:"h2",align:"left"},null===a.Solicitud_id?"Reporte al usuario ":a.Solicitud_id.titulo)),null!==a.Solicitud_id&&o.a.createElement(s.b,{to:l.ruta+"/publicacion/"+a.Solicitud_id.id,className:r.EstiloLink},o.a.createElement(me.a,{title:"Vista previa"},o.a.createElement(y.a,null,o.a.createElement(Wt.a,{color:"primary"})))),o.a.createElement(y.a,{disabled:!0},o.a.createElement(Kt.a,null)),o.a.createElement(s.b,{to:l.ruta+"/perfil-proveedor/"+a.Usuario_id.id,className:r.EstiloLink},o.a.createElement(y.a,{className:r.button},o.a.createElement(g.a,{variant:"h6",component:"h5",align:"left"},"".concat(a.Usuario_id.nombre," ").concat(a.Usuario_id.apellido))))),o.a.createElement(j.a,{item:!0,xs:12,lg:3,md:3,sm:12},o.a.createElement(g.a,{variant:"h6",component:"h5",align:"right"},a.created_at.split("T")[0])),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"h6",component:"h5",align:"left"},"Motivos del reporte:")),o.a.createElement(j.a,{container:!0,direction:"row",justify:"center"},a.motivos.map((function(e,t){return o.a.createElement(j.a,{key:t,item:!0,xs:6,sm:3,md:3,lg:3},o.a.createElement(g.a,{variant:"h6",component:"h3",align:"center"},e.nombre))}))),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(ea,{datos:a,modificarReporte:i}))))}function ea(e){var t=e.datos,a=e.modificarReporte,i=(W(),Object(n.useContext)(G)),r=i.state,s=(i.dispatch,Object(n.useState)(!1)),l=Object(c.a)(s,2),u=l[0],d=l[1],m=Object(n.useState)(!1),p=Object(c.a)(m,2),h=p[0],b=p[1],v=Object(n.useState)(!1),E=Object(c.a)(v,2),y=E[0],O=E[1];function x(e,n){var o="Bearer "+r.jwt;f.a.put(r.servidor+"/api/reportes/"+t.id,{accion:h,estado:n,notificacion:e,Administrador_id:r.datosSesion.id},{headers:{Authorization:o}}).then((function(e){O(!1),a(e.data)})).catch((function(e){console.log("Error, no se ha podido crear el reporte.",e.response),console.log("Error, no se ha podido crear el reporte."),O(!1)}))}function C(e,t){var a="Bearer "+r.jwt,n=null===e.Solicitud_id?"users/":"api/solicitud/",o=null===e.Solicitud_id?e.Usuario_id.id:e.Solicitud_id.id;f.a.put(r.servidor+"/"+n+o,{bloqueado:t},{headers:{Authorization:a}}).then((function(e){O(!1)})).catch((function(e){console.log("Error, no se ha podido bloquear.",e.response),console.log("Error, no se ha podido bloquear ."),O(!1)}))}return o.a.createElement("div",null,o.a.createElement(Ke.a,{button:!0,onClick:function(){d(!u)}},o.a.createElement(Ge.a,{primary:"Desplegar informaci\xf3n"}),u?o.a.createElement(Xe.a,null):o.a.createElement(et.a,null)),o.a.createElement(Ye.a,{in:u,timeout:"auto",unmountOnExit:!0},o.a.createElement(We.a,{component:"div",disablePadding:!0},o.a.createElement("hr",null),o.a.createElement(j.a,{item:!0,xs:12},t.descripcion.split("##").map((function(e,t){return o.a.createElement(g.a,{key:t,align:"justify"},e)}))),o.a.createElement("hr",null),t.estado<=0&&o.a.createElement(Be.a,{component:"fieldset",align:"left"},o.a.createElement(Lt.a,{required:!0,component:"legend"},"Acci\xf3n"),o.a.createElement(Tt.a,{disabled:t.estado>0,row:!0,"aria-label":"Accion",value:h,onChange:function(e){b(!h)}},o.a.createElement(ie.a,{value:"true",checked:h,control:o.a.createElement(Vt.a,null),label:-1===t.estado?null!==t.Solicitud_id?"Continuar con la publicaci\xf3n bloqueada":"Continuar con el perfil bloqueado":null!==t.Solicitud_id?"Bloquear publicaci\xf3n":"Bloquear perfil"}),o.a.createElement(ie.a,{value:"false",checked:!h,control:o.a.createElement(Vt.a,null),label:-1===t.estado?null!==t.Solicitud_id?"Desbloquear publicaci\xf3n":"Desbloquear perfil":"No hacer nada"}))),t.estado>0&&o.a.createElement(g.a,{variant:"h6",component:"h5",align:"left"},t.accion?null!==t.Solicitud_id?"La publicaci\xf3n fue bloqueada":"El perfil fue bloqueado":null!==t.Solicitud_id?"No se bloque\xf3 la publicaci\xf3n":"No se bloque\xf3 el perfil"),y&&o.a.createElement(V.a,null),o.a.createElement("div",{hidden:t.estado>0},-1===t.estado&&o.a.createElement(aa,{datos:t.notificacion}),o.a.createElement(ta,{enviarDatos:function(e,a){O(!0);var n="Bearer "+r.jwt,o=2,i="Su "+(null!==t.Solicitud_id?"publicaci\xf3n":"perfil")+" tiene una sugerencia de modificaci\xf3n. \nMensaje de la administraci\xf3n: "+e;a&&(h?(o=1,i=null!==t.Solicitud_id?"Su publicaci\xf3n ha sido pausada por un administrador, deber\xe1 modificarla para que vuelva a estar disponible al p\xfablico. \nMensaje de la administraci\xf3n: "+e:"Su perfil ha sido bloqueado por un adminitrador, deber\xe1 modificarlo para que vuelva a estar disponible al p\xfablico. \nMensaje de la administraci\xf3n: "+e,-1!==t.estado&&C(t,!0)):(o=3,-1===t.estado&&(C(t,!1),a=!0,i=null!==t.Solicitud_id?"\xa1Su publicaci\xf3n se encuentra nuevamente disponible!":"\xa1Su perfil se encuentra nuevamente disponible!"))),!0===a?f.a.post(r.servidor+"/api/notificaciones/",{tipo:0,emisor:r.datosSesion.id,receptor:t.Usuario_id.id,solicitud:null!==t.Solicitud_id?t.Solicitud_id.id:null,datos_notificacion:i,leido:!1},{headers:{Authorization:n}}).then((function(e){x(e.data.id,o)})).catch((function(e){console.log("Error, no se ha podido crear la notificacion.",e.response),O(!1)})):x(null,o)},datos:t,cargando:y,esRespuesta:-1===t.estado})),o.a.createElement("div",{hidden:t.estado<=0},o.a.createElement(aa,{datos:t.notificacion})))))}var ta=function(e){var t=e.enviarDatos,a=e.datos,i=e.cargando,r=e.esRespuesta,s=Object(n.useState)(""),l=Object(c.a)(s,2),u=l[0],d=l[1];return o.a.createElement("div",null,o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(U.a,{onChange:function(e){d(e.target.value)},value:u,id:"outlined-basic",label:"Agregar mensaje",multiline:!0,variant:"outlined",size:"medium",fullWidth:!0})),o.a.createElement("div",{align:"center"},o.a.createElement(y.a,{disabled:i,startIcon:o.a.createElement(Yt.a,null),onClick:function(){t(u,!0)}},r?"Confirmar acci\xf3n":"Aceptar reporte"),-1!==a.estado&&o.a.createElement(y.a,{disabled:i,color:"secondary",startIcon:o.a.createElement(Zt.a,null),onClick:function(){t(u,!1)}},"Descartar reporte")))},aa=function(e){return e.datos.map((function(e,t){return o.a.createElement("div",{key:t},o.a.createElement("hr",null),o.a.createElement(j.a,{container:!0,justify:"center"},o.a.createElement(j.a,{item:!0,xs:9},o.a.createElement(g.a,{color:"secondary",variant:"h5",component:"h4",align:"left"},"Mensaje del administrador")),o.a.createElement(j.a,{item:!0,xs:3},o.a.createElement(g.a,{variant:"h6",component:"h5",align:"right"},e.created_at.split("T")[0])),o.a.createElement(j.a,{item:!0,xs:12},e.datos_notificacion)))}))};function na(e){var t=e.children,a=e.value,n=e.index,i=Object(At.a)(e,["children","value","index"]);return o.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"scrollable-force-tabpanel-".concat(n),"aria-labelledby":"scrollable-force-tab-".concat(n)},i),a===n&&o.a.createElement(Pt.a,{p:3},t))}function oa(e){return{id:"scrollable-force-tab-".concat(e),"aria-controls":"scrollable-force-tabpanel-".concat(e)}}var ia=Object(H.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,display:"flex",alignItems:"center",flexWrap:"wrap",padding:10,minHeight:"calc(100vh - 130px)"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function ra(){var e=ia(),t=Object(n.useContext)(G),a=t.state,i=(t.dispatch,Object(n.useState)(!1)),r=Object(c.a)(i,2),s=r[0],l=r[1],u=Object(n.useState)(0),d=Object(c.a)(u,2),m=d[0],h=d[1],v=Object(n.useState)([]),g=Object(c.a)(v,2),E=g[0],j=g[1];return Object(n.useEffect)((function(){if(""!==a.jwt||!0===a.publico){l(!0);var e="Bearer "+a.jwt;f.a.get(a.servidor+"/api/reportes",{headers:{Authorization:e}}).then((function(e){j(e.data),l(!1)})).catch((function(e){console.log("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)}))}}),[a.jwt,a.publico]),o.a.createElement("div",Object(p.a)({className:e.root,style:{padding:"20px"}},"className","fondo"),o.a.createElement(He.a,null,o.a.createElement(b.a,{position:"static",color:"default"},o.a.createElement(Bt.a,{value:m,onChange:function(e,t){h(t)},variant:"fullWidth",scrollButtons:"auto",indicatorColor:"primary",textColor:"primary","aria-label":"scrollable force tabs example"},o.a.createElement(Dt.a,Object.assign({label:"Gestionar nuevos reportes",icon:o.a.createElement(zt.a,null)},oa(0))),o.a.createElement(Dt.a,Object.assign({label:"Reportes en espera",icon:o.a.createElement(It.a,null)},oa(1))),o.a.createElement(Dt.a,Object.assign({label:"Historial de reportes",icon:o.a.createElement(Ut.a,null)},oa(2))))),o.a.createElement(I.a,{className:e.backdrop,open:s},o.a.createElement(Mt.a,null)),o.a.createElement(na,{value:m,index:0},o.a.createElement($t,{estadoReporte:0,cargando:s,modificarReporte:function(e){j(E.map((function(t){return e.id===t.id?e:t})))},reportes:E.filter((function(e){return e.estado<=0}))})),o.a.createElement(na,{value:m,index:1},o.a.createElement($t,{estadoReporte:1,cargando:s,modificarReporte:function(){},reportes:E.filter((function(e){return 1===e.estado}))})),o.a.createElement(na,{value:m,index:2},o.a.createElement($t,{estadoReporte:2,cargando:s,modificarReporte:function(){},reportes:E.filter((function(e){return e.estado>=2}))}))))}function ca(e){var t=e.registrar,a=W(),i=Object(n.useState)(""),r=Object(c.a)(i,2),s=r[0],u=r[1],d=Object(n.useState)(""),m=Object(c.a)(d,2),h=m[0],b=m[1],v=Object(l.g)(),E=Object(n.useState)(""),O=Object(c.a)(E,2),x=O[0],C=O[1],S=Object(n.useState)(!1),k=Object(c.a)(S,2),N=k[0],w=k[1],_=Object(n.useContext)(G),A=_.state,P=_.dispatch,B=Object(n.useState)([]),D=Object(c.a)(B,2),M=D[0],z=D[1],F=Object(n.useState)([]),I=Object(c.a)(F,2),R=I[0],H=I[1],J=Object(n.useState)([]),K=Object(c.a)(J,2),Y=K[0],Z=K[1],$=Object(n.useState)([]),X=Object(c.a)($,2),ee=X[0],te=X[1],ne=Object(n.useState)(!1),oe=Object(c.a)(ne,2),ie=oe[0],re=oe[1],ce=Object(n.useState)({nombre:"",apellido:"",email:"",usuario:"",telefono:"",contrasena:"",contrasena_rep:"",dni:"",descripcion:"",imagen_perfil:null}),se=Object(c.a)(ce,2),le=se[0],ue=se[1],de=Object(n.useState)(!1),me=Object(c.a)(de,2),pe=me[0],he=me[1];Object(n.useEffect)((function(){""===A.jwt&&!0!==A.publico||t||(ue({nombre:A.datosSesion.nombre,apellido:A.datosSesion.apellido,email:A.datosSesion.email,usuario:A.datosSesion.username,telefono:A.datosSesion.telefono,contrasena:"",contrasena_rep:"",dni:A.datosSesion.dni,descripcion:A.datosSesion.descripcion,tipo:A.datosSesion.tipo,imagen_perfil:A.datosSesion.imagen_perfil}),null!==A.datosSesion.imagen_perfil&&z([A.datosSesion.imagen_perfil.id]))}),[A.jwt,A.publico]);var fe=function(e){""!==s&&u("");var t=e.target.value,a=e.target.name;ue(Object(q.a)(Object(q.a)({},le),{},Object(p.a)({},a,t)))};function be(e){var t=[],a="Bearer "+e.jwt;R.map((function(e){ee.some((function(t){return t===e}))||t.push(e)}));var n=[];Y.map((function(e){ee.some((function(t){return t===e}))&&n.push(e)}));for(var o=0;o<Y.length;o++){var i=Number(Y[o].name);f.a.delete(A.servidor+"/upload/files/"+i,{headers:{Authorization:a}}).then((function(e){})).catch((function(e){console.log("Error al borrar las imagenes"),console.log(e.response)}))}for(var r=new FormData,c=0;c<t.length;c++)r.append("files",t[c]);0!==t.length&&(r.append("ref","user"),r.append("refId",e.usuario.id),r.append("field","imagen_perfil"),r.append("source","users-permissions"),f.a.post(A.servidor+"/upload",r,{headers:{"Content-Type":"multipart/form-data",Authorization:a}}).then((function(t){var a=e.usuario;a.imagen_perfil=t.data[0],P({type:"setDatos",value:a}),P({type:"setJwt",value:e.jwt}),localStorage.setItem("datosLocal",JSON.stringify({jwt:e.jwt,datosSesion:a}))})).catch((function(e){console.log("Error: ",e.response)})))}return Object(n.useEffect)((function(){C(t?"Registrar usuario":"Modificar mi perfil")}),[]),o.a.createElement("div",{className:a.fondo},o.a.createElement(Le.a,{elevation:3},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),-1===le.email.search("[.][a-z][a-z]")||-1!==le.email.search("[.].*[0-9].*")?u("El email se encuentra escrito incorrectamente"):t?le.contrasena!==le.contrasena_rep?u("Las contrase\xf1as no coinciden"):le.contrasena.length<8?u("La contrase\xf1a debe tener al menos 8 caracteres"):(w(!0),f.a.post(A.servidor+"/auth/local/register",{username:le.usuario,email:le.email,password:le.contrasena,nombre:le.nombre,apellido:le.apellido,telefono:le.telefono,dni:le.dni,descripcion:le.descripcion,tipo:pe?2:1,confirmed:!1,estado:!1,mostrar_telefono:!1,identidad_verificada:!1,espera_verificacion:!1,bloqueado:!1}).then((function(e){P({type:"setDatos",value:e.data.user}),P({type:"setJwt",value:e.data.jwt}),localStorage.setItem("datosLocal",JSON.stringify({jwt:e.data.jwt,datosSesion:e.data.user})),be({usuario:e.data.user,jwt:e.data.jwt}),w(!1),b("Usuario creado. \xa1Bienvenido a Servia!"),re(!0),setTimeout((function(){v.push(A.ruta+"/")}),2e3)})).catch((function(e){var t=JSON.parse(e.response.request.response).message[0].messages[0].id;u("Auth.form.error.email.taken"===t?"El email ya est\xe1 en uso.":"Auth.form.error.username.taken"===t?"El usuario ya est\xe1 en uso.":t),w(!1)}))):-1===le.email.search("[.][a-z][a-z]")||-1!==le.email.search("[.].*[0-9].*")?u("El email se encuentra escrito incorrectamente"):function(){var e="Bearer "+A.jwt;w(!0),f.a.put(A.servidor+"/users/"+A.datosSesion.id,{username:le.usuario,email:le.email,nombre:le.nombre,apellido:le.apellido,telefono:le.telefono,dni:le.dni,descripcion:le.descripcion,tipo:2===le.tipo||pe?2:1},{headers:{Authorization:e}}).then((function(e){P({type:"setDatos",value:e.data}),P({type:"setJwt",value:A.jwt}),be({usuario:e.data,jwt:A.jwt}),localStorage.setItem("datosLocal",JSON.stringify({jwt:A.jwt,datosSesion:e.data})),w(!1),b("\xa1Cambios guardados!"),re(!0),setTimeout((function(){v.push(A.ruta+"/")}),3e3)})).catch((function(e){var t=JSON.parse(e.response.request.response).message[0].messages[0].id;console.log("error: ",e.response),u("Auth.form.error.email.taken"===t?"El email ya est\xe1 en uso.":"Auth.form.error.username.taken"===t?"El usuario ya est\xe1 en uso.":t),w(!1)}))}()}},o.a.createElement(j.a,{className:a.gridRegistro,spacing:1,container:!0,justify:"space-between",alignItems:"center"},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"h5",component:"h1",align:"center",className:a.inputAncho},x)),o.a.createElement(j.a,{item:!0,xs:6},o.a.createElement(U.a,{className:a.inputAncho,type:"text",name:"nombre",value:le.nombre,onChange:fe,label:"Nombre",variant:"filled",required:!0})),o.a.createElement(j.a,{item:!0,xs:6},o.a.createElement(U.a,{className:a.inputAncho,type:"text",name:"apellido",value:le.apellido,onChange:fe,label:"Apellido",variant:"filled",required:!0})),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(Et,{cantidad:1,setcargando:w,funcionSetImagen:function(e,t,a,n){if(te(n),0===a)H([].concat(Object(ae.a)(R),[e]));else{Z((function(t){return[].concat(Object(ae.a)(Y),[e])}));var o=R.filter((function(t){return t!==e}));H(o)}},ids:M})),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(U.a,{className:a.inputAncho,name:"email",value:le.email,onChange:fe,label:"Correo electr\xf3nico",variant:"filled",type:"email",required:!0})),o.a.createElement(j.a,{item:!0,xs:6},o.a.createElement(U.a,{className:a.inputAncho,name:"usuario",value:le.usuario,onChange:fe,label:"Usuario",variant:"filled",required:!0})),o.a.createElement(j.a,{item:!0,xs:6},o.a.createElement(U.a,{className:a.inputAncho,type:"number",name:"telefono",value:le.telefono,onChange:fe,label:"Telefono",variant:"filled"})),o.a.createElement(L.a,null),o.a.createElement(T.a,{xlDown:!t},o.a.createElement(j.a,{item:!0,xs:6},o.a.createElement(U.a,{required:t,name:"contrasena",value:le.contrasena,onChange:fe,type:"password",label:"Contrase\xf1a",variant:"filled",className:a.inputAncho})),o.a.createElement(j.a,{item:!0,xs:6},o.a.createElement(U.a,{required:t,name:"contrasena_rep",value:le.contrasena_rep,onChange:fe,type:"password",label:"Repetir contrase\xf1a",variant:"filled",className:a.inputAncho}))),o.a.createElement(T.a,{xlDown:""===s},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{color:"error"},s))),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(T.a,{xlDown:A.datosSesion.tipo>1},o.a.createElement(sa,{soyProveedor:pe,setSoyProveedor:he}))),o.a.createElement("div",{className:a.inputAncho,hidden:!N},o.a.createElement(V.a,null)),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(y.a,{type:"submit",className:a.inputAncho,size:"large",variant:"contained",color:"primary",disabled:N},t?"Registrar Usuario":"Guardar cambios")),o.a.createElement(j.a,{item:!0,xs:12,hidden:!t},o.a.createElement(Q,{mensaje:"\xbfYa tienes una cuenta?"})))),o.a.createElement(Ie,{mensaje:h,abrir:ie,setabrir:re})))}function sa(e){var t=e.setSoyProveedor,a=e.soyProveedor;return o.a.createElement(ie.a,{control:o.a.createElement(re.a,{checked:a,onChange:function(e){t(!a)},name:"checkedB",color:"primary"}),label:"Soy proveedor de servicios"})}function la(e){var t=e.tipoPublicacion,a=W(),i=Object(n.useContext)(G).state,r=Object(n.useState)(""),s=Object(c.a)(r,2),l=s[0],u=s[1],d=Object(n.useState)(!1),m=Object(c.a)(d,2),p=m[0],h=m[1],b=Object(n.useState)([]),v=Object(c.a)(b,2),E=v[0],j=v[1],y=Object(n.useState)(null),O=Object(c.a)(y,2),x=O[0],C=O[1];function S(){f.a.get(i.servidor+"/api/solicitud?Usuario_id="+i.datosSesion.id+"&tipo="+t).then((function(e){j(e.data),h(!1)})).catch((function(e){console.log("Un error ha ocurrido al cargar las solicitudes."),console.log(e.response)})),t&&f.a.get(i.servidor+"/api/resenas?proveedor="+i.datosSesion.id).then((function(e){var t={};e.data.map((function(e){e.servicios.map((function(a){t.hasOwnProperty(a.nombre)||(t[a.nombre]={resenas:[]}),t[a.nombre].resenas.push(e)}))})),C(t)})).catch((function(e){console.log("Un error ha ocurrido al buscar los servicios."),console.log(e.response)}))}return Object(n.useEffect)((function(){h(!0),u(t?"Mis publicaciones":"Mis servicios solicitados"),""!==i.jwt&&(C(null),S())}),[i.jwt,t]),o.a.createElement("div",{className:a.fondo,style:{margin:"auto"}},o.a.createElement(He.a,null,o.a.createElement(Le.a,{elevation:3,style:{maxWidth:950,padding:15},className:"Fondo"},o.a.createElement(g.a,{variant:"h5",component:"h2",align:"center"},l),o.a.createElement("br",null),p&&o.a.createElement(V.a,null),!p&&0===E.length&&o.a.createElement(ye.a,{variant:"outlined",severity:"info"},"No tienes ",t?"publicaciones ":"solicitudes ","de servicios"),E.map((function(e,a){return o.a.createElement(Ue,{resenas:null===x?null:x[e.Servicio_id.nombre],buscarSolicitudes:S,key:a,datos:e,tipoPublicacion:t,contactar:!0})})))))}var ua=a(448),da=a(423),ma=a(424),pa=a(165),ha=a.n(pa);function fa(){var e=W(),t=o.a.useState([{pregunta:"\xbfQu\xe9 es Servia?",respuesta:"Servia es una aplicaci\xf3n en la cual vas a poder encontrar servicios domesticos, publicar tus servicios o solicitar un servicio determinado."},{pregunta:"\xbfC\xf3mo busco un servicio?",respuesta:'Para buscar un servicio, debes hacer click en la opcion "Explorar servicios", luego se mostrar\xe1 una pagina donde podr\xe1s seleccionar la categor\xeda referente al servicio que buscas, al hacer esto se abrir\xe1 una p\xe1gina donde podr\xe1s ver y buscar servicios.'},{pregunta:"\xbfC\xf3mo me vuelvo proveedor de servicios?",respuesta:'Para ser proveedor, debes seleccionar la opci\xf3n "Quiero ser proveedor de servicios" al momento de registrarte o yendo a "Editar mi perfil".'},{pregunta:"Si soy un proveedor de servicios, \xbfC\xf3mo verifico mi identidad en Servia?",respuesta:'Para verificar tu identidad, debes ir a la opcion "Verificar mi identidad", all\xed podr\xe1s cargar tu n\xfamero de DNI y las fotos del mismo. Luego un administrador validar\xe1 tus datos y te notificar\xe1 los resultados.'},{pregunta:"\xbfDe qu\xe9 me sirve verificar mi identidad?",respuesta:"Verificar tu identidad te sirve para mostrar un distintivo al lado de tu nombre que indica que tu perfil se encuentra verificado y que pertenece a una persona real."},{pregunta:"\xbfC\xf3mo me publicito en Servia?",respuesta:"Servia ofrece a los proveedores la posibilidad de crear publicaciones en donde pueden mostrar una descripci\xf3n de sus servicio e im\xe1genes que la acompa\xf1en."},{pregunta:"\xbfC\xf3mo solicito un servicio?",respuesta:'Para solicitar un servicio, debes ir a la opci\xf3n "Solicitar servicio", all\xed podr\xe1s especificar todos los requerimientos, de modo de que alg\xfan proveedor se pueda contactar contigo para ayudarte.'},{pregunta:"\xbfC\xf3mo administro las publicaciones/solicitudes que he hecho?",respuesta:'Para administrar tus publicaciones/solicitudes, debes ir a la opcion "Mis servicios solicitados" o "Mis publicaciones", all\xed podr\xe1s modificar o eliminar las publicaciones/solicitudes que hiciste.'},{pregunta:"\xbfC\xf3mo contacto a un proveedor de servicios?",respuesta:'Para contactar a un proveedor de servicios, debes ir a la publicacion del servicio que deseas y hacer click en la opci\xf3n "Contactar". Al hacer click en el boton "Enviar", se generar\xe1 un Chat en el cual el proveedor podr\xe1 responderte.'},{pregunta:"\xbfC\xf3mo me mantengo en contacto con un proveedor de servicios?",respuesta:"Para mantenerte en contacto con uno o varios proveedores existe un chat, el cual tendr\xe1 los chats con los proveedores que hiciste contacto. Par accederlo debes hacer click en el \xedcono de mensaje, al lado de la campana de notificaciones."}]),a=Object(c.a)(t,2),n=a[0];a[1];return o.a.createElement("div",{className:e.fondo},o.a.createElement(Le.a,{elevation:3,style:{margin:"auto",width:850,padding:"20px"},className:"Fondo"},o.a.createElement(g.a,{component:"h3",variant:"h4",align:"center"},"Preguntas frecuentes"),o.a.createElement("br",null),o.a.createElement(o.a.Fragment,null,n.map((function(e,t){return o.a.createElement(ua.a,{key:t},o.a.createElement(da.a,{expandIcon:o.a.createElement(ha.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o.a.createElement(g.a,{component:"h6",variant:"h6"},e.pregunta)),o.a.createElement(ma.a,null,o.a.createElement(g.a,null,e.respuesta)))})))))}function ba(){var e=W();return o.a.createElement("div",{className:e.fondo},o.a.createElement(Le.a,{elevation:3,style:{width:650,minHeight:300,padding:15}},o.a.createElement(g.a,{component:"h3",variant:"h4",align:"center"},"\xbfQuienes somos?"),o.a.createElement(g.a,{variant:"body1",align:"left"},"Somos...")))}function va(){var e=W(),t=Object(n.useContext)(G),a=t.state,i=t.dispatch,r=Object(l.g)(),s=Object(n.useState)(!1),u=Object(c.a)(s,2),d=u[0],m=u[1],p=Object(n.useState)(!1),h=Object(c.a)(p,2),b=h[0],v=h[1],E=Object(n.useState)(""),O=Object(c.a)(E,2),x=O[0],C=O[1],S=Object(n.useState)([]),k=Object(c.a)(S,2),N=k[0],w=k[1],_=Object(n.useState)([]),A=Object(c.a)(_,2),P=A[0],B=A[1],D=Object(n.useState)([]),M=Object(c.a)(D,2),q=M[0],z=M[1],F=Object(n.useState)([]),I=Object(c.a)(F,2),R=I[0],L=I[1];Object(n.useEffect)((function(){if(""!==a.jwt){C(a.datosSesion.dni);var e=a.datosSesion.imagenes_dni.map((function(e){return e.id}));w(e)}}),[a.jwt]);function T(){var e="Bearer "+a.jwt;f.a.put(a.servidor+"/users/"+a.datosSesion.id,{dni:x,espera_verificacion:!0},{headers:{Authorization:e}}).then((function(e){i({type:"setDatos",value:e.data}),localStorage.setItem("datosLocal",JSON.stringify({jwt:a.jwt,datosSesion:e.data})),m(!1),v(!0),setTimeout((function(){r.push(a.ruta+"/")}),3e3)})).catch((function(e){console.log("Error, no se han podido enviar los datos.",e.response)}))}return o.a.createElement("div",{className:e.fondo},o.a.createElement(Le.a,{elevation:3},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),m(!0),C(String(x));var t=[];P.map((function(e){q.some((function(t){return t===e}))||t.push(e)}));var n=[];R.map((function(e){q.some((function(t){return t===e}))&&n.push(e)}));for(var o=0;o<R.length;o++){var i=Number(R[o].name),r="Bearer "+a.jwt;f.a.delete(a.servidor+"/upload/files/"+i,{headers:{Authorization:r}}).then((function(e){})).catch((function(e){console.log("Error al borrar las imagenes"),console.log(e.response)}))}for(var c=new FormData,s=0;s<t.length;s++)c.append("files",t[s]);if(0!==t.length){c.append("ref","user"),c.append("refId",a.datosSesion.id),c.append("field","imagenes_dni"),c.append("source","users-permissions");var l="Bearer "+a.jwt;f.a.post(a.servidor+"/upload",c,{headers:{"Content-Type":"multipart/form-data",Authorization:l}}).then((function(e){T()})).catch((function(e){console.log("Error al cargar las im\xe1genes."),console.log("Error: ",e.response)}))}else T()}},o.a.createElement(j.a,{className:e.gridRegistro,spacing:1,container:!0,justify:"space-between",alignItems:"center"},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"h5",component:"h1",align:"center",className:e.inputAncho},"Verificar mi identidad")),o.a.createElement(j.a,{item:!0,xs:12,align:"center"},o.a.createElement(U.a,{className:e.inputAncho,type:"number",name:"dni",value:x,style:{width:"50%"},onChange:function(e){C(e.target.value)},id:"filled-basic",label:"N\xfamero de documento",variant:"filled",required:!0})),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"subtitle1",component:"h1",align:"justify",className:e.inputAncho},"Para que puedas verificar tu identidad, necesitamos que subas una foto del frente y otra del dorso de tu DNI. Procura que ambas im\xe1genes se vean legibles y correspondan con los datos que proporcionaste en tu perfil.")),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(Et,{cantidad:2,funcionSetImagen:function(e,t,a,n){if(z(n),0===a)B([].concat(Object(ae.a)(P),[e]));else{L((function(t){return[].concat(Object(ae.a)(R),[e])}));var o=P.filter((function(t){return t!==e}));B(o)}z(n)},setcargando:m,ids:N})),o.a.createElement(j.a,{item:!0,xs:12,className:e.inputAncho},d&&o.a.createElement(V.a,null)),(a.datosSesion.identidad_verificada||a.datosSesion.espera_verificacion)&&o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"subtitle1",component:"h1",align:"justify",color:"error",className:e.inputAncho},a.datosSesion.espera_verificacion?"Ya tienes una solicitud de verificaci\xf3n pendiente.":"\xa1Tu perfil ya est\xe1 verificado!")),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(y.a,{type:"submit",className:e.inputAncho,size:"large",variant:"contained",color:"primary",disabled:d||a.datosSesion.identidad_verificada||a.datosSesion.espera_verificacion},"Enviar solicitud")))),o.a.createElement(Ie,{mensaje:"\xa1Solicitud enviada con \xe9xito! Pronto nos pondremos en contacto contigo.",abrir:b,setabrir:v})))}var ga=a(425),Ea=a(426),ja=a(427),ya=a(428),Oa=a(429),xa=a(108);function Ca(e){var t=e.eliminarNotificacion,a=e.datos,i=W(),r=Object(n.useContext)(G),s=r.state,l=(r.dispatch,o.a.useState(!1)),u=Object(c.a)(l,2),d=u[0],m=u[1],p=o.a.useState(!1),h=Object(c.a)(p,2),b=h[0],v=h[1],O=Object(n.useState)(0),x=Object(c.a)(O,2),C=x[0],S=x[1],k=Object(n.useState)(""),N=Object(c.a)(k,2),w=N[0],_=N[1],A=Object(n.useState)(""),P=Object(c.a)(A,2),B=P[0],D=P[1],M=Object(n.useState)([]),q=Object(c.a)(M,2),z=q[0],H=q[1],J=Object(n.useState)([]),K=Object(c.a)(J,2),Y=K[0],Q=K[1],Z=Object(n.useState)(!1),$=Object(c.a)(Z,2),X=$[0],ee=$[1],te=Object(n.useState)(!1),ne=Object(c.a)(te,2),oe=ne[0],ie=ne[1];return Object(n.useEffect)((function(){S(0);var e=null!==a.solicitud?a.solicitud.Categoria_id:Number(a.datos_notificacion.split("_")[0]),t="Bearer "+s.jwt,n=null!==a.solicitud?[a.solicitud.Servicio_id]:[];Q(n),f.a.get(s.servidor+"/api/servicios?categoria="+e,{headers:{Authorization:t}}).then((function(e){var t=e.data.map((function(e){return e.seleccionado=!1,e}));H(t)})).catch((function(e){console.log("Un error ha ocurrido al buscar los servicios."),console.log(e.response)}))}),[a]),o.a.createElement("div",null,o.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){m(!0)}},"Realizar rese\xf1a"),o.a.createElement(Ie,{mensaje:"\xa1Rese\xf1a enviada!",setabrir:v,abrir:b}),o.a.createElement(F.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:i.mostrarFlex,open:d,onClose:function(){m(!1)},closeAfterTransition:!0,BackdropComponent:I.a,BackdropProps:{timeout:500}},o.a.createElement(R.a,{in:d},o.a.createElement("div",null,o.a.createElement(j.a,{className:i.papelFondo,style:{maxWidth:"500px"},container:!0,direction:"row",justify:"space-between",alignItems:"center"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n="Bearer "+s.jwt;0!==Y.length?(ee(!0),f.a.post(s.servidor+"/api/resenas/",{titulo:w,descripcion:B,recomendacion:Number(C),votos_positivos:0,votos_negativos:0,proveedor:a.emisor.id,servicios:0!==Y.length?Y:null},{headers:{Authorization:n}}).then((function(e){t(a.id),ee(!1),v(!0),m(!1)})).catch((function(e){console.log("Error, no se ha podido crear la rese\xf1a.",e.response),console.log("Error, no se ha podido crear la rese\xf1a.")}))):ie(!0)}},o.a.createElement(Be.a,null,o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement("div",{align:"center"},o.a.createElement(E.a,{alt:"Nombre proveedor",src:0!==a.emisor.imagenes_proveedor.length?s.servidor+a.emisor.imagenes_proveedor[0].url:"",className:i.imagenPublicacion}))),o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"h5",component:"h2",align:"center",className:i.form},"".concat(a.emisor.nombre," ").concat(a.emisor.apellido))),o.a.createElement(g.a,{variant:"h5",component:"h3",align:"center",className:i.form},null!==a.solicitud?"Publicaci\xf3n: ":"Categor\xeda: ",null!==a.solicitud?a.solicitud.titulo:a.datos_notificacion.split("_")[1]),o.a.createElement(U.a,{onChange:function(e){_(e.target.value)},className:i.inputAncho,id:"filled-basic",label:"T\xedtulo de la rese\xf1a",variant:"filled",required:!0}),o.a.createElement(L.a,null),o.a.createElement("br",null),o.a.createElement(U.a,{onChange:function(e){D(e.target.value)},className:i.inputAncho,id:"filled-basic",label:"Descripci\xf3n (opcional)",variant:"filled",multiline:!0}),o.a.createElement("br",null),0!==z.length&&o.a.createElement(j.a,{container:!0,spacing:2,justify:"space-around"},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"subtitle1",component:"h4",align:"center",className:i.form},null!==a.solicitud?"Si el proveedor te ha ofrecido otros servicios, puedes seleccionarlos aqu\xed: ":"Selecciona los servicios llevados a cabo: ")),z.map((function(e,t){return null!==a.solicitud?a.solicitud.Servicio_id!==e.id:o.a.createElement(j.a,{item:!0,xs:6,sm:4,md:3,lg:2,key:t},o.a.createElement(jt,{servicio:e,agregarSeleccionado:function(t){!function(e){oe&&ie(!1);var t=Y.some((function(t){return t===e.id}));Q(t?Y.filter((function(t){return t!==e.id})):[].concat(Object(ae.a)(Y),[e.id]))}(e),e.seleccionado=t}}))}))),o.a.createElement(g.a,{variant:"h5",component:"h4",align:"center",className:i.form},"\xa1Valora el servicio brindado!"),o.a.createElement(Pe,{valor:C,cambiarValor:function(e){S(Number(e.target.value))},clickeable:!0}),o.a.createElement(T.a,{xlDown:!oe||X},o.a.createElement(g.a,{color:"error"},"Debes seleccionar al menos un servicio.")),X&&o.a.createElement(V.a,null),o.a.createElement(y.a,{type:"submit",disabled:0===Number(C)||X,variant:"contained",color:"primary"},"Enviar rese\xf1a"))))))))}function Sa(){var e=W(),t=Object(n.useContext)(G),a=t.state,i=(t.dispatch,Object(n.useState)([])),r=Object(c.a)(i,2),s=r[0],l=r[1],u=Object(n.useState)(!1),d=Object(c.a)(u,2),m=d[0],p=d[1],h=Object(n.useState)(!1),b=Object(c.a)(h,2),v=b[0],E=b[1],y=Object(n.useState)([o.a.createElement(ga.a,{style:{fontSize:"75px"}}),o.a.createElement(Ea.a,{style:{fontSize:"75px"}}),o.a.createElement(ja.a,{style:{fontSize:"75px"}})]),x=Object(c.a)(y,2),C=x[0];x[1];function S(e){l(s.filter((function(t){return t.id!==e})));var t="Bearer "+a.jwt;f.a.delete(a.servidor+"/api/notificaciones/"+e,{headers:{Authorization:t}}).then((function(e){})).catch((function(e){console.log("Un error ha ocurrido al eliminar la notificaci\xf3n."),console.log(e.response)}))}return Object(pt.b)("spanish",(function(e,t,a){return[["justo ahora","justo ahora"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 d\xeda","en 1 d\xeda"],["hace %s d\xedas","en %s d\xedas"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 a\xf1o","en 1 a\xf1o"],["hace %s a\xf1os","en %s a\xf1os"]][t]})),Object(n.useEffect)((function(){p(!0);var e="Bearer "+a.jwt;""===a.jwt&&!0!==a.publico||f.a.get(a.servidor+"/api/notificaciones?receptor="+a.datosSesion.id,{headers:{Authorization:e}}).then((function(e){l(e.data.reverse()),e.data.map((function(e){!0!==e.leido&&function(e){var t="Bearer "+a.jwt;f.a.put(a.servidor+"/api/notificaciones/"+e,{leido:!0},{headers:{Authorization:t}}).then((function(e){})).catch((function(e){console.log("Un error ha ocurrido al cambiar la variable true."),console.log(e.response)}))}(e.id)})),p(!1)})).catch((function(e){console.log("Un error ha ocurrido al buscar las notificaciones."),console.log(e.response)}))}),[a.jwt,a.publico]),o.a.createElement(He.a,{className:e.fondo},o.a.createElement(Le.a,{style:{padding:"15px",width:"100%"},className:"Fondo",variant:"outlined",square:!0},o.a.createElement(j.a,{container:!0,direction:"row",alignItems:"center"},o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(g.a,{variant:"h4",component:"h4",align:"center"},"Notificaciones"),o.a.createElement("br",null)),m&&o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(V.a,null)),!m&&0===s.length&&o.a.createElement(j.a,{item:!0,xs:12},o.a.createElement(ye.a,{variant:"outlined",severity:"info"},"No tienes notificaciones nuevas.")),s.map((function(t,a){return o.a.createElement(Le.a,{key:a,className:e.filaPublicacion,style:{margin:"auto",width:"95%"},variant:"outlined",square:!0},o.a.createElement(j.a,{container:!0,item:!0,xs:12,alignItems:"center"},o.a.createElement(j.a,{item:!0,xs:12,sm:2,md:1,lg:1,align:"center"},C[t.tipo]),o.a.createElement(j.a,{item:!0,xs:10,sm:8,md:10,lg:10},o.a.createElement(g.a,{variant:"h5",component:"h5",align:"left"},0===t.tipo&&(null!==t.solicitud?'Reporte a la publicaci\xf3n "'+t.solicitud.titulo+'"':"Reporte a su perfil"),1===t.tipo&&"Respuesta a tu solicitud de verificaci\xf3n de identidad",2===t.tipo&&(""===t.datos_notificacion?'Nueva solicitud de rese\xf1a a la publicaci\xf3n "'+t.solicitud.titulo+'"':'Nueva solicitud de rese\xf1a a la categor\xeda "'+t.datos_notificacion.split("_")[1]+'"')," - "+Object(pt.a)(new Date(t.created_at),"spanish"),!t.leido&&o.a.createElement(ya.a,{style:{color:xa.a[500]}})),o.a.createElement(g.a,{align:"justify"},t.tipo<2?""!==t.datos_notificacion?t.datos_notificacion:"\xa1Felicitaciones! Tu perfil ahora est\xe1 verificado.":""===t.datos_notificacion?t.solicitud.tipo?'Tienes una nueva petici\xf3n de rese\xf1a al servicio "'+t.solicitud.titulo:"Tienes una nueva petici\xf3n de rese\xf1a al servicio ofrecido por el proveedor "+"".concat(t.emisor.nombre," ").concat(t.emisor.apellido)+' por tu solicitud "'+t.solicitud.titulo+'". \xa1Cu\xe9ntanos tu experiencia haciendo click en el bot\xf3n!':'Tienes una nueva petici\xf3n de rese\xf1a a la categor\xeda "'+t.datos_notificacion.split("_")[1],2===t.tipo&&'" realizada por el proveedor '+"".concat(t.emisor.nombre," ").concat(t.emisor.apellido)+". \xa1Cu\xe9ntanos tu experiencia haciendo click en el bot\xf3n!"),2===t.tipo&&o.a.createElement("div",{align:"center"},o.a.createElement(Ca,{datos:t,eliminarNotificacion:S}))),o.a.createElement(j.a,{item:!0,xs:2,sm:2,md:1,lg:1,align:"center"},o.a.createElement(O.a,{onClick:function(){E(!0)}},o.a.createElement(Oa.a,{color:"error"}))),v&&o.a.createElement(_e,{mensaje:"",funcionAceptar:function(e){e&&S(t.id),E(!1)},titulo:"\xbfEst\xe1 seguro que quiere eliminar la notificaci\xf3n?"})))})))))}a(236);var ka=a(15),Na=a(16),wa=a(18),_a=a(17),Aa=(a(237),a(238),a(106)),Pa=a.n(Aa),Ba=a(107),Da=a.n(Ba),Ma=a(136).Circle,qa=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(){return Object(ka.a)(this,a),t.apply(this,arguments)}return Object(Na.a)(a,[{key:"render",value:function(){var e={strokeWidth:2.3,color:"#efe",trailColor:"#aaa",trailWidth:1,step:function(e,t){t.path.setAttribute("trail",e.color),t.path.setAttribute("trailwidth-width",e.width);var a=Math.round(100*t.value());0===a?t.setText(""):t.setText(a)}},t=this.props.data.status&&!0===this.props.data.status.error;return o.a.createElement("div",{className:"rce-mbox-photo"},o.a.createElement("div",{className:"rce-mbox-photo--img",style:this.props.data.width&&this.props.data.height&&{width:this.props.data.width,height:this.props.data.height}},o.a.createElement("img",{src:this.props.data.uri,alt:this.props.data.alt,onClick:this.props.onOpen,onLoad:this.props.onLoad,onError:this.props.onPhotoError}),t&&o.a.createElement("div",{className:"rce-mbox-photo--img__block"},o.a.createElement("span",{className:"rce-mbox-photo--img__block-item rce-mbox-photo--error"},o.a.createElement(Da.a,null))),!t&&this.props.data.status&&!this.props.data.status.download&&o.a.createElement("div",{className:"rce-mbox-photo--img__block"},!this.props.data.status.click&&o.a.createElement("button",{onClick:this.props.onDownload,className:"rce-mbox-photo--img__block-item rce-mbox-photo--download"},o.a.createElement(Pa.a,null)),"number"===typeof this.props.data.status.loading&&0!==this.props.data.status.loading&&o.a.createElement(Ma,{progress:this.props.data.status.loading,options:e,initialAnimate:!0,containerClassName:"rce-mbox-photo--img__block-item"}))),this.props.text&&o.a.createElement("div",{className:"rce-mbox-text"},this.props.text))}}]),a}(n.Component);qa.defaultProps={text:"",data:{},onDownload:null,onOpen:null,onLoad:null,onPhotoError:null};var za=qa,Fa=(a(312),a(166)),Ia=a.n(Fa),Ra=a(136).Circle,Ua=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(){return Object(ka.a)(this,a),t.apply(this,arguments)}return Object(Na.a)(a,[{key:"onClick",value:function(e){this.props.data.status&&(!this.props.data.status.download&&this.props.onDownload instanceof Function?this.props.onDownload(e):this.props.data.status.download&&this.props.onOpen instanceof Function&&this.props.onOpen(e))}},{key:"render",value:function(){var e={strokeWidth:5,color:"#333",trailColor:"#aaa",trailWidth:5,step:function(e,t){t.path.setAttribute("trail",e.color),t.path.setAttribute("trailwidth-width",e.width);var a=Math.round(100*t.value());0===a?t.setText(""):t.setText(a)}},t=this.props.data.status&&!0===this.props.data.status.error;return o.a.createElement("div",{className:"rce-mbox-file"},o.a.createElement("button",{onClick:this.onClick.bind(this)},o.a.createElement("div",{className:"rce-mbox-file--icon"},o.a.createElement(Ia.a,{color:"#aaa"}),o.a.createElement("div",{className:"rce-mbox-file--size"},this.props.data.size)),o.a.createElement("div",{className:"rce-mbox-file--text"},this.props.text),o.a.createElement("div",{className:"rce-mbox-file--buttons"},t&&o.a.createElement("span",{className:"rce-error-button"},o.a.createElement(Da.a,{color:"#ff3d3d"})),!t&&this.props.data.status&&!this.props.data.status.download&&!this.props.data.status.click&&o.a.createElement(Pa.a,{color:"#aaa"}),!t&&this.props.data.status&&"number"===typeof this.props.data.status.loading&&0!==this.props.data.status.loading&&o.a.createElement(Ra,{progress:this.props.data.status.loading,options:e,initialAnimate:!0,containerClassName:"rce-mbox-file--loading"}))))}}]),a}(n.Component);Ua.defaultProps={text:"",data:{},onClick:null,onDownload:null,onOpen:null};var La=Ua,Ta=(a(313),a(19)),Va=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(){return Object(ka.a)(this,a),t.apply(this,arguments)}return Object(Na.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:Ta("rce-container-smsg",this.props.className)},o.a.createElement("div",{className:"rce-smsg"},o.a.createElement("div",{className:"rce-smsg-text"},this.props.text)))}}]),a}(n.Component),Ha=a(56),Wa=(a(314),a(19)),Ja=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(e){var n;return Object(ka.a)(this,a),(n=t.call(this,e)).className=n.className.bind(Object(Ha.a)(n)),n}return Object(Na.a)(a,[{key:"buildURL",value:function(e){var t=this.props.data||{};return e.replace(/LATITUDE/g,t.latitude).replace(/LONGITUDE/g,t.longitude).replace("MARKER_COLOR",this.props.markerColor).replace("ZOOM",this.props.zoom).replace("KEY",this.props.apiKey)}},{key:"className",value:function(){var e=Wa("rce-mbox-location",this.props.className);return this.props.text&&(e=Wa(e,"rce-mbox-location-has-text")),e}},{key:"render",value:function(){var e=this.props.data||{};return o.a.createElement("div",{className:"rce-container-lmsg"},o.a.createElement("a",{onClick:this.props.onOpen,target:this.props.target,href:this.props.href||this.props.src||this.buildURL(e.mapURL||"https://www.google.com/maps/search/?api=1&query=LATITUDE,LONGITUDE&zoom=ZOOM"),className:this.className()},o.a.createElement("img",{onError:this.props.onError,className:"rce-mbox-location-img",src:this.props.src||this.buildURL(e.staticURL||"https://maps.googleapis.com/maps/api/staticmap?markers=color:MARKER_COLOR|LATITUDE,LONGITUDE&zoom=ZOOM&size=270x200&scale=2&key=KEY")})),this.props.text&&o.a.createElement("div",{className:"rce-mbox-text rce-mbox-location-text"},this.props.text))}}]),a}(n.Component);Ja.defaultProps={target:"_blank",apiKey:"",zoom:14,markerColor:"red",onError:function(){}};var Ka=Ja,Ga=(a(315),a(19),function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(){return Object(ka.a)(this,a),t.apply(this,arguments)}return Object(Na.a)(a,[{key:"toUrl",value:function(){var e=[],t={uri:this.props.uri,theme:this.props.theme,view:this.props.view};for(var a in t){var n=encodeURIComponent(a),o=encodeURIComponent(t[a]);e.push(n+"="+o)}return e=e.join("&")}},{key:"render",value:function(){return this.props.uri?o.a.createElement("div",{className:"rce-mbox-spotify"},o.a.createElement("iframe",{src:"https://open.spotify.com/embed?"+this.toUrl(),width:this.props.width,height:this.props.height,frameBorder:"0",allowtransparency:"true"})):null}}]),a}(n.Component));Ga.defaultProps={uri:"",theme:"black",view:"list",width:300,height:380};var Ya=Ga,Qa=(a(316),a(19)),Za=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(e){return Object(ka.a)(this,a),t.call(this,e)}return Object(Na.a)(a,[{key:"render",value:function(){var e=this.props,t=e.photoURL,a=e.title,n=e.titleColor,i=e.message,r=e.onClick;return o.a.createElement("div",{className:Qa("rce-mbox-reply",{"rce-mbox-reply-border":!!n}),style:n&&{borderColor:n},onClick:r},o.a.createElement("div",{className:"rce-mbox-reply-left"},o.a.createElement("div",{style:n&&{color:n},className:"rce-mbox-reply-owner"},a||"Unknown"),o.a.createElement("div",{className:"rce-mbox-reply-message"},i||"...")),t&&o.a.createElement("div",{className:"rce-mbox-reply-right"},o.a.createElement("img",{src:t,alt:""})))}}]),a}(n.Component);Za.defaultProps={photoURL:null,title:null,titleColor:null,message:null,onClick:function(){}};var $a=Za,Xa=(a(317),a(167)),en=a.n(Xa),tn=a(168),an=a.n(tn),nn=a(169),on=a.n(nn),rn=a(170),cn=a.n(rn),sn=a(171),ln=a.n(sn),un=a(172),dn=a.n(un),mn=(a(318),a(19)),pn=[],hn=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(e){var n;return Object(ka.a)(this,a),(n=t.call(this,e)).requestImage=n.requestImage.bind(Object(Ha.a)(n)),n}return Object(Na.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"isLoaded",value:function(e){return-1!==pn.indexOf(e)}},{key:"requestImage",value:function(e){var t=this,a=this;this.loading=!0;var n=function(){pn.push(e),delete a.loading,!1!==t._isMounted&&a.setState({})},o=document.createElement("img");o.src=e,o.onload=n,o.onerror=n}},{key:"stringToColour",value:function(e){for(var t=0,a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);for(var n="#",o=0;o<3;o++){var i=t>>8*o&255;n+=("00"+(i=i%150+50).toString(16)).substr(-2)}return n}},{key:"render",value:function(){var e=this.props.src,t=!1;return this.props.lazyLoadingImage&&(t=!0,this.isLoaded(e)?t=!1:(e=this.props.lazyLoadingImage,this.loading||this.requestImage(this.props.src))),o.a.createElement("div",{className:mn("rce-avatar-container",this.props.type,this.props.size,this.props.className)},this.props.letterItem?o.a.createElement("div",{className:"rce-avatar-letter-background",style:{backgroundColor:this.stringToColour(this.props.letterItem.id)}},o.a.createElement("span",{className:"rce-avatar-letter"},this.props.letterItem.letter)):o.a.createElement("img",{alt:this.props.alt,src:e,onError:this.props.onError,className:mn("rce-avatar",{"rce-avatar-lazy":t})}),this.props.sideElement)}}]),a}(n.Component);hn.defaultProps={type:"default",size:"default",src:"",alt:"",sideElement:null,lazyLoadingImage:void 0,onError:function(){}};var fn=hn,bn=a(19),vn=a.n(bn),gn=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(e){var n;return Object(ka.a)(this,a),(n=t.call(this,e)).state={toogle:!1},n}return Object(Na.a)(a,[{key:"toggleClick",value:function(){this.setState({toogle:!this.state.toogle})}},{key:"render",value:function(){var e=this,t=this.props,a=t.date,n=t.dateString,i=t.title,r=t.subject,c=t.onClick,s=t.collapseTitle,l=t.dataSource,u=t.participants,d=t.onMeetingTitleClick,m=t.onMeetingVideoLinkClick,p=this.props.participantsLimit,h=n||a&&!isNaN(a)&&Object(pt.a)(a);return o.a.createElement("div",{className:"rce-mbox-mtmg"},o.a.createElement("div",{className:"rce-mtmg"},o.a.createElement("div",{className:"rce-mtmg-subject"},r||"Unknown Meeting"),o.a.createElement("div",{className:"rce-mtmg-body",onClick:c},o.a.createElement("div",{className:"rce-mtmg-item"},o.a.createElement(en.a,null),o.a.createElement("div",{className:"rce-mtmg-content"},o.a.createElement("span",{className:"rce-mtmg-title"},i),o.a.createElement("span",{className:"rce-mtmg-date"},h))),o.a.createElement("div",{className:"rce-mtmg-right-icon"},o.a.createElement(an.a,null))),o.a.createElement("div",{className:"rce-mtmg-body-bottom",onClick:function(){return e.toggleClick()}},!0===this.state.toogle?o.a.createElement("div",{className:"rce-mtmg-bottom--tptitle"},o.a.createElement(on.a,null),o.a.createElement("span",null,s)):o.a.createElement("div",{className:"rce-mtmg-body-bottom--bttitle"},o.a.createElement(cn.a,null),o.a.createElement("span",null,u.slice(0,p).map((function(e){return e.title||"Unknow"})).join(", "),u.length>p&&", +".concat(u.length-p)))),o.a.createElement("div",{className:vn()("rce-mtmg-toogleContent",{"rce-mtmg-toogleContent--click":!0===this.state.toogle})},l&&l.map((function(e,t){return o.a.createElement("div",{key:t},!e.event&&o.a.createElement("div",{className:"rce-mitem"},o.a.createElement("div",{className:vn()("rce-mitem avatar",{"rce-mitem no-avatar":!e.avatar})},e.avatar?o.a.createElement(fn,{src:e.avatar}):o.a.createElement(dn.a,null)),o.a.createElement("div",{className:"rce-mitem-body"},o.a.createElement("div",{className:"rce-mitem-body--top"},o.a.createElement("div",{className:"rce-mitem-body--top-title",onClick:function(a){return d(e,t,a)}},e.title),o.a.createElement("div",{className:"rce-mitem-body--top-time"},e.dateString?e.dateString:e.date&&!isNaN(e.date)&&Object(pt.a)(e.date))),o.a.createElement("div",{className:"rce-mitem-body--bottom"},o.a.createElement("div",{className:"rce-mitem-body--bottom-title"},e.message)))),e.event&&o.a.createElement("div",{className:"rce-mitem-event"},o.a.createElement("div",{className:"rce-mitem-bottom-body"},o.a.createElement("div",{className:"rce-mitem-body avatar"},o.a.createElement(ln.a,null)),o.a.createElement("div",{className:"rce-mitem-bottom-body-top"},e.event.title,o.a.createElement("div",{className:"rce-mitem-body--top-time"},e.dateString?e.dateString:e.date&&!isNaN(e.date)&&Object(pt.a)(e.date)),o.a.createElement("div",{className:"rce-mitem-avatar-content"},e.event.avatars&&e.event.avatars.map((function(e,t){return e instanceof fn?e:o.a.createElement("div",{key:t,className:"rce-mitem-avatar"},o.a.createElement(fn,{src:e.src}))}))),e.record&&o.a.createElement("div",{className:"rce-mtmg-call-record"},o.a.createElement("div",{className:"rce-mtmg-call-body"},o.a.createElement("div",{onClick:function(a){return m(e,t,a)},className:"rce-mtmg-call-avatars"},o.a.createElement(fn,{className:"rce-mtmg-call-avatars",src:e.record.avatar}),o.a.createElement("div",{className:"rce-mtmg-record-time"},e.record.time)),o.a.createElement("div",{className:"rce-mtmg-call-body-title"},o.a.createElement("span",null,e.record.title),o.a.createElement("div",{className:"rce-mtmg-call-body-bottom"},e.record.savedBy))))))))})))))}}]),a}(n.Component);gn.defaultProps={date:new Date,dateString:"",title:"",subject:"",collapseTitle:"",participantsLimit:3,avatarFlexible:!1,dataSource:[],participants:[],onClick:function(){},onMeetingTitleClick:function(){},onMeetingVideoLinkClick:function(){},onAvatarError:function(){}};var En=gn,jn=a(173),yn=a.n(jn),On=a(118),xn=a.n(On),Cn=a(174),Sn=a.n(Cn),kn=a(175),Nn=a.n(kn),wn=a(176),_n=a.n(wn),An=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(){return Object(ka.a)(this,a),t.apply(this,arguments)}return Object(Na.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.focus!==this.props.focus&&!0===e.focus&&this.refs.message&&(this.refs.message.scrollIntoView({block:"center",behavior:"smooth"}),this.props.onMessageFocused(e))}},{key:"render",value:function(){var e=vn()("rce-mbox",{"rce-mbox-right":"right"===this.props.position}),t=!/(text|file|meeting)/g.test(this.props.type)&&!("location"===this.props.type&&this.props.text),a=this.props.date&&!isNaN(this.props.date)&&(this.props.dateString||Object(pt.a)(this.props.date));return o.a.createElement("div",{ref:"message",className:vn()("rce-container-mbox",this.props.className),onClick:this.props.onClick},this.props.renderAddCmp instanceof Function&&this.props.renderAddCmp(),"system"===this.props.type?o.a.createElement(Va,{text:this.props.text}):o.a.createElement("div",{className:vn()(e,{"rce-mbox--clear-padding":t},{"rce-mbox--clear-notch":!this.props.notch},{"message-focus":this.props.focus})},o.a.createElement("div",{className:"rce-mbox-body",onContextMenu:this.props.onContextMenu},!0===this.props.forwarded&&o.a.createElement("div",{className:vn()("rce-mbox-forward",{"rce-mbox-forward-right":"left"===this.props.position},{"rce-mbox-forward-left":"right"===this.props.position}),onClick:this.props.onForwardClick},o.a.createElement(yn.a,null)),!0===this.props.replyButton&&o.a.createElement("div",{className:!0!==this.props.forwarded?vn()("rce-mbox-forward",{"rce-mbox-forward-right":"left"===this.props.position},{"rce-mbox-forward-left":"right"===this.props.position}):vn()("rce-mbox-forward",{"rce-mbox-reply-btn-right":"left"===this.props.position},{"rce-mbox-reply-btn-left":"right"===this.props.position}),onClick:this.props.onReplyClick},o.a.createElement(_n.a,null)),(this.props.title||this.props.avatar)&&o.a.createElement("div",{style:this.props.titleColor&&{color:this.props.titleColor},onClick:this.props.onTitleClick,className:vn()("rce-mbox-title",{"rce-mbox-title--clear":"text"===this.props.type})},this.props.avatar&&o.a.createElement(fn,{letterItem:this.props.letterItem,src:this.props.avatar}),this.props.title&&o.a.createElement("span",null,this.props.title)),this.props.reply&&o.a.createElement($a,{photoURL:this.props.reply.photoURL,title:this.props.reply.title,titleColor:this.props.reply.titleColor,message:this.props.reply.message,onClick:this.props.onReplyMessageClick}),"text"===this.props.type&&o.a.createElement("div",{className:"rce-mbox-text"},this.props.text),"location"===this.props.type&&o.a.createElement(Ka,{onOpen:this.props.onOpen,data:this.props.data,target:this.props.target,href:this.props.href,apiKey:this.props.apiKey,src:this.props.src,zoom:this.props.zoom,markerColor:this.props.markerColor,text:this.props.text}),"photo"===this.props.type&&o.a.createElement(za,{onOpen:this.props.onOpen,onDownload:this.props.onDownload,onLoad:this.props.onLoad,onPhotoError:this.props.onPhotoError,data:this.props.data,width:this.props.width,height:this.props.height,text:this.props.text}),"file"===this.props.type&&o.a.createElement(La,{onOpen:this.props.onOpen,onDownload:this.props.onDownload,data:this.props.data,text:this.props.text}),"spotify"===this.props.type&&o.a.createElement(Ya,{width:this.props.width,height:this.props.height,theme:this.props.theme,view:this.props.view,data:this.props.data,uri:this.props.uri||this.props.text}),"meeting"===this.props.type&&this.props.meeting&&o.a.createElement(En,{subject:this.props.meeting.subject,title:this.props.meeting.title,date:this.props.meeting.date,dateString:this.props.meeting.dateString,collapseTitle:this.props.meeting.collapseTitle,participants:this.props.meeting.participants,dataSource:this.props.meeting.dataSource,onMeetingMessageClick:this.props.onMeetingMessageClick,onMeetingVideoLinkClick:this.props.onMeetingVideoLinkClick,onMeetingTitleClick:this.props.onMeetingTitleClick}),o.a.createElement("div",{className:vn()("rce-mbox-time",{"rce-mbox-time-block":t},{"non-copiable":!this.props.copiableDate}),"data-text":this.props.copiableDate?void 0:a},this.props.copiableDate&&this.props.date&&!isNaN(this.props.date)&&(this.props.dateString||Object(pt.a)(this.props.date)),this.props.status&&o.a.createElement("span",{className:"rce-mbox-status"},"waiting"===this.props.status&&o.a.createElement(Sn.a,null),"sent"===this.props.status&&o.a.createElement(Nn.a,null),"received"===this.props.status&&o.a.createElement(xn.a,null),"read"===this.props.status&&o.a.createElement(xn.a,{color:"#4FC3F7"})))),this.props.notch&&("right"===this.props.position?o.a.createElement("svg",{className:vn()("rce-mbox-right-notch",{"message-focus":this.props.focus}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},o.a.createElement("path",{d:"M0 0v20L20 0"})):o.a.createElement("div",null,o.a.createElement("svg",{className:vn()("rce-mbox-left-notch",{"message-focus":this.props.focus}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},o.a.createElement("defs",null,o.a.createElement("filter",{id:"filter1",x:"0",y:"0"},o.a.createElement("feOffset",{result:"offOut",in:"SourceAlpha",dx:"-2",dy:"-5"}),o.a.createElement("feGaussianBlur",{result:"blurOut",in:"offOut",stdDeviation:"3"}),o.a.createElement("feBlend",{in:"SourceGraphic",in2:"blurOut",mode:"normal"}))),o.a.createElement("path",{d:"M20 0v20L0 0",filter:"url(#filter1)"}))))))}}]),a}(n.Component);An.defaultProps={position:"left",type:"text",text:"",title:null,titleColor:null,onTitleClick:null,onForwardClick:null,onReplyClick:null,onReplyMessageClick:null,date:new Date,data:{},onClick:null,onOpen:null,onDownload:null,onLoad:null,onPhotoError:null,forwarded:!1,reply:!1,status:null,dateString:null,notch:!0,avatar:null,renderAddCmp:null,copiableDate:!1,onContextMenu:null,focus:!1,onMessageFocused:null};var Pn=An,Bn=(a(319),function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(){return Object(ka.a)(this,a),t.apply(this,arguments)}return Object(Na.a)(a,[{key:"render",value:function(){var e=this.props.statusColorType;return o.a.createElement("div",{className:vn()("rce-container-citem",this.props.className),onClick:this.props.onClick,onContextMenu:this.props.onContextMenu},o.a.createElement("div",{className:"rce-citem"},o.a.createElement("div",{className:vn()("rce-citem-avatar",{"rce-citem-status-encircle":"encircle"===e})},o.a.createElement(fn,{src:this.props.avatar,alt:this.props.alt,className:"encircle"===e?"rce-citem-avatar-encircle-status":"",size:"large",letterItem:this.props.letterItem,sideElement:this.props.statusColor&&o.a.createElement("span",{className:"rce-citem-status",style:"encircle"===e?{boxShadow:"inset 0 0 0 2px ".concat(this.props.statusColor,", inset 0 0 0 5px #FFFFFF")}:{backgroundColor:this.props.statusColor}},this.props.statusText),onError:this.props.onAvatarError,lazyLoadingImage:this.props.lazyLoadingImage,type:vn()("circle",{flexible:this.props.avatarFlexible})})),o.a.createElement("div",{className:"rce-citem-body"},o.a.createElement("div",{className:"rce-citem-body--top"},o.a.createElement("div",{className:"rce-citem-body--top-title"},this.props.title),o.a.createElement("div",{className:"rce-citem-body--top-time"},this.props.date&&!isNaN(this.props.date)&&(this.props.dateString||Object(pt.a)(this.props.date)))),o.a.createElement("div",{className:"rce-citem-body--bottom"},o.a.createElement("div",{className:"rce-citem-body--bottom-title"},this.props.subtitle),o.a.createElement("div",{className:"rce-citem-body--bottom-status"},this.props.unread>0&&o.a.createElement("span",null,this.props.unread))))))}}]),a}(n.Component));Bn.defaultProps={id:"",onClick:null,avatar:"",avatarFlexible:!1,alt:"",title:"",subtitle:"",date:new Date,unread:0,statusColor:null,statusColorType:"badge",statusText:null,dateString:null,lazyLoadingImage:void 0,onAvatarError:function(){}};var Dn=Bn,Mn=(a(320),a(19)),qn=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(){return Object(ka.a)(this,a),t.apply(this,arguments)}return Object(Na.a)(a,[{key:"onClick",value:function(e,t,a){this.props.onClick instanceof Function&&this.props.onClick(e,t,a)}},{key:"onContextMenu",value:function(e,t,a){a.preventDefault(),this.props.onContextMenu instanceof Function&&this.props.onContextMenu(e,t,a)}},{key:"onAvatarError",value:function(e,t,a){this.props.onAvatarError instanceof Function&&this.props.onAvatarError(e,t,a)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{ref:this.props.cmpRef,className:Mn("rce-container-clist",this.props.className)},this.props.dataSource.map((function(t,a){return o.a.createElement(Dn,Object.assign({id:t.id||a,key:a,lazyLoadingImage:e.props.lazyLoadingImage},t,{onAvatarError:function(n){return e.onAvatarError(t,a,n)},onContextMenu:function(n){return e.onContextMenu(t,a,n)},onClick:function(n){return e.onClick(t,a,n)}}))})))}}]),a}(n.Component);qn.defaultProps={dataSource:[],onClick:null,lazyLoadingImage:void 0};var zn=qn,Fn=(a(321),a(177)),In=a.n(Fn),Rn=a(19),Un=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(e){var n;return Object(ka.a)(this,a),(n=t.call(this,e)).state={scrollBottom:0,downButton:!1},n.loadRef=n.loadRef.bind(Object(Ha.a)(n)),n.onScroll=n.onScroll.bind(Object(Ha.a)(n)),n}return Object(Na.a)(a,[{key:"checkScroll",value:function(){var e=this.mlistRef;e&&("100%"===this.props.toBottomHeight||this.state.scrollBottom<this.props.toBottomHeight?e.scrollTop=e.scrollHeight:!0===this.props.lockable&&(e.scrollTop=e.scrollHeight-e.offsetHeight-this.state.scrollBottom))}},{key:"componentWillReceiveProps",value:function(e){this.mlistRef&&e.dataSource.length!==this.props.dataSource.length&&this.setState({scrollBottom:this.getBottom(this.mlistRef)},this.checkScroll.bind(this))}},{key:"getBottom",value:function(e){return e.scrollHeight-e.scrollTop-e.offsetHeight}},{key:"onOpen",value:function(e,t,a){this.props.onOpen instanceof Function&&this.props.onOpen(e,t,a)}},{key:"onDownload",value:function(e,t,a){this.props.onDownload instanceof Function&&this.props.onDownload(e,t,a)}},{key:"onPhotoError",value:function(e,t,a){this.props.onPhotoError instanceof Function&&this.props.onPhotoError(e,t,a)}},{key:"onClick",value:function(e,t,a){this.props.onClick instanceof Function&&this.props.onClick(e,t,a)}},{key:"onTitleClick",value:function(e,t,a){this.props.onTitleClick instanceof Function&&this.props.onTitleClick(e,t,a)}},{key:"onForwardClick",value:function(e,t,a){this.props.onForwardClick instanceof Function&&this.props.onForwardClick(e,t,a)}},{key:"onReplyClick",value:function(e,t,a){this.props.onReplyClick instanceof Function&&this.props.onReplyClick(e,t,a)}},{key:"onReplyMessageClick",value:function(e,t,a){this.props.onReplyMessageClick instanceof Function&&this.props.onReplyMessageClick(e,t,a)}},{key:"onContextMenu",value:function(e,t,a){this.props.onContextMenu instanceof Function&&this.props.onContextMenu(e,t,a)}},{key:"onMessageFocused",value:function(e,t,a){this.props.onMessageFocused instanceof Function&&this.props.onMessageFocused(e,t,a)}},{key:"onMeetingMessageClick",value:function(e,t,a){this.props.onMeetingMessageClick instanceof Function&&this.props.onMeetingMessageClick(e,t,a)}},{key:"loadRef",value:function(e){this.mlistRef=e,this.props.cmpRef instanceof Function&&this.props.cmpRef(e)}},{key:"onScroll",value:function(e){var t=this.getBottom(e.target);this.state.scrollBottom=t,"100%"===this.props.toBottomHeight||t>this.props.toBottomHeight?!0!==this.state.downButton&&(this.state.downButton=!0,this.setState({downButton:!0,scrollBottom:t})):!1!==this.state.downButton&&(this.state.downButton=!1,this.setState({downButton:!1,scrollBottom:t})),this.props.onScroll instanceof Function&&this.props.onScroll(e)}},{key:"toBottom",value:function(e){this.mlistRef&&(this.mlistRef.scrollTop=this.mlistRef.scrollHeight,this.props.onDownButtonClick instanceof Function&&this.props.onDownButtonClick(e))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:Rn(["rce-container-mlist",this.props.className])},o.a.createElement("div",{ref:this.loadRef,onScroll:this.onScroll,className:"rce-mlist"},this.props.dataSource.map((function(t,a){return o.a.createElement(Pn,Object.assign({key:a},t,{onOpen:e.props.onOpen&&function(n){return e.onOpen(t,a,n)},onPhotoError:e.props.onPhotoError&&function(n){return e.onPhotoError(t,a,n)},onDownload:e.props.onDownload&&function(n){return e.onDownload(t,a,n)},onTitleClick:e.props.onTitleClick&&function(n){return e.onTitleClick(t,a,n)},onForwardClick:e.props.onForwardClick&&function(n){return e.onForwardClick(t,a,n)},onReplyClick:e.props.onReplyClick&&function(n){return e.onReplyClick(t,a,n)},onReplyMessageClick:e.props.onReplyMessageClick&&function(n){return e.onReplyMessageClick(t,a,n)},onClick:e.props.onClick&&function(n){return e.onClick(t,a,n)},onContextMenu:e.props.onContextMenu&&function(n){return e.onContextMenu(t,a,n)},onMessageFocused:e.props.onMessageFocused&&function(n){return e.onMessageFocused(t,a,n)},onMeetingMessageClick:e.props.onMeetingMessageClick&&function(n){return e.onMeetingMessageClick(t,a,n)},onMeetingTitleClick:e.props.onMeetingTitleClick,onMeetingVideoLinkClick:e.props.onMeetingVideoLinkClick}))}))),!0===this.props.downButton&&this.state.downButton&&"100%"!==this.props.toBottomHeight&&o.a.createElement("div",{className:"rce-mlist-down-button",onClick:this.toBottom.bind(this)},o.a.createElement(In.a,null),this.props.downButtonBadge&&o.a.createElement("span",{className:"rce-mlist-down-button--badge"},this.props.downButtonBadge)))}}]),a}(n.Component);Un.defaultProps={onClick:null,onTitleClick:null,onForwardClick:null,onReplyClick:null,onReplyMessageClick:null,onMeetingMessageClick:null,onDownButtonClick:null,onOpen:null,onPhotoError:null,onDownload:null,dataSource:[],lockable:!1,toBottomHeight:300,downButton:!0,downButtonBadge:null};var Ln=Un,Tn=(a(322),a(19)),Vn=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(){return Object(ka.a)(this,a),t.apply(this,arguments)}return Object(Na.a)(a,[{key:"onChange",value:function(e){if(this.props.maxlength&&(e.target.value||"").length>this.props.maxlength)return this.props.onMaxLengthExceed instanceof Function&&this.props.onMaxLengthExceed(),void(this.input.value=(e.target.value||"").substring(0,this.props.maxlength));var t;(this.props.onChange instanceof Function&&this.props.onChange(e),!0===this.props.multiline)&&(!0===this.props.autoHeight&&(e.target.style.height!==this.props.minHeight+"px"&&(e.target.style.height=this.props.minHeight+"px"),t=e.target.scrollHeight<=this.props.maxHeight?e.target.scrollHeight+"px":this.props.maxHeight+"px",e.target.style.height!==t&&(e.target.style.height=t)))}},{key:"clear",value:function(){var e={FAKE_EVENT:!0,target:this.input};this.input.value&&(this.input.value=""),this.onChange(e)}},{key:"componentDidMount",value:function(){!0===this.props.autofocus&&this.input.focus()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:Tn("rce-container-input",this.props.className)},this.props.leftButtons&&o.a.createElement("div",{className:"rce-input-buttons"},this.props.leftButtons),!1===this.props.multiline?o.a.createElement("input",{ref:function(t){e.props.inputRef instanceof Function&&e.props.inputRef(t),e.input=t},type:this.props.type,className:Tn("rce-input"),placeholder:this.props.placeholder,defaultValue:this.props.defaultValue,style:this.props.inputStyle,onChange:this.onChange.bind(this),onCopy:this.props.onCopy,onCut:this.props.onCut,onPaste:this.props.onPaste,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onSelect:this.props.onSelect,onSubmit:this.props.onSubmit,onReset:this.props.onReset,onKeyDown:this.props.onKeyDown,onKeyPress:this.props.onKeyPress,onKeyUp:this.props.onKeyUp}):o.a.createElement("textarea",{ref:function(t){e.props.inputRef instanceof Function&&e.props.inputRef(t),e.input=t},type:this.props.type,className:Tn("rce-input","rce-input-textarea"),placeholder:this.props.placeholder,defaultValue:this.props.defaultValue,style:this.props.inputStyle,onChange:this.onChange.bind(this),onCopy:this.props.onCopy,onCut:this.props.onCut,onPaste:this.props.onPaste,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onSelect:this.props.onSelect,onSubmit:this.props.onSubmit,onReset:this.props.onReset,onKeyDown:this.props.onKeyDown,onKeyPress:this.props.onKeyPress,onKeyUp:this.props.onKeyUp}),this.props.rightButtons&&o.a.createElement("div",{className:"rce-input-buttons"},this.props.rightButtons))}}]),a}(n.Component);Vn.defaultProps={type:"text",placeholder:"",defaultValue:"",onChange:null,rightButtons:null,leftButtons:null,multiline:!1,minHeight:25,maxHeight:200,autoHeight:!0,inputStyle:null,inputRef:null,maxlength:null,onMaxLengthExceed:null,autofocus:!1};var Hn=Vn,Wn=(a(323),a(19)),Jn=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(){return Object(ka.a)(this,a),t.apply(this,arguments)}return Object(Na.a)(a,[{key:"render",value:function(){return o.a.createElement("button",{ref:this.props.buttonRef,title:this.props.title,className:Wn("rce-button",this.props.type,this.props.className),style:{backgroundColor:this.props.backgroundColor,color:this.props.color,borderColor:this.props.backgroundColor},disabled:this.props.disabled,onClick:this.props.onClick},this.props.icon?o.a.createElement("span",{className:"rce-button-icon--container"},("right"===this.props.icon.float||!this.props.icon.float)&&o.a.createElement("span",null,this.props.text),o.a.createElement("span",{style:{float:this.props.icon.float,fontSize:this.props.icon.size||12},className:"rce-button-icon"},this.props.icon.component),"left"===this.props.icon.float&&o.a.createElement("span",null,this.props.text)):o.a.createElement("span",null,this.props.text))}}]),a}(n.Component);Jn.defaultProps={text:"",disabled:!1,type:null,icon:null,backgroundColor:"#3979aa",color:"white",className:null,buttonRef:null,title:null};var Kn=Jn,Gn=(a(324),a(19)),Yn=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(){return Object(ka.a)(this,a),t.apply(this,arguments)}return Object(Na.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:Gn("rce-navbar",this.props.type,this.props.className)},o.a.createElement("div",{className:"rce-navbar-item rce-navbar-item__left"},this.props.left),o.a.createElement("div",{className:"rce-navbar-item rce-navbar-item__center"},this.props.center),o.a.createElement("div",{className:"rce-navbar-item rce-navbar-item__right"},this.props.right))}}]),a}(n.Component);Yn.defaultProps={left:null,center:null,right:null,type:"light"};a(325);var Qn=a(19),Zn=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(e){var n;return Object(ka.a)(this,a),(n=t.call(this,e)).state={show:void 0},n}return Object(Na.a)(a,[{key:"onBlur",value:function(e){!0===this.state.show&&this.setState({show:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:Qn("rce-dropdown-container",this.props.className),onBlur:this.onBlur.bind(this)},o.a.createElement(Kn,Object.assign({},this.props.buttonProps,{onClick:function(){return e.setState({show:!e.state.show})}})),o.a.createElement("div",{className:Qn("rce-dropdown",this.props.animationType,"rce-dropdown-open__"+this.props.animationPosition,{"dropdown-hide":!1===this.state.show},{"dropdown-show":!0===this.state.show})},o.a.createElement("ul",null,this.props.title&&o.a.createElement("span",{className:"rce-dropdown-title"},this.props.title),this.props.items.map((function(t,a){return o.a.createElement("li",{key:a,onMouseDown:function(t){return e.props.onSelect(a)}},t instanceof Object?t.icon?o.a.createElement("span",{className:"rce-button-icon--container"},("right"===t.icon.float||!t.icon.float)&&o.a.createElement("a",null,t.text),o.a.createElement("span",{style:{float:t.icon.float,color:t.icon.color,fontSize:t.icon.size||12},className:Qn("rce-button-icon",t.icon.className)},t.icon.component),"left"===t.icon.float&&o.a.createElement("a",null,t.text)):o.a.createElement("a",null,t.text):o.a.createElement("a",null,t))})))))}}]),a}(n.Component);Zn.defaultProps={animationType:"default",animationPosition:"nortwest",items:[],onSelect:Function,buttonProps:null};a(326);var $n=a(19),Xn=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(){return Object(ka.a)(this,a),t.apply(this,arguments)}return Object(Na.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:$n("rce-sbar",this.props.type,this.props.className)},o.a.createElement("div",{className:"rce-sbar-item"},this.props.top),o.a.createElement("div",{className:"rce-sbar-item rce-sbar-item__center"},this.props.center),o.a.createElement("div",{className:"rce-sbar-item"},this.props.bottom))}}]),a}(n.Component);Xn.defaultProps={top:null,center:null,bottom:null,type:"dark"};var eo=Xn,to=(a(327),a(19)),ao=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(){return Object(ka.a)(this,a),t.apply(this,arguments)}return Object(Na.a)(a,[{key:"render",value:function(){return!0===this.props.show?o.a.createElement("div",{className:to("rce-popup-wrapper",this.props.type,this.props.className)},o.a.createElement("div",{className:"rce-popup"},this.props.renderHeader?o.a.createElement("div",{className:"rce-popup-header"},this.props.renderHeader()):o.a.createElement("div",{className:"rce-popup-header"},o.a.createElement("span",null,this.props.header),this.props.header&&this.props.headerButtons.map((function(e,t){return o.a.createElement(Kn,Object.assign({key:t},e))}))),o.a.createElement("div",{className:"rce-popup-content",style:{color:this.props.color}},this.props.renderContent?this.props.renderContent():this.props.text),o.a.createElement("div",{className:"rce-popup-footer"},this.props.renderFooter?this.props.renderFooter():this.props.footerButtons.map((function(e,t){return o.a.createElement(Kn,Object.assign({key:t},e))}))))):null}}]),a}(n.Component);ao.defaultProps={show:!1,header:null,text:null,headerButtons:[],footerButtons:[],renderHeader:null,renderContent:null,renderFooter:null,color:"#333"};a(328);var no=a(178),oo=a.n(no),io=a(179),ro=a.n(io),co=a(180),so=a.n(co),lo=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(){return Object(ka.a)(this,a),t.apply(this,arguments)}return Object(Na.a)(a,[{key:"render",value:function(){var e=this,t=this.props.statusColorType,a=this.props.avatarLimit,n=this.props.date&&!isNaN(this.props.date)&&(this.props.dateString||Object(pt.a)(this.props.date)),i=this.props.subject.substring(0,this.props.subjectLimit)+(this.props.subject.length>this.props.subjectLimit?"...":"");return o.a.createElement("div",{className:vn()("rce-container-mtitem",this.props.className),onClick:this.props.onClick,onContextMenu:this.props.onContextMenu},o.a.createElement("div",{className:"rce-mtitem"},o.a.createElement("div",{className:"rce-mtitem-top"},o.a.createElement("div",{className:"rce-mtitem-subject"},i),o.a.createElement("div",{className:"rce-mtitem-share",onClick:this.props.onShareClick},o.a.createElement(ro.a,null))),o.a.createElement("div",{className:"rce-mtitem-body"},o.a.createElement("div",{className:"rce-mtitem-body--avatars"},this.props.avatars.slice(0,a).map((function(a,n){return a instanceof fn?a:o.a.createElement(fn,{key:n,src:a.src,alt:a.alt,className:"encircle"===a.statusColorType?"rce-mtitem-avatar-encircle-status":"",size:"small",letterItem:a.letterItem,sideElement:a.statusColor&&o.a.createElement("span",{className:"rce-mtitem-status",style:"encircle"===t?{boxShadow:"inset 0 0 0 2px ".concat(a.statusColor,", inset 0 0 0 5px #FFFFFF")}:{backgroundColor:a.statusColor}},a.statusText),onError:e.props.onAvatarError,lazyLoadingImage:e.props.lazyLoadingImage,type:vn()("circle",{flexible:e.props.avatarFlexible})})})),this.props.avatars.length>a&&o.a.createElement("div",{className:"rce-avatar-container circle small rce-mtitem-letter"},o.a.createElement("span",null,"+"+(this.props.avatars.length-a)))),o.a.createElement("div",{className:"rce-mtitem-body--functions"},this.props.closable&&o.a.createElement("div",{className:"rce-mtitem-closable",onClick:this.props.onCloseClick},o.a.createElement(so.a,null)),o.a.createElement("div",{className:"rce-mtitem-button",onClick:this.props.onMeetingClick},o.a.createElement(oo.a,null)))),o.a.createElement("div",{className:"rce-mtitem-footer"},o.a.createElement("span",{className:"rce-mtitem-date"},n))))}}]),a}(n.Component);lo.defaultProps={id:"",subject:"",subjectLimit:60,onClick:null,avatarFlexible:!1,alt:"",title:"",subtitle:"",date:new Date,dateString:"",lazyLoadingImage:void 0,avatarLimit:5,avatars:[],onAvatarError:function(){},onMeetingClick:function(){},onShareClick:function(){}};var uo=lo,mo=(a(329),a(19)),po=function(e){Object(wa.a)(a,e);var t=Object(_a.a)(a);function a(){return Object(ka.a)(this,a),t.apply(this,arguments)}return Object(Na.a)(a,[{key:"onClick",value:function(e,t,a){this.props.onClick instanceof Function&&this.props.onClick(e,t,a)}},{key:"onContextMenu",value:function(e,t,a){a.preventDefault(),this.props.onContextMenu instanceof Function&&this.props.onContextMenu(e,t,a)}},{key:"onAvatarError",value:function(e,t,a){this.props.onAvatarError instanceof Function&&this.props.onAvatarError(e,t,a)}},{key:"onMeetingClick",value:function(e,t,a){this.props.onMeetingClick instanceof Function&&this.props.onMeetingClick(e,t,a)}},{key:"onShareClick",value:function(e,t,a){this.props.onShareClick instanceof Function&&this.props.onShareClick(e,t,a)}},{key:"onCloseClick",value:function(e,t,a){this.props.onCloseClick instanceof Function&&this.props.onCloseClick(e,t,a)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{ref:this.props.cmpRef,className:mo("rce-container-mtlist",this.props.className)},this.props.dataSource.map((function(t,a){return o.a.createElement(uo,Object.assign({id:t.id||a,key:a,lazyLoadingImage:e.props.lazyLoadingImage},t,{onAvatarError:function(n){return e.onAvatarError(t,a,n)},onContextMenu:function(n){return e.onContextMenu(t,a,n)},onClick:function(n){return e.onClick(t,a,n)},onMeetingClick:function(n){return e.onMeetingClick(t,a,n)},onShareClick:function(n){return e.onShareClick(t,a,n)},onCloseClick:function(n){return e.onCloseClick(t,a,n)}}))})))}}]),a}(n.Component);po.defaultProps={dataSource:[],onClick:null,lazyLoadingImage:void 0};var ho=a(430),fo=a(431);a(330);var bo=function(){var e=W(),t=Object(n.useContext)(G),a=t.state,i=(t.dispatch,Object(n.useState)(!1)),r=Object(c.a)(i,2),s=r[0],l=r[1],u=Object(n.useState)([]),d=Object(c.a)(u,2),m=d[0],h=d[1],b=Object(n.useState)([]),v=Object(c.a)(b,2),g=(v[0],v[1],Object(n.useState)([])),E=Object(c.a)(g,2),j=E[0],x=E[1],C=Object(n.useState)(null),S=Object(c.a)(C,2),k=S[0],N=S[1],w=Object(n.useState)(!1),_=Object(c.a)(w,2),A=_[0],P=_[1],B=Object(n.useState)(!1),D=Object(c.a)(B,2),M=D[0],q=D[1],z=Object(n.useState)(!1),F=Object(c.a)(z,2),I=F[0],R=F[1],U=Object(n.useState)(""),L=Object(c.a)(U,2),T=L[0],H=L[1],J=Object(n.useState)(!1),K=Object(c.a)(J,2),Y=K[0],Q=K[1];function Z(){var e="Bearer "+a.jwt;if(null!==k){var t="".concat(k.emisor.nombre," ").concat(k.emisor.apellido),n="".concat(k.receptor.nombre," ").concat(k.receptor.apellido),o=null===k.emisor.imagen_perfil?a.imagen_predeterminada:a.servidor+k.emisor.imagen_perfil.url,i=null===k.receptor.imagen_perfil?a.imagen_predeterminada:a.servidor+k.receptor.imagen_perfil.url;x([].concat(Object(ae.a)(j),[{position:a.datosSesion.id===k.emisor.id?"right":"left",forwarded:!1,replyButton:!1,reply:null,meeting:null,type:"text",theme:"white",view:"list",title:a.datosSesion.id===k.emisor.id?t:n,titleColor:"#EB7887",text:T,onLoad:function(){console.log("Photo loaded")},status:null,date:new Date,onReplyMessageClick:function(){console.log("onReplyMessageClick")},avatar:a.datosSesion.id===k.emisor.id?o:i}])),f.a.post(a.servidor+"/api/mensajes/",{chat:k.id,enviado_por:a.datosSesion.id===k.emisor.id,contenido:T},{headers:{Authorization:e}}).then((function(e){})).catch((function(e){console.log("Un error ha ocurrido al cargar los mensajes."),console.log(e.response)}));var r={};if(a.datosSesion.id===k.emisor.id){r.noleido_receptor=k.noleido_receptor+1;var c=k;c.noleido_receptor++,N(c)}else{r.noleido_emisor=k.noleido_emisor+1;var s=k;s.noleido_receptor++,N(s)}f.a.put(a.servidor+"/api/chats/"+k.id,r,{headers:{Authorization:e}}).then((function(e){}))}}return Object(n.useEffect)((function(){var e="Bearer "+a.jwt;l(!0),""!==a.jwt&&f.a.get(a.servidor+"/api/chats/",{headers:{Authorization:e}}).then((function(e){var t=e.data.filter((function(e){return e.receptor.id===a.datosSesion.id||e.emisor.id===a.datosSesion.id}));h(t.map((function(e){var t="".concat(e.emisor.nombre," ").concat(e.emisor.apellido),n="".concat(e.receptor.nombre," ").concat(e.receptor.apellido),o=null===e.emisor.imagen_perfil?a.imagen_predeterminada:a.servidor+e.emisor.imagen_perfil.url,i=null===e.receptor.imagen_perfil?a.imagen_predeterminada:a.servidor+e.receptor.imagen_perfil.url,r=e.mensajes.map((function(e){return{position:e.enviado_por?"right":"left",forwarded:!1,replyButton:!1,reply:null,meeting:null,type:"text",theme:"white",view:"list",title:e.enviado_por?t:n,titleColor:"#EB7887",text:e.contenido,onLoad:function(){console.log("Photo loaded")},status:null,date:new Date(e.created_at),onReplyMessageClick:function(){console.log("onReplyMessageClick")},avatar:e.enviado_por?o:i}})),c=null,s=null;return null===e.solicitud?c=null===e.categoria.imagen?a.imagen_predeterminada:a.servidor+e.categoria.imagen.url:s=0===e.solicitud.imagenes.length?a.imagen_predeterminada:a.servidor+e.solicitud.imagenes[0].url,{chat:{id:e.id,avatar:null===e.solicitud?c:s,avatarFlexible:!0,statusColor:"lightgreen",statusColorType:"encircle",alt:"Imagen de perfil",title:null===e.solicitud?e.categoria.nombre:e.solicitud.titulo,date:new Date(e.mensajes[e.mensajes.length-1].created_at),subtitle:e.mensajes[e.mensajes.length-1].contenido,unread:a.datosSesion.id===e.emisor.id?e.noleido_emisor:e.noleido_receptor,mensajes:r,emisor:e.emisor,receptor:e.receptor,noleido_emisor:e.noleido_emisor,noleido_receptor:e.noleido_receptor,categoria:e.categoria,solicitud:e.solicitud,peticion:e.peticion}}}))),l(!1)})).catch((function(e){console.log("Un error ha ocurrido al cargar los chats."),console.log(e.response)}))}),[a.jwt]),Object(n.useEffect)((function(){0!==m.length&&(N(m[0].chat),x(m[0].chat.mensajes))}),[m]),Object(n.useEffect)((function(){null!==k&&k.peticion&&R(!0)}),[k]),o.a.createElement("div",{className:"container"},o.a.createElement("div",Object(p.a)({className:"chat-list"},"className",Y?e.EstiloMovil:e.EstiloPC),o.a.createElement(eo,{top:o.a.createElement("div",null),center:o.a.createElement(zn,{className:"chat-list",onClick:function(e){!function(e){if(!s){l(!0),x(e.mensajes),N(e),Q(!1);var t="Bearer "+a.jwt,n={};a.datosSesion.id===e.emisor.id?n.noleido_emisor=0:n.noleido_receptor=0,f.a.put(a.servidor+"/api/chats/"+e.id,n,{headers:{Authorization:t}}).then((function(e){})),f.a.get(a.servidor+"/api/chats/"+e.id,{headers:{Authorization:t}}).then((function(e){var t="".concat(e.data.emisor.nombre," ").concat(e.data.emisor.apellido),n="".concat(e.data.receptor.nombre," ").concat(e.data.receptor.apellido),o=null===e.data.emisor.imagen_perfil?a.imagen_predeterminada:a.servidor+e.data.emisor.imagen_perfil.url,i=null===e.data.receptor.imagen_perfil?a.imagen_predeterminada:a.servidor+e.data.receptor.imagen_perfil.url,r=e.data.mensajes.map((function(e,a){return{position:e.enviado_por?"right":"left",forwarded:!1,replyButton:!1,reply:null,meeting:null,type:"text",theme:"white",view:"list",title:e.enviado_por?t:n,titleColor:"#EB7887",text:e.contenido,onLoad:function(){console.log("Photo loaded")},status:null,date:new Date(e.created_at),onReplyMessageClick:function(){console.log("onReplyMessageClick")},avatar:e.enviado_por?o:i}}));x(r),R(e.data.peticion),l(!1)})).catch((function(e){console.log("Un error ha ocurrido al cargar los mensajes."),console.log(e.response)}))}}(e)},dataSource:m.map((function(e){return e.chat}))}),bottom:o.a.createElement("div",null)})),o.a.createElement(O.a,{className:e.EstiloMovil,style:{position:Y?"relative":"absolute",left:"0px",top:"70px",zIndex:100},onClick:function(){Q(!Y)}},o.a.createElement(ho.a,null)),o.a.createElement("div",Object(p.a)({className:Y?e.EstiloPC:e.EstiloVacio},"className","right-panel"),s&&o.a.createElement(V.a,null),!s&&0===m.length&&o.a.createElement(ye.a,{className:e.inputAncho,style:{marginTop:"15px"},variant:"outlined",severity:"info"},"No tienes ning\xfan chat a\xfan."),null!==k&&o.a.createElement(Dn,{avatar:k.avatar,alt:"Reactjs",title:k.title,subtitle:k.emisor.id===a.datosSesion.id?"".concat(k.receptor.nombre," ").concat(k.receptor.apellido):"".concat(k.emisor.nombre," ").concat(k.emisor.apellido),date:null,unread:0}),!s&&null!==k&&!Y&&(null===k.solicitud||k.solicitud.tipo?k.receptor.id===a.datosSesion.id:k.emisor.id===a.datosSesion.id)&&o.a.createElement("div",null,o.a.createElement(y.a,{disabled:I,onClick:function(){return P(!0)},color:"primary",className:e.BotonSolicitar,variant:"contained"},"Petici\xf3n de rese\xf1a"),o.a.createElement(y.a,{disabled:I,onClick:function(){return P(!0)},color:"primary",className:e.BotonSolicitarMovil,variant:"contained"},o.a.createElement(fo.a,null))),A&&o.a.createElement(_e,{mensaje:"Esta acci\xf3n solo se debe realizar cuando ya se haya cumplido con el servicio pactado. \xbfEst\xe1 seguro que quiere enviar la petici\xf3n?",funcionAceptar:function(e){if(P(!1),e){var t="Bearer "+a.jwt,n=k.receptor.id,o=k.emisor.id;null!==k.solicitud&&(k.solicitud.tipo||(n=k.emisor.id,o=k.receptor.id)),f.a.post(a.servidor+"/api/notificaciones/",{tipo:2,emisor:n,receptor:o,solicitud:null===k.solicitud?null:k.solicitud.id,datos_notificacion:null===k.categoria?"":String(k.categoria.id+"_"+k.categoria.nombre),leido:!1},{headers:{Authorization:t}}).then((function(e){var t="Bearer "+a.jwt;f.a.put(a.servidor+"/api/chats/"+k.id,{peticion:!0},{headers:{Authorization:t}}).then((function(e){R(!0)})),q(!0)})).catch((function(e){console.log("Error, no se ha podido crear la notificacion.",e.response),console.log("Error, no se ha podido crear la notificacion.")}))}},titulo:"Enviar petici\xf3n de rese\xf1a al cliente"}),o.a.createElement(Ie,{mensaje:"\xa1Petici\xf3n de rese\xf1a enviada!",setabrir:q,abrir:M}),o.a.createElement(Ln,{className:"message-list",lockable:!0,downButtonBadge:10,dataSource:j}),null!==k&&o.a.createElement(Hn,{placeholder:"Escribe tu mensaje.",defaultValue:"",onChange:function(e){H(e.target.value)},multiline:!0,onKeyPress:function(e){return!(!e.shiftKey||13!==e.charCode)||(13===e.charCode?(Z(),e.preventDefault(),!1):void 0)},rightButtons:o.a.createElement(Kn,{color:"white",backgroundColor:"black",text:"Enviar",onClick:function(){Z()}})})))},vo=a(181),go=Object(m.a)(vo);var Eo=function(){var e=Object(n.useContext)(G).state,t=Object(n.useState)(!1),a=Object(c.a)(t,2),i=a[0],r=a[1];return Object(n.useEffect)((function(){r(!0)}),[]),o.a.createElement("div",{className:"App",style:{height:"auto"}},o.a.createElement(d.a,{theme:go},o.a.createElement(s.a,null,o.a.createElement($,null),o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,null),o.a.createElement("div",{style:{minHeight:"calc(100vh - 130px)"},className:"Fondo"},o.a.createElement(l.d,null,o.a.createElement(l.b,{exact:!0,path:e.ruta+"/"},o.a.createElement(Ve,{tipo:!0})),o.a.createElement(l.b,{path:e.ruta+"/crear-publicacion"},i&&e.datosSesion.tipo<2?o.a.createElement(l.a,{to:"/"}):o.a.createElement(xt,{modificar:!1,tipoPublicacion:!0})),o.a.createElement(l.b,{path:e.ruta+"/solicitar-servicio"},i&&0===e.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(xt,{modificar:!1,tipoPublicacion:!1})),o.a.createElement(l.b,{path:e.ruta+"/modificar-publicacion/:id"},i&&e.datosSesion.tipo<0?o.a.createElement(l.a,{to:"/"}):o.a.createElement(xt,{modificar:!0,tipoPublicacion:!0})),o.a.createElement(l.b,{path:e.ruta+"/modificar-solicitud-servicio/:id"},i&&0===e.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(xt,{modificar:!0,tipoPublicacion:!1})),o.a.createElement(l.b,{path:e.ruta+"/publicaciones/:id"},o.a.createElement(Te,null)),o.a.createElement(l.b,{path:e.ruta+"/registrar"},i&&0!==e.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(ca,{registrar:!0})),o.a.createElement(l.b,{path:e.ruta+"/modificar-usuario"},i&&0===e.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(ca,{registrar:!1})),o.a.createElement(l.b,{path:e.ruta+"/publicacion/:id"},o.a.createElement(bt,null)),o.a.createElement(l.b,{path:e.ruta+"/mis-publicaciones"},i&&e.datosSesion.tipo<2?o.a.createElement(l.a,{to:"/"}):o.a.createElement(la,{tipoPublicacion:!0})),o.a.createElement(l.b,{path:e.ruta+"/mis-servicios-solicitados"},i&&0===e.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(la,{tipoPublicacion:!1})),o.a.createElement(l.b,{path:e.ruta+"/modificar-proveedor"},i&&e.datosSesion.tipo<2?o.a.createElement(l.a,{to:"/"}):o.a.createElement(yt,null)),o.a.createElement(l.b,{path:e.ruta+"/verificar-mi-identidad"},i&&e.datosSesion.tipo<2?o.a.createElement(l.a,{to:"/"}):o.a.createElement(va,null)),o.a.createElement(l.b,{path:e.ruta+"/verificar-identidad"},i&&3!==e.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(Nt,null)),o.a.createElement(l.b,{path:e.ruta+"/gestionar-reportes"},i&&3!==e.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(ra,null)),o.a.createElement(l.b,{path:e.ruta+"/perfil-proveedor/:id"},o.a.createElement(Ot,null)),o.a.createElement(l.b,{path:e.ruta+"/notificaciones"},i&&0===e.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(Sa,null)),o.a.createElement(l.b,{path:e.ruta+"/mis-chats"},i&&0===e.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(bo,{state:e})),o.a.createElement(l.b,{path:e.ruta+"/preguntas-frecuentes"},o.a.createElement(fa,null)),o.a.createElement(l.b,{path:e.ruta+"/sobre-nosotros"},o.a.createElement(ba,null))))),o.a.createElement(te,null))))},jo=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function yo(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function Oo(){var e=Object(n.useContext)(G);e.state,e.dispatch;return o.a.createElement(Y,null,o.a.createElement(Eo,null))}r.a.render(o.a.createElement(Oo,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/App-Servicios",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/App-Servicios","/service-worker.js");jo?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):yo(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):yo(t,e)}))}}()}},[[200,1,2]]]);
//# sourceMappingURL=main.c8f22f60.chunk.js.map