(this.webpackJsonpproject=this.webpackJsonpproject||[]).push([[0],{187:function(e){e.exports=JSON.parse('{"typography":{"fontFamily":"[\'Century Gothic\',\'Roboto\',\'Arial\',\'sans-serif\']"},"palette":{"common":{"black":"#000","white":"#fff"},"background":{"paper":"rgba(213, 209, 209, 1)","default":"rgba(174, 168, 179, 1)"},"primary":{"light":"rgba(159, 218, 90, 1)","main":"rgba(159, 218, 90, 1)","dark":"rgba(159, 218, 90, 1)","contrastText":"rgba(0, 0, 0, 1)"},"secondary":{"light":"rgba(106, 190, 7, 1)","main":"rgba(106, 190, 7, 1)","dark":"rgba(106, 190, 7, 1)","contrastText":"rgba(0, 0, 0, 1)"},"error":{"light":"rgba(218, 44, 32, 1)","main":"rgba(218, 44, 32, 1)","dark":"rgba(218, 44, 32, 1)","contrastText":"rgba(0, 0, 0, 1)"},"text":{"primary":"rgba(0, 0, 0, 1)","secondary":"rgba(0, 0, 0, 0.6)","disabled":"rgba(0, 0, 0, 0.38)","hint":"rgba(0, 0, 0, 0.38)"}}}')},206:function(e,t,a){e.exports=a(339)},211:function(e,t,a){},212:function(e,t,a){},242:function(e,t,a){},243:function(e,t,a){},244:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},324:function(e,t,a){},325:function(e,t,a){},326:function(e,t,a){},327:function(e,t,a){},328:function(e,t,a){},329:function(e,t,a){},330:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){},333:function(e,t,a){},334:function(e,t,a){},335:function(e,t,a){},336:function(e,t,a){e.exports=a.p+"static/media/Miniatura.f4e4e06b.png"},337:function(e){e.exports=JSON.parse("{}")},338:function(e){e.exports=JSON.parse("{}")},339:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(22),r=a.n(i),c=(a(211),a(3)),s=(a(212),a(12)),l=a(27),u=a(455),d=a(23),m=a(7),p=a.n(m),h=a(410),f=a(411),b=a(62),v=a(465),g=a(387),E=a(394),j=a(193),y=a(412),O=a(189),S=a(407),x=a(416),C=a(413),k=a(414),N=a(415),w=a(417),_=a(418),A=a(419),P=a(420),B=a(156),M=a.n(B),D=a(123),z=a(386),F=a(383),R=Object(F.a)((function(e){return{mostrarFlex:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",padding:10},fondo:{display:"flex",justifyContent:"center",alignItems:"center",flexWrap:"wrap",padding:10,minHeight:"calc(100vh - 130px)"},proveedorSticky:{display:"scroll",position:"sticky",top:10,flexWrap:"wrap",marginBottom:10,marginTop:10},margenArriba:{marginTop:10},padding:{padding:20},padding2:{padding:10},filaPublicacion:{padding:10,marginTop:10,background:"rgba(214, 215, 204, 100)"},imagenPublicacion:{borderRadius:"6px",objectFit:"cover",border:"1px solid #000",width:170,height:170,margin:"auto",marginBottom:15,marginTop:15},gridRegistro:{maxWidth:550,padding:20,marginBottom:10},inputAncho:{width:"100%"},papelFondo:{border:"1px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),backgroundColor:"#d7d6d9"},pantallaMedia:{maxWidth:800,minWidth:360},botonFijo:{display:"scroll",position:"fixed",left:"50%",top:"calc(100% - 80px)",transform:"translate(-50%, -50%)",zIndex:100},button:{textTransform:"none"},margenAuto:{margin:"auto"},reporte:{padding:10,marginTop:10},botonesNav:{textDecoration:"none",color:e.palette.secondary.main,display:"inline","@media (max-width:1075px)":{display:"none"}},EstiloMovil:{display:"none","@media (max-width:1075px)":{display:"inline"}},EstiloPC:{display:"inline","@media (max-width:1075px)":{display:"none"}},EstiloLink:{textDecoration:"none",color:e.palette.secondary.contrastText},EstiloVacio:{},Categoria:{width:100,height:100,padding:0,margin:"auto",paddingTop:20},BotonSolicitar:{display:"inline","@media (max-width:1075px)":{display:"none"},position:"absolute",left:"90%",top:"35px",transform:"translate(-70%, -50%)",zIndex:1e3,width:"195px"},BotonSolicitarMovil:{display:"none","@media (max-width:1075px)":{display:"inline"},position:"absolute",left:"90%",top:"35px",transform:"translate(-70%, -50%)",zIndex:1e3}}})),q=a(19),I={servidor:"https://prueba-3.herokuapp.com",ruta:"/App-Servicios",jwt:"",publico:!1,guardar:!1,imagen_predeterminada:"/App-Servicios/Icono4.png",datosSesion:{apellido:"",blocked:"",confirmed:!1,created_at:"",descripcion:"",dni:"",email:"",estado:!1,fecha_creacion:"",id:null,mostrar_telefono:!1,nombre:"",permiso:0,provider:"local",role:{id:1,name:"Authenticated",description:"Default role given to authenticated user.",type:"authenticated"},telefono:"",tipo:0,ubicacion:"",updated_at:"",username:"",identidad_verificada:!1,imagenes_dni:[]}},U=function(e,t){var a=t.value;switch(t.type){case"setDatos":return Object(q.a)(Object(q.a)({},e),{},{datosSesion:a});case"setJwt":return Object(q.a)(Object(q.a)({},e),{},{jwt:a});case"setGuardar":return Object(q.a)(Object(q.a)({},e),{},{guardar:a});case"setPublico":return Object(q.a)(Object(q.a)({},e),{},{publico:a});default:return Object(q.a)({},e)}},L=Object(n.createContext)(I);function T(e){var t=e.children,a=Object(n.useReducer)(U,I),i=Object(c.a)(a,2),r=i[0],s=i[1];return o.a.createElement(L.Provider,{value:{state:r,dispatch:s}},t)}function V(e){var t=e.tipo,a=R(),i=Object(n.useState)([]),r=Object(c.a)(i,2),l=r[0],u=r[1],d=Object(n.useState)(!1),m=Object(c.a)(d,2),h=m[0],f=m[1],E=Object(n.useContext)(L),y=E.state;E.dispatch;return Object(n.useEffect)((function(){""===y.jwt&&!0!==y.publico||(f(!0),p.a.get(y.servidor+"/api/categorias").then((function(e){u(e.data),f(!1)})).catch((function(e){alert("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)})))}),[y.jwt,y.publico]),o.a.createElement("div",{className:a.fondo},o.a.createElement(D.a,{elevation:3,className:"Fondo",style:{width:"85%"}},o.a.createElement(b.a,{component:"h3",variant:"h3",align:"center"},"Servia"),o.a.createElement(b.a,{component:"h4",variant:"h5",align:"center"},t?"\xa1Encuentra tu servicio ideal!":"\xa1Contacta con personas que buscan tu ayuda!"),h&&o.a.createElement(z.a,{style:{margin:"15px"}}),o.a.createElement("hr",null),o.a.createElement(g.a,{container:!0,spacing:5,justify:"space-around",alignItems:"center"},l.map((function(e,t){return o.a.createElement(g.a,{item:!0,sm:4,md:3,lg:2,key:t,align:"center"},o.a.createElement(s.b,{to:y.ruta+"/publicaciones/"+e.id,className:a.EstiloLink},o.a.createElement(b.a,{align:"center"},e.nombre),o.a.createElement(j.a,null,o.a.createElement(v.a,{style:{width:"100px",height:"100px"},src:y.servidor+e.imagen.formats.thumbnail.url,color:"secondary",fontSize:"inherit"}))))}))),o.a.createElement("hr",null),h&&o.a.createElement("br",null)))}var H=a(459),W=a(466),J=a(391),K=a(392),G=a(393),Y=a(341),Q=a(397),Z=a(400),$=a(390),X=a(395),ee=a(396),te=a(398),ae=a(399),ne=a(458),oe=a(472);function ie(e){var t=e.valor,a=e.clickeable,n=e.cambiarValor,i=R();return o.a.createElement("div",{className:i.mostrarFlex},o.a.createElement(oe.a,{name:"half-rating",onChange:n,readOnly:!a,value:t,precision:.5}))}var re=a(463);function ce(e){return o.a.createElement(ne.a,Object.assign({elevation:6,variant:"filled"},e))}function se(e){var t=e.mensaje,a=e.setabrir,n=e.abrir,i=(R(),function(e,t){"clickaway"!==t&&a(!1)});return o.a.createElement("div",null,o.a.createElement(g.a,{container:!0},o.a.createElement(re.a,{open:n,autoHideDuration:4e3,onClose:i},o.a.createElement(ce,{onClose:i,severity:"success"},t))))}function le(e){var t=e.esDePerfil,a=e.datosPerfil,i=R(),r=Object(n.useContext)(L),l=r.state,u=(r.dispatch,Object(n.useState)([])),d=Object(c.a)(u,2),m=d[0],h=d[1],f=Object(n.useState)(!1),y=Object(c.a)(f,2),O=y[0],S=y[1],x=Object(n.useState)({id:null,descripcion:"",titulo:"",identidad_verificada:!1,telefono:"",mostrar_telefono:!1,servicios:[],pausado:!1,bloqueado:!1}),C=Object(c.a)(x,2),k=C[0],N=C[1];return Object(n.useEffect)((function(){""===l.jwt&&!0!==l.publico||null!==a&&(N(a),function(e){var t=e.servicios.map((function(e){return e.categoria})),a="";t.map((function(e){a+="id_in="+e+"&"})),""!==a&&p.a.get(l.servidor+"/api/categorias?"+a).then((function(e){h(e.data)})).catch((function(e){alert("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)}))}(a)),console.log("Datos: ",a)}),[a]),o.a.createElement("div",{className:i.proveedorSticky},o.a.createElement(D.a,{elevation:5},o.a.createElement(g.a,{className:i.padding,container:!0,direction:"row",justify:"space-between",alignItems:"center"},o.a.createElement(g.a,{item:!0,xs:12,className:t?i.EstiloPC:i.EstiloVacio},o.a.createElement(v.a,{alt:"Perfil",src:null!==k.imagen_perfil?l.servidor+k.imagen_perfil:l.imagen_predeterminada,className:i.imagenPublicacion})),o.a.createElement(g.a,{item:!0,xs:12,hidden:t},o.a.createElement(b.a,{variant:"h5",component:"h3",align:"center"},o.a.createElement(s.b,{to:l.ruta+"/perfil-proveedor/"+k.id,className:i.EstiloLink},k.titulo,o.a.createElement(H.a,{xlDown:!k.identidad_verificada},o.a.createElement(W.a,{title:"Usuario verificado"},o.a.createElement(j.a,null,o.a.createElement($.a,{color:"primary"}))))))),o.a.createElement(g.a,{item:!0,xs:12,hidden:t},k.pausado&&o.a.createElement(ne.a,{className:i.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"warning"},"Este proveedor ha pausado sus servicios."),k.bloqueado&&o.a.createElement(ne.a,{className:i.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"error"},"Este proveedor se encuentra bloqueado.")),o.a.createElement(g.a,{item:!0,xs:12,hidden:t},o.a.createElement(J.a,null),o.a.createElement(b.a,{variant:"body1",component:"p",align:"justify"},k.descripcion)),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(J.a,null),o.a.createElement(K.a,{component:"nav","aria-labelledby":"nested-list-subheader",subheader:o.a.createElement(G.a,{component:"div",id:"nested-list-subheader"},"Servicios ofrecidos")},o.a.createElement(J.a,null),m.map((function(e,t){return o.a.createElement(ue,{key:t,categoria:e,DatosPerfil:k})})),o.a.createElement(J.a,null))),o.a.createElement(H.a,{xlDown:!k.mostrar_telefono},0!==k.telefono.length&&o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement("a",{className:i.EstiloLink,href:"tel:"+k.telefono},o.a.createElement(E.a,{startIcon:o.a.createElement(X.a,null)},k.telefono)),o.a.createElement(W.a,{title:"Copiar"},o.a.createElement(j.a,{onClick:function(){return function(e){var t=document.createElement("input");t.setAttribute("value",e),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),S(!0)}(k.telefono)}},o.a.createElement(ee.a,null))))))),o.a.createElement(se,{mensaje:"Copiado al portapapeles",abrir:O,setabrir:S}))}function ue(e){var t=e.categoria,a=e.DatosPerfil,i=(R(),Object(n.useState)(!0)),r=Object(c.a)(i,2),s=r[0],l=r[1];return o.a.createElement("div",null,o.a.createElement(Y.a,{button:!0,onClick:function(){l(!s)}},o.a.createElement(Q.a,{primary:t.nombre}),s?o.a.createElement(te.a,null):o.a.createElement(ae.a,null)),o.a.createElement(Z.a,{in:s,timeout:"auto",unmountOnExit:!0},o.a.createElement(K.a,{component:"div",disablePadding:!0},o.a.createElement(J.a,null),a.servicios.map((function(e,a){if(e.categoria===t.id)return o.a.createElement(b.a,{key:a,variant:"h6",component:"h5",align:"left"},e.nombre)})),o.a.createElement(J.a,null))))}var de=a(464),me=a(155),pe=a.n(me),he=a(105),fe=a.n(he),be=a(154),ve=a.n(be),ge=a(24),Ee=a(346),je=a(342),ye=a(194),Oe=a(343),Se=a(401),xe=a(462),Ce=a(467),ke=a(118),Ne=a.n(ke);function we(e){var t=e.esDePerfil,a=e.solicitud,i=(e.abrirAlerta,R()),r=Object(n.useContext)(L),s=r.state,l=(r.dispatch,Object(n.useState)(!1)),u=Object(c.a)(l,2),d=u[0],m=u[1],h=Object(n.useState)([{id:null,nombre:"",tipo:!1}]),f=Object(c.a)(h,2),v=f[0],g=f[1],j=Object(n.useState)([]),y=Object(c.a)(j,2),O=y[0],S=y[1],x=Object(n.useState)(""),C=Object(c.a)(x,2),k=C[0],N=C[1],w=Object(n.useState)(!1),_=Object(c.a)(w,2),A=_[0],P=_[1],B=Object(n.useState)(!1),M=Object(c.a)(B,2),D=M[0],F=M[1],q=Object(n.useState)(!1),I=Object(c.a)(q,2),U=I[0],T=I[1],V=function(){S([]),m(!1)};function J(e){var n="Bearer "+s.jwt;if(0!==O.length){var o=new Date,i=e[0];i.descripcion+="##Nuevo reporte (Motivos:"+O.map((function(e){return" "+e.nombre}))+") del d\xeda "+o.getDate()+"/"+(o.getMonth()+1)+"/"+o.getFullYear()+":"+k.length!==0?k:"El usuario no ha proporcionado informaci\xf3n adicional.",0!==e.length?p.a.put(s.servidor+"/api/reportes/"+i.id,{descripcion:i.descripcion},{headers:{Authorization:n}}).then((function(e){console.log("Se modifica el reporte",e.data),T(!1),V(),P(!0),F(!1),S([]),N("")})).catch((function(e){alert("Un error ha ocurrido al cargar las motivos."),console.log(e.response)})):p.a.post(s.servidor+"/api/reportes",{motivos:O.map((function(e){return e.id})),Solicitud_id:t?null:a.id,Usuario_id:t?a.id:a.Usuario_id.id,accion:!1,estado:0,descripcion:k},{headers:{Authorization:n}}).then((function(e){console.log(e.data),T(!1),V(),P(!0),F(!1),S([]),N("")})).catch((function(e){alert("Un error ha ocurrido al cargar las motivos."),console.log(e.response)}))}else F(!1),T(!0)}return Object(n.useEffect)((function(){""===s.jwt&&!0!==s.publico||p.a.get(s.servidor+"/api/motivos?tipo="+t).then((function(e){g(e.data)})).catch((function(e){alert("Un error ha ocurrido al cargar las motivos."),console.log(e.response)}))}),[s.jwt,s.publico]),Object(n.useEffect)((function(){console.log(a)}),[a]),o.a.createElement("div",null,A&&o.a.createElement(se,{mensaje:"\xa1Se ha enviado su reporte correctamente!",abrir:A,setabrir:P}),o.a.createElement(W.a,{title:t?"Reportar proveedor de servicios":"Reportar publicaci\xf3n"},o.a.createElement(E.a,{onClick:function(){m(!0)}},o.a.createElement(Ne.a,null))),o.a.createElement(Ee.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:i.mostrarFlex,open:d,onClose:V,closeAfterTransition:!0,BackdropComponent:je.a,BackdropProps:{timeout:500}},o.a.createElement(ye.a,{in:d},o.a.createElement("div",{className:i.papelFondo},o.a.createElement(b.a,{variant:"h5",component:"h2",align:"center"},"Seleccione los motivos:"),o.a.createElement(Oe.a,{required:!0},v.map((function(e,t){return o.a.createElement(Se.a,{key:t,control:o.a.createElement(xe.a,{variant:"error",onChange:function(){!function(e){!0===U&&T(!1);var t=O.some((function(t){return t.id===e.id}));S(t?O.filter((function(t){return t.id!==e.id})):function(t){return[].concat(Object(ge.a)(t),[{id:e.id,nombre:e.nombre}])})}(e)}}),label:e.nombre})}))),o.a.createElement(H.a,{xlDown:!U||D},o.a.createElement(b.a,{color:"error"},"Debe seleccionar un motivo.")),o.a.createElement(Ce.a,{className:i.inputAncho,onChange:function(e){N(e.target.value)},value:k,id:"filled-basic",label:"Informacion adicional",variant:"filled",multiline:!0}),o.a.createElement("br",null),D&&o.a.createElement(z.a,{color:"secondary"}),o.a.createElement(E.a,{disabled:D,className:i.inputAncho,style:{marginTop:10},size:"large",variant:"contained",color:"primary",onClick:function(){F(!0);var e="Bearer "+s.jwt;console.log(a),t||null===a.id||p.a.get(s.servidor+"/api/reportes?Solicitud_id="+a.id+"&estado=0",{headers:{Authorization:e}}).then((function(e){console.log(e.data),J(e.data)})).catch((function(e){alert("Un error ha ocurrido al cargar las motivos."),console.log(e.response)})),t&&null!==a.id&&p.a.get(s.servidor+"/api/reportes?Usuario_id="+a.id+"&estado=0",{headers:{Authorization:e}}).then((function(e){console.log(e.data),J(e.data.filter((function(e){return null===e.Solicitud_id})))})).catch((function(e){alert("Un error ha ocurrido al cargar las motivos."),console.log(e.response)}))}},"Enviar")))))}function _e(e){var t=e.esDePerfil,a=e.datosPagina,i=(e.abrirAlerta,R()),r=Object(n.useContext)(L),s=r.state,l=(r.dispatch,Object(n.useState)([])),u=Object(c.a)(l,2),d=u[0],m=u[1],p=Object(n.useState)({id:null,titulo:"",precio:"",categoria:"",servicio:"",estrella:0,descripcion:"",imagenes:[""],pausado:!1,bloqueado:!1,Usuario_id:null,imagen_perfil:""}),h=Object(c.a)(p,2),f=h[0],E=h[1];return Object(n.useEffect)((function(){if((""!==s.jwt||!0===s.publico)&&null!==a){var e=a.imagenes.map((function(e){return{original:s.servidor+e.url,thumbnail:s.servidor+e.url}}));m(e),E({id:a.id,titulo:a.titulo,categoria:a.categoria,servicio:a.servicio,estrella:0,descripcion:a.descripcion,precio_estimado:a.precio_estimado,tipo:a.tipo,pausado:a.pausado,imagenes:a.imagenes,bloqueado:a.bloqueado,Usuario_id:a.Usuario_id,imagen_perfil:a.imagen_perfil})}}),[a,s.jwt,s.publico]),o.a.createElement("div",{className:i.mostrarFlex},o.a.createElement(D.a,{elevation:5},o.a.createElement(g.a,{className:i.padding,container:!0,direction:"row",justify:"space-between",alignItems:"center"},f.pausado&&o.a.createElement(ne.a,{className:i.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"warning"},"perfil"===f.precio_estimado?"Este proveedor ha pausado sus servicios.":"Esta publicaci\xf3n se encuentra pausada."),f.bloqueado&&o.a.createElement(ne.a,{className:i.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"error"},"perfil"===f.precio_estimado?"Este proveedor se encuentra bloqueado.":"Esta publicaci\xf3n se encuentra bloqueada."),o.a.createElement(g.a,{item:!0,lg:12,hidden:!t,align:"center",className:t?i.EstiloMovil:i.EstiloVacio},o.a.createElement(v.a,{alt:"Perfil",src:""!==f.imagen_perfil?s.servidor+f.imagen_perfil:s.imagen_predeterminada,className:i.imagenPublicacion})),o.a.createElement(g.a,{item:!0,lg:4,md:4,sm:12,hidden:t},o.a.createElement(b.a,{variant:"h6",component:"h3",align:"left"},f.tipo?"Precio estimado:":"Presupuesto:"," $",f.precio_estimado)),o.a.createElement(g.a,{hidden:t,item:!0,lg:7,md:7,sm:11,align:"right"},o.a.createElement("div",{align:"right"},o.a.createElement(de.a,{separator:o.a.createElement(pe.a,{fontSize:"small"}),"aria-label":"breadcrumb"},o.a.createElement(b.a,{color:"inherit"},f.categoria),a.tipo&&o.a.createElement(b.a,{color:"inherit"},f.servicio)))),!1===s.publico&&!t&&!f.bloqueado&&o.a.createElement(g.a,{item:!0,lg:1,md:1,sm:1},o.a.createElement(we,{esDePerfil:t,solicitud:f})),o.a.createElement(g.a,{item:!0,xs:t?11:12,sm:t?11:12},o.a.createElement(b.a,{variant:"h5",component:"h1",align:"left"},f.titulo,t&&o.a.createElement(H.a,{xlDown:!f.identidad_verificada},o.a.createElement(W.a,{title:"Usuario verificado"},o.a.createElement(j.a,null,o.a.createElement(fe.a,{color:"primary"})))))),!1===s.publico&&t&&!f.bloqueado&&o.a.createElement(g.a,{item:!0,lg:1,md:1,sm:1},o.a.createElement(we,{esDePerfil:t,solicitud:f})),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"body1",component:"p",align:"justify"},f.descripcion)),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(ve.a,{items:0===d.length?[{original:s.imagen_predeterminada,thumbnail:s.imagen_predeterminada}]:d})))))}var Ae=a(469),Pe=a(35);function Be(e){var t=e.datos,a=R(),i=Object(n.useContext)(L),r=i.state,s=(i.dispatch,Object(n.useState)([])),l=Object(c.a)(s,2),u=l[0],m=l[1],h=Object(n.useState)(0),f=Object(c.a)(h,2),v=f[0],E=f[1];Object(n.useEffect)((function(){(""!==r.jwt||r.publico)&&null!==t.Usuario_id&&p.a.get(r.servidor+"/api/resenas?proveedor="+t.Usuario_id.id+"&servicios="+t.servicio_id).then((function(e){console.log(e.data),m(e.data);var t=0;e.data.map((function(e){t+=e.recomendacion})),E(t/e.data.length)})).catch((function(e){alert("Un error ha ocurrido al buscar la solicitud."),console.log(e.response)}))}),[r.jwt,r.publico,t]);return Object(Pe.b)("spanish",(function(e,t,a){return[["justo ahora","justo ahora"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 d\xeda","en 1 d\xeda"],["hace %s d\xedas","en %s d\xedas"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 a\xf1o","en 1 a\xf1o"],["hace %s a\xf1os","en %s a\xf1os"]][t]})),o.a.createElement("div",{className:a.mostrarFlex},o.a.createElement(D.a,{elevation:5},o.a.createElement(g.a,{className:a.padding,container:!0,direction:"row",justify:"flex-start",alignItems:"center"},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"h4",component:"h2",align:"left"},"Rese\xf1as")),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,Object(d.a)({variant:"h5",component:"h2",align:"center"},"align","left"),0!==u.length&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ie,{clickeable:!1,valor:v})," ","".concat(v," en base a ").concat(u.length," rese\xf1as hechas por otros usuarios.")))),o.a.createElement(g.a,{item:!0,xs:12},0===u.length&&o.a.createElement(ne.a,{className:a.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"info"},"Esta publicaci\xf3n a\xfan no tiene rese\xf1as"),u.map((function(e,t){return o.a.createElement(Me,{opinion:e,key:t})}))))))}function Me(e){var t=e.opinion,a=R();return o.a.createElement(D.a,{variant:"outlined",square:!0},o.a.createElement(g.a,{className:a.padding,container:!0,direction:"row",justify:"space-around",alignItems:"baseline"},o.a.createElement(g.a,{item:!0,xs:6},o.a.createElement(b.a,{variant:"h5",component:"h2",align:"left"},t.titulo)),o.a.createElement(g.a,{item:!0,xs:6},o.a.createElement(ie,{clickeable:!1,valor:t.recomendacion})),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"body1",component:"p",align:"justify"},t.descripcion)),t.servicios.map((function(e,t){return o.a.createElement(g.a,{key:t,item:!0,xs:2,align:"center"},o.a.createElement(Ae.a,{variant:"outlined",label:e.nombre}))})),o.a.createElement(g.a,{item:!0,xs:2,align:"right"},Object(Pe.a)(new Date(t.created_at),"spanish"))))}var De=a(404),ze=a(405),Fe=a(460),Re=a(406),qe=a(121),Ie=a.n(qe),Ue=a(80),Le=a.n(Ue);function Te(e){var t=e.servicio,a=e.agregarSeleccionado,i=R(),r=Object(n.useState)(o.a.createElement("div",null,o.a.createElement(Le.a,null))),s=Object(c.a)(r,2),l=s[0],u=s[1],d=Object(n.useState)(t.seleccionado),m=Object(c.a)(d,2),p=m[0],h=m[1];o.a.useEffect((function(){!0===t.seleccionado?(h(!0),u(o.a.createElement("div",null,o.a.createElement(Ie.a,null)))):(h(!1),u(o.a.createElement("div",null,o.a.createElement(Le.a,null))))}),[]);return o.a.createElement("div",{className:i.mostrarFlex},o.a.createElement(Ae.a,{clickable:!0,color:"primary",label:t.nombre,icon:l,onClick:function(){a(!p),!1===p?(h(!0),u(o.a.createElement("div",null,o.a.createElement(Ie.a,null)))):(h(!1),u(o.a.createElement("div",null,o.a.createElement(Le.a,null))))}}))}function Ve(e){var t=e.fijo,a=e.esDePerfil,i=e.datos,r=R(),s=Object(n.useContext)(L),l=s.state,u=(s.dispatch,o.a.useState(!1)),d=Object(c.a)(u,2),m=d[0],h=d[1],f=o.a.useState(!1),j=Object(c.a)(f,2),y=j[0],O=j[1],x=o.a.useState(""),C=Object(c.a)(x,2),k=C[0],N=C[1],w=o.a.useState(!1),_=Object(c.a)(w,2),A=_[0],P=_[1],B=Object(n.useState)({}),M=Object(c.a)(B,2),D=M[0],F=M[1],q=Object(n.useState)([]),I=Object(c.a)(q,2),U=I[0],T=I[1];return Object(n.useEffect)((function(){if(a){var e={},t=[];i.servicios.map((function(a){e.hasOwnProperty(a.categoria)||(e[a.categoria]=a.categoria,t.push(a.categoria))}));var n="";t.map((function(e){null!==e&&(n+="id_in="+e+"&")}));var o="Bearer "+l.jwt;0!==t.length&&p.a.get(l.servidor+"/api/categorias?"+n,{headers:{Authorization:o}}).then((function(e){T(e.data)})).catch((function(e){alert("Un error ha ocurrido al cargar los chats."),console.log(e.response)}))}}),[i]),o.a.createElement("div",null,o.a.createElement("div",{className:t?r.botonFijo:r.botonNoF},o.a.createElement(E.a,{variant:"contained",color:"primary",startIcon:o.a.createElement(Re.a,null),onClick:function(){h(!0)}},"Contactar")),o.a.createElement(Ee.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:r.mostrarFlex,open:m,onClose:function(){h(!1)},closeAfterTransition:!0,BackdropComponent:je.a,BackdropProps:{timeout:500}},o.a.createElement(ye.a,{in:m,style:{padding:"15px"}},o.a.createElement("div",{className:r.papelFondo},o.a.createElement("div",{style:{maxWidth:750},className:"Fondo"},o.a.createElement(g.a,{container:!0,direction:"row",justify:"center",spacing:2},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement("div",{align:"center"},o.a.createElement(v.a,{alt:"Perfil",src:null!==i.imagen_perfil?i.imagen_perfil:l.imagen_predeterminada,className:r.imagenPublicacion}))),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"h5",component:"h2",align:"center",className:r.form},i.nombre)),o.a.createElement("form",{onSubmit:function(e){O(!0);var t="Bearer "+l.jwt;if(e.preventDefault(),""!==l.jwt){var n=U.filter((function(e){return e.nombre===D}));p.a.post(l.servidor+"/api/chats/",{noleido_emisor:0,noleido_receptor:1,emisor:l.datosSesion.id,receptor:i.idP,solicitud:i.idS,categoria:a?n[0].id:null,peticion:!1},{headers:{Authorization:t}}).then((function(e){console.log(e.data),p.a.post(l.servidor+"/api/mensajes/",{contenido:k,enviado_por:!0,chat:e.data.id},{headers:{Authorization:t}}).then((function(e){console.log(e.data),P(!0),h(!1),O(!1)})).catch((function(e){alert("Un error ha ocurrido al cargar los chats."),console.log(e.response)}))})).catch((function(e){alert("Un error ha ocurrido al cargar los chats."),console.log(e.response)}))}else alert("Debes iniciar sesi\xf3n para poder contactar al proveedor."),O(!1)},className:r.inputAncho},o.a.createElement(De.a,{color:"primary",fullWidth:!0},a&&o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(ze.a,{id:"categoria",variant:"filled"},"Categor\xeda"),o.a.createElement(Fe.a,{value:D,name:"categoria",onChange:function(e){F(e.target.value)},id:"categoria",labelId:"categoria",variant:"filled",label:"Categor\xeda",className:r.inputAncho,required:!0},U.map((function(e,t){return o.a.createElement(S.a,{key:t,value:e.nombre},e.nombre)})))),o.a.createElement("br",null),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(Ce.a,{onChange:function(e){N(e.target.value)},className:r.inputAncho,id:"filled-basic",label:"Escribe tu mensaje",variant:"filled",required:!0,multiline:!0})),o.a.createElement(g.a,{item:!0,xs:12,align:"center"},o.a.createElement("br",null),y&&o.a.createElement(z.a,null),o.a.createElement(E.a,{disabled:y,variant:"contained",color:"primary",type:"submit"},"Contactar proveedor"))))))))),o.a.createElement(se,{mensaje:"\xa1Mensaje enviado con \xe9xito!",setabrir:P,abrir:A}))}var He=a(408);function We(){R();var e=Object(n.useContext)(L),t=e.state,a=(e.dispatch,Object(l.h)().id),i=Object(n.useState)({id:null,descripcion:"",nombre:"",apellido:"",identidad_verificada:!1,telefono:"",mostrar_telefono:!1,pausado:!1,bloqueado:!1,servicios:[],imagen_perfil:""}),r=Object(c.a)(i,2),s=r[0],u=r[1],d=Object(n.useState)({id:null,descripcion:"",titulo:"",precio_estimado:0,tipo:!1,pausado:!1,bloqueado:!1,imagenes:[],Usuario_id:null}),m=Object(c.a)(d,2),h=m[0],f=m[1];return Object(n.useEffect)((function(){""===t.jwt&&!0!==t.publico||p.a.get(t.servidor+"/api/solicitud/"+a).then((function(e){!function(e){f({id:e.id,titulo:e.titulo,descripcion:e.descripcion,precio_estimado:e.precio_estimado,tipo:e.tipo,pausado:e.pausado,imagenes:e.imagenes,categoria:e.Categoria_id.nombre,servicio:e.tipo?e.Servicio_id.nombre:null,Usuario_id:e.Usuario_id,bloqueado:e.bloqueado,servicio_id:e.tipo?e.Servicio_id.id:null});var a=""!==t.jwt?"Bearer "+t.jwt:"";p.a.get(t.servidor+"/users/"+e.Usuario_id.id,{headers:{Authorization:a}}).then((function(e){u({id:e.data.id,descripcion:e.data.descripcion,titulo:"".concat(e.data.nombre," ").concat(e.data.apellido),identidad_verificada:e.data.identidad_verificada,telefono:e.data.telefono,mostrar_telefono:e.data.mostrar_telefono,servicios:e.data.servicios,bloqueado:e.data.bloqueado,pausado:e.data.estado,imagen_perfil:null===e.data.imagen_perfil?null:e.data.imagen_perfil.url})})).catch((function(e){alert("Un error ha ocurrido al buscar el usuario."),console.log(e.response)}))}(e.data)})).catch((function(e){alert("Un error ha ocurrido al buscar la solicitud."),console.log(e.response)}))}),[t.jwt,t.publico]),o.a.createElement(He.a,{style:{width:"95%"}},o.a.createElement(g.a,{container:!0,direction:"row",justify:"center",alignItems:"stretch"},o.a.createElement(g.a,{item:!0,md:8,xs:12},o.a.createElement(_e,{esDePerfil:!1,datosPagina:h}),h.tipo&&o.a.createElement(Be,{datos:h})),h.tipo&&o.a.createElement(g.a,{item:!0,md:4,xs:12},o.a.createElement(le,{esDePerfil:!1,datosPerfil:s})),s.id!==t.datosSesion.id&&!h.pausado&&!h.bloqueado&&!s.pausado&&!s.bloqueado&&(!!h.tipo||1!==t.datosSesion.tipo)&&o.a.createElement(Ve,{fijo:!0,esDePerfil:!1,datos:{idS:h.id,idP:s.id,nombre:s.titulo,imagen_perfil:s.imagen_perfil}})))}var Je=a(409);function Ke(e){var t=e.mensaje,a=R(),i=Object(n.useContext)(L),r=i.state,l=i.dispatch,u=Object(n.useState)(!1),m=Object(c.a)(u,2),h=m[0],f=m[1],v=Object(n.useState)(!1),j=Object(c.a)(v,2),y=j[0],O=j[1],S=Object(n.useState)(""),x=Object(c.a)(S,2),C=x[0],k=x[1],N=Object(n.useState)(!1),w=Object(c.a)(N,2),_=w[0],A=w[1],P=Object(n.useState)({email:"",contrasena:""}),B=Object(c.a)(P,2),M=B[0],D=B[1],F=function(){f(!1)},I=function(e){var t=e.target.value,a=e.target.name;D(Object(q.a)(Object(q.a)({},M),{},Object(d.a)({},a,t)))};return o.a.createElement("div",null,o.a.createElement(Je.a,{href:"#",style:{color:"black",padding:"10px"},onClick:function(){f(!0)}},t),o.a.createElement(Ee.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:a.mostrarFlex,open:h,onClose:F,closeAfterTransition:!0,BackdropComponent:je.a,BackdropProps:{timeout:500}},o.a.createElement(ye.a,{in:h},o.a.createElement("div",{className:a.papelFondo},o.a.createElement("div",{className:"Fondo",style:{maxWidth:350}},o.a.createElement(g.a,{container:!0,direction:"row",justify:"center",spacing:2},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"h5",component:"h1",align:"center",className:a.form},_?"Recuperar contrase\xf1a":"Iniciar Sesi\xf3n")),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(Ce.a,{onChange:I,name:"email",value:M.email,className:a.inputAncho,id:"filled-basic",label:"Correo electr\xf3nico",variant:"filled",required:!0})),o.a.createElement(J.a,null),o.a.createElement(g.a,{item:!0,xs:12},!_&&o.a.createElement(Ce.a,{onChange:I,name:"contrasena",value:M.contrasena,required:!0,type:"password",label:"Contrase\xf1a",variant:"filled",style:{marginTop:"15px"},className:a.inputAncho})),o.a.createElement(H.a,{xlDown:""===t},o.a.createElement(b.a,{color:"error"},C)),o.a.createElement(g.a,{item:!0,xs:12},!_&&o.a.createElement(Je.a,{color:"secondary",className:a.margenArriba,href:"#",onClick:function(){A(!0)}},"Olvid\xe9 mi contrase\xf1a")),o.a.createElement(g.a,{item:!0,xs:12},_&&o.a.createElement(Je.a,{className:a.margenArriba,href:"#",onClick:function(){A(!1)}},"Cancelar")),o.a.createElement("div",{className:a.inputAncho,hidden:!y},o.a.createElement(z.a,null)),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(E.a,{onClick:function(){O(!0),_?(console.log(M),p.a.post(r.servidor+"/auth/forgot-password",{email:M.email},{headers:{"Content-Type":"application/json"}}).then((function(e){console.log("Your user received an email",e.data)})).catch((function(e){console.log("An error occurred:",e.response)}))):p.a.post(r.servidor+"/auth/local/",{identifier:M.email,password:M.contrasena}).then((function(e){console.log("Se ha iniciado sesion correctamente."),l({type:"setDatos",value:e.data.user}),l({type:"setJwt",value:e.data.jwt}),l({type:"setPublico",value:!1}),localStorage.setItem("datosLocal",JSON.stringify({jwt:e.data.jwt,datosSesion:e.data.user})),O(!1),f(!1)})).catch((function(e){var t=JSON.parse(e.response.request.response).message[0].messages[0].id;console.log("Error: ",t),"Auth.form.error.invalid"===t&&k("Correo o contrase\xf1a incorrectos"),O(!1)}))},size:"large",variant:"contained",color:"primary"},_?"Recuperar":"Iniciar Sesi\xf3n")),o.a.createElement(J.a,null),o.a.createElement(g.a,{item:!0,xs:12},!_&&o.a.createElement(b.a,{onClick:F,variant:"body1",align:"center"},"\xbfEres nuevo en el sitio? ",o.a.createElement(s.b,{to:"/registrar"},"Crear cuenta")))))))))}function Ge(e){var t=e.plegarNoti,a=e.notificaciones,i=R(),r=Object(n.useContext)(L),c=r.state;r.dispatch;return o.a.createElement("div",{style:{padding:"0px 15px 0px 15px"}},o.a.createElement(b.a,{align:"center",component:"h5",variant:"h5"},"Notificaciones"),0===a.length&&o.a.createElement(b.a,null,"No tienes nuevas notificaciones"),a.map((function(e,a){return o.a.createElement("div",{key:a},o.a.createElement(S.a,{onClick:t},o.a.createElement(g.a,{container:!0,spacing:1,justify:"center"},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(s.b,{to:c.ruta+"/notificaciones",className:i.EstiloLink},o.a.createElement(b.a,null,0===e.tipo&&(null!==e.solicitud?'Tienes nueva informaci\xf3n con respecto a un reporte hecho a tu publicaci\xf3n "'+e.solicitud.titulo+'"':"Tienes nueva informaci\xf3n sobre un reporte hecho a tu perfil"),1===e.tipo&&(""===e.datos_notificacion?"\xa1Tu solicitud de verificaci\xf3n de identidad ha sido aceptada!":"Tu solicitud de verificaci\xf3n de identidad ha sido rechazada."),2===e.tipo&&"\xa1Tienes una nueva solicitud de rese\xf1a de ".concat(e.emisor.nombre," ").concat(e.emisor.apellido,"!")))))),o.a.createElement(J.a,null))})),o.a.createElement(S.a,{onClick:t},o.a.createElement(s.b,{to:c.ruta+"/notificaciones",className:i.EstiloLink},o.a.createElement(b.a,{color:"secondary"},"Ver todas las notificaciones"))))}function Ye(){var e=Object(n.useContext)(L),t=e.state,a=e.dispatch,i=R(),r=Object(l.g)(),u=Object(n.useState)(null),m=Object(c.a)(u,2),B=m[0],D=m[1],z=Object(n.useState)(null),F=Object(c.a)(z,2),q=F[0],I=F[1],U=Object(n.useState)(null),T=Object(c.a)(U,2),V=T[0],H=T[1],W=Object(n.useState)(!1),J=Object(c.a)(W,2),K=J[0],G=J[1],Y=Object(n.useState)(t.datosSesion.tipo),Q=Object(c.a)(Y,2),Z=Q[0],$=Q[1],X=Object(n.useState)([]),ee=Object(c.a)(X,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(0),oe=Object(c.a)(ne,2),ie=oe[0],re=oe[1];o.a.useEffect((function(){var e=localStorage.getItem("datosLocal")||null,n=JSON.parse(e);if(null!==n){a({type:"setDatos",value:n.datosSesion}),a({type:"setJwt",value:n.jwt});var o="Bearer "+n.jwt;p.a.get(t.servidor+"/users/"+n.datosSesion.id,{headers:{Authorization:o}}).then((function(e){console.log("Se ha iniciado sesion correctamente.",e.data),a({type:"setDatos",value:e.data}),a({type:"setJwt",value:n.jwt}),localStorage.setItem("datosLocal",JSON.stringify({jwt:n.jwt,datosSesion:e.data})),function(e,a){var n="Bearer "+e;p.a.get(t.servidor+"/api/chats/",{headers:{Authorization:n}}).then((function(e){var t=e.data.filter((function(e){return e.receptor.id===a.id||e.emisor.id===a.id})),n=0;t.map((function(e){e.emisor.id===a.id&&(n+=e.noleido_emisor),e.receptor.id===a.id&&(n+=e.noleido_receptor)})),re(n)})).catch((function(e){console.log("Un error ha ocurrido al buscar las notificaciones."),console.log(e.response)}))}(n.jwt,e.data)})).catch((function(e){console.log("Error: ",e.response)})),p.a.get(t.servidor+"/api/notificaciones?receptor="+n.datosSesion.id+"&leido=false",{headers:{Authorization:o}}).then((function(e){console.log(e.data),ae(e.data.reverse())})).catch((function(e){alert("Un error ha ocurrido al buscar las notificaciones."),console.log(e.response)}))}else a({type:"setPublico",value:!0})}),[]),Object(n.useEffect)((function(){$(t.datosSesion.tipo)}),[t.datosSesion.tipo]);var ce=function(){D(null)},se=function(){I(null)},le=function(){H(null)};return o.a.createElement("div",{style:{flexGrow:1}},o.a.createElement(h.a,{position:"relative",style:{padding:"0% 7% 0% 7%"}},o.a.createElement(f.a,null,o.a.createElement(b.a,{style:{flexGrow:1,width:"200px"},component:"h2",variant:"h5"},o.a.createElement(s.b,{to:t.ruta+"/",style:{flexGrow:1,textDecoration:"none",color:"#393939",fontFamily:"Homework",fontSize:50,width:"200px"}},o.a.createElement("div",{style:{display:"flex",width:"200px",alignItems:"center"}},o.a.createElement(v.a,{style:{width:"50px",height:"50px"},src:t.ruta+"/Icono1.png",variant:"square",fontSize:"inherit"}),"Servia"))),o.a.createElement("div",null,o.a.createElement(g.a,{container:!0,justify:"center",alignContent:"center"},o.a.createElement(g.a,{item:!0},o.a.createElement(s.b,{to:t.ruta+"/",className:i.botonesNav},o.a.createElement(E.a,{style:{padding:"20px"}},"Explorar servicios")),o.a.createElement(s.b,{to:t.ruta+"/solicitar-servicio",hidden:1!==Z,className:1===Z?i.botonesNav:i.EstiloVacio},o.a.createElement(E.a,{style:{padding:"20px"}},"Solicitar servicio")),o.a.createElement(s.b,{to:t.ruta+"/mis-servicios-solicitados",hidden:1!==Z,className:1===Z?i.botonesNav:i.EstiloVacio},o.a.createElement(E.a,{style:{padding:"20px"}},"Mis servicios solicitados")),o.a.createElement(s.b,{to:t.ruta+"/mis-publicaciones",hidden:2!==Z,className:2===Z?i.botonesNav:i.EstiloVacio},o.a.createElement(E.a,{style:{padding:"20px"}},"Mis publicaciones")),o.a.createElement(s.b,{to:t.ruta+"/crear-publicacion",hidden:2!==Z,className:2===Z?i.botonesNav:i.EstiloVacio},o.a.createElement(E.a,{style:{padding:"20px"}},"Crear publicaci\xf3n"))),o.a.createElement(g.a,{item:!0,hidden:Z>0},o.a.createElement(E.a,{style:{margin:10,padding:"8px 0px 8px 0px"},variant:"contained",color:"secondary"},o.a.createElement(Ke,{mensaje:"Iniciar sesi\xf3n"})),o.a.createElement(s.b,{to:t.ruta+"/registrar",className:i.EstiloPC,style:{textDecoration:"none",color:"black"}},o.a.createElement(E.a,{variant:"contained",color:"secondary",style:{padding:8}},"Registrar cuenta"))))),o.a.createElement("div",{hidden:0===Z},o.a.createElement(j.a,{color:"inherit",onClick:function(e){G(!0),H(e.currentTarget)}},o.a.createElement(y.a,{badgeContent:te.length,color:"secondary"},o.a.createElement(C.a,null))),o.a.createElement(O.a,{id:"simple-menu",anchorEl:V,keepMounted:!0,open:Boolean(V),onClose:le},K&&o.a.createElement(Ge,{notificaciones:te,plegarNoti:le})),o.a.createElement(s.b,{to:t.ruta+"/mis-chats",style:{color:"black"}},o.a.createElement(j.a,{color:"inherit"},o.a.createElement(y.a,{badgeContent:ie,color:"secondary"},o.a.createElement(k.a,null)))),o.a.createElement(j.a,{edge:"end","aria-label":"account of current user","aria-haspopup":"true",color:"inherit",onClick:function(e){D(e.currentTarget)}},o.a.createElement(N.a,null)),o.a.createElement(O.a,{id:"simple-menu",anchorEl:B,keepMounted:!0,open:Boolean(B),onClose:ce},o.a.createElement(S.a,{onClick:ce},o.a.createElement(s.b,{to:t.ruta+"/modificar-usuario",className:i.EstiloLink},o.a.createElement(x.a,null,o.a.createElement(v.a,{style:{color:"gray",width:"20px",height:"20px"},src:t.ruta+"/usuario_editar.png",variant:"square",fontSize:"small"})),o.a.createElement(b.a,{variant:"inherit"},"Modificar mi perfil"))),o.a.createElement("div",{hidden:2!==Z},o.a.createElement(S.a,{onClick:ce},o.a.createElement(x.a,null,o.a.createElement(w.a,{fontSize:"small"})),o.a.createElement(s.b,{to:t.ruta+"/modificar-proveedor",className:i.EstiloLink},o.a.createElement(b.a,{variant:"inherit"},"Modificar mi perfil de proveedor")))),o.a.createElement("div",{hidden:2!==Z},o.a.createElement(S.a,{onClick:ce},o.a.createElement(x.a,null,o.a.createElement(_.a,{fontSize:"small"})),o.a.createElement(s.b,{to:t.ruta+"/perfil-proveedor/"+t.datosSesion.id,className:i.EstiloLink},o.a.createElement(b.a,{variant:"inherit"},"Ver mi perfil de proveedor")))),o.a.createElement("div",{hidden:2!==Z||!0===t.datosSesion.identidad_verificada},o.a.createElement(S.a,{onClick:ce},o.a.createElement(x.a,null,o.a.createElement(A.a,{fontSize:"small"})),o.a.createElement(s.b,{to:t.ruta+"/verificar-mi-identidad/",className:i.EstiloLink},o.a.createElement(b.a,{variant:"inherit"},"Verificar mi identidad")))),o.a.createElement(S.a,{onClick:function(){D(null),a({type:"setDatos",value:{apellido:"",blocked:"",confirmed:!1,created_at:"",descripcion:"",dni:"",email:"",estado:!1,id:null,mostrar_telefono:!1,nombre:"",permiso:0,provider:"local",role:{id:1,name:"Authenticated",description:"Default role given to authenticated user.",type:"authenticated"},telefono:"",tipo:0,ubicacion:"",updated_at:"",username:"",identidad_verificada:!1}}),a({type:"setJwt",value:""}),a({type:"setPublico",value:!0}),localStorage.setItem("datosLocal",JSON.stringify(null)),r.push(t.ruta+"/")}},o.a.createElement(x.a,null,o.a.createElement(M.a,{fontSize:"small"})),o.a.createElement(b.a,{variant:"inherit"},"Cerrar sesi\xf3n")))),o.a.createElement("div",{className:0===Z?i.EstiloMovil:i.EstiloVacio},o.a.createElement(j.a,{className:i.hambur,onClick:function(e){I(e.currentTarget)},color:"inherit",edge:"end","aria-label":"menu hamburguesa"},o.a.createElement(P.a,null)),o.a.createElement(O.a,{id:"simple-menu",anchorEl:q,keepMounted:!0,open:Boolean(q),onClose:se},o.a.createElement(s.b,{to:t.ruta+"/registrar",hidden:0!==Z,className:i.EstiloLink},o.a.createElement(S.a,{onClick:se},"Crear una nueva cuenta"),o.a.createElement("hr",null)),o.a.createElement(s.b,Object(d.a)({to:t.ruta+"/",className:i.EstiloMovil},"className",i.EstiloLink),o.a.createElement(S.a,{onClick:se},o.a.createElement(b.a,{variant:"inherit"},"Explorar servicios"))),o.a.createElement("div",{hidden:Z<1||Z>2},o.a.createElement(s.b,Object(d.a)({to:t.ruta+"/solicitar-servicio",className:1===Z?i.EstiloMovil:i.EstiloVacio},"className",i.EstiloLink),o.a.createElement(S.a,{onClick:se},"Solicitar servicio")),o.a.createElement(s.b,Object(d.a)({to:t.ruta+"/mis-servicios-solicitados",className:1===Z?i.EstiloMovil:i.EstiloVacio},"className",i.EstiloLink),o.a.createElement(S.a,{onClick:se},"Mis servicios solicitados"))),o.a.createElement("div",{hidden:2!==Z},o.a.createElement(s.b,Object(d.a)({to:t.ruta+"/crear-publicacion",className:i.EstiloMovil},"className",i.EstiloLink),o.a.createElement(S.a,{onClick:se},"Crear publicaci\xf3n")),o.a.createElement(s.b,Object(d.a)({to:t.ruta+"/mis-publicaciones",className:i.EstiloMovil},"className",i.EstiloLink),o.a.createElement(S.a,{onClick:se},"Mis publicaciones"))),o.a.createElement("div",{hidden:3!==Z},o.a.createElement(s.b,{to:t.ruta+"/gestionar-reportes",className:i.EstiloLink},o.a.createElement(S.a,{onClick:se},"Gestionar reportes")),o.a.createElement(s.b,{to:t.ruta+"/verificar-identidad",className:i.EstiloLink},o.a.createElement(S.a,{onClick:se},"Verificar identidades "))))))))}var Qe=a(421),Ze=a(422);function $e(){var e=R(),t=Object(n.useState)(!1),a=Object(c.a)(t,2),i=a[0],r=a[1],l=Object(n.useContext)(L),u=l.state;l.dispatch;return o.a.createElement("div",null,o.a.createElement(h.a,{position:"relative",bottom:"0px",style:{zIndex:0}},o.a.createElement(f.a,null,o.a.createElement(g.a,{container:!0,direction:"row",alignItems:"center",justify:"center"},o.a.createElement(g.a,{item:!0,xs:12,sm:4,align:"center"},o.a.createElement(s.b,{className:e.EstiloLink,to:u.ruta+"/preguntas-frecuentes"},"Preguntas frecuentes")),o.a.createElement(g.a,{item:!0,xs:12,sm:4,align:"center"},o.a.createElement("a",{href:"#",className:e.EstiloLink,onClick:function(){r(!i)}},"Cont\xe1ctanos"),i&&o.a.createElement("div",null,o.a.createElement("a",{href:"mailto:angelruggia@gmail.com",className:e.EstiloLink},"angelruggia@gmail.com"),o.a.createElement("br",null),o.a.createElement("a",{href:"mailto:ferransolischorvat@gmail.com",className:e.EstiloLink},"ferransolischorvat@gmail.com"))),o.a.createElement(g.a,{item:!0,xs:12,sm:4,align:"center"},o.a.createElement(b.a,null,"Nuestras redes"),o.a.createElement("a",{href:"https://www.facebook.com/RuggiaAngel",target:"_blank",className:e.EstiloLink},o.a.createElement(Qe.a,{fontSize:"large"})),o.a.createElement("a",{href:"https://www.instagram.com/ferransolischorvat/",target:"_blank",className:e.EstiloLink},o.a.createElement(Ze.a,{fontSize:"large"})))))))}var Xe=a(423),et=a(424),tt=a(425),at=a(426);function nt(e){var t=e.tipoPublicacion,a=e.settipoPublicacion,i=e.servicios,r=e.agregarSeleccionado,s=e.buscarServicios,l=e.inputBusqueda,u=e.setinputBusqueda,m=R(),p=Object(n.useState)(!1),h=Object(c.a)(p,2),f=h[0],v=h[1];return Object(n.useEffect)((function(){a(!f)}),[f]),o.a.createElement(Xe.a,Object(d.a)({className:m.margenArriba,variant:"outlined"},"className",m.filaPublicacion),o.a.createElement(et.a,null,o.a.createElement(b.a,{variant:"h5",component:"h2"},"Seleccione los filtros deseados"),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(Se.a,{className:m.inputAncho,control:o.a.createElement(xe.a,{checked:f,name:"tipo",onChange:function(e){v(e.target.checked)}}),label:"Filtrar por publicaciones de solicitudes de servicios de usuarios."})),t&&o.a.createElement(g.a,{container:!0,className:m.margenArriba,spacing:2,justify:"space-around",alignItems:"center"},i.map((function(e,t){return o.a.createElement(g.a,{item:!0,xs:6,sm:4,md:3,lg:2,key:t},o.a.createElement(ot,{key:t,servicio:e,agregarSeleccionado:r}))}))),o.a.createElement(Ce.a,{className:m.margenArriba,value:l,color:"secondary",onChange:function(e){u(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&s()},label:"Buscar por nombre",variant:"outlined",size:"medium",fullWidth:!0}),o.a.createElement(E.a,{onClick:s,className:m.margenArriba,color:"secondary",variant:"contained"},"Buscar")))}function ot(e){var t=e.servicio,a=e.agregarSeleccionado,i=R(),r=Object(n.useState)(!1),s=Object(c.a)(r,2),l=s[0],u=s[1],d=Object(n.useState)(!1),m=Object(c.a)(d,2),p=m[0],h=m[1];return o.a.createElement("div",{className:i.mostrarFlex},o.a.createElement(Ae.a,{clickable:!0,color:"primary",label:t.nombre,icon:l?o.a.createElement(tt.a,null):o.a.createElement(at.a,null),onClick:function(){a(t.id),!1===p?(h(!0),u(!0)):(h(!1),u(!1))}}))}var it=a(157),rt=a.n(it),ct=a(159),st=a.n(ct),lt=a(158),ut=a.n(lt),dt=a(160),mt=a.n(dt),pt=a(427),ht=a(428),ft=a(429),bt=a(430),vt=a(431);function gt(e){var t=e.titulo,a=e.funcionAceptar,i=e.mensaje,r=Object(n.useState)(!0),s=Object(c.a)(r,2),l=s[0],u=s[1],d=Object(n.useState)(!1),m=Object(c.a)(d,2),p=m[0],h=m[1],f=function(e){h(!0),a(e),h(!1),u(!1)};return o.a.createElement("div",null,o.a.createElement(pt.a,{open:l,onClose:function(){f(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(ht.a,{id:"alert-dialog-title"},t),o.a.createElement(ft.a,null,o.a.createElement(bt.a,{id:"alert-dialog-description"},i)),o.a.createElement(vt.a,null,o.a.createElement(E.a,{onClick:function(){f(!1)},variant:"contained",color:"error"},"Cancelar"),o.a.createElement(E.a,{onClick:function(){f(!0)},variant:"contained",color:"primary",autoFocus:!0},"Aceptar"),p&&o.a.createElement(z.a,null))))}function Et(e){var t=e.tipoPublicacion,a=e.datos,i=e.contactar,r=e.buscarSolicitudes,l=e.resenas,u=R(),d=Object(n.useState)(""),m=Object(c.a)(d,2),h=m[0],f=m[1],v=Object(n.useState)(!0),y=Object(c.a)(v,2),O=y[0],S=y[1],x=Object(n.useContext)(L),C=x.state,k=(x.dispatch,Object(n.useState)(!1)),N=Object(c.a)(k,2),w=N[0],_=N[1],A=Object(n.useState)(!1),P=Object(c.a)(A,2),B=P[0],M=P[1],D=Object(n.useState)(0),z=Object(c.a)(D,2),F=z[0],I=z[1],U=Object(n.useState)({id:null,titulo:"",descripcion:"",precio_estimado:0,imagenes:[],servicio:"",estrellas:0,Usuario_id:{id:null,nombre:"",apellido:"",imagen_perfil:null},Servicio_id:{nombre:""},pausado:!1}),T=Object(c.a)(U,2),V=T[0],J=T[1];Object(n.useEffect)((function(){f(t?"Precio estimado":"Presupuesto")}),[]),Object(n.useEffect)((function(){if(null!==a.Usuario_id){J(a);var e=a.Usuario_id.id===C.datosSesion.id;S(!e)}}),[a]),Object(n.useEffect)((function(){if(null!==l&&void 0!==l){var e=0,t=0;l.resenas.map((function(n){n.proveedor.id===a.Usuario_id.id&&(e+=n.recomendacion,t++)})),I(e/t)}}),[l]);return o.a.createElement(Xe.a,{className:u.filaPublicacion},o.a.createElement(g.a,{container:!0,spacing:1,justify:"center"},V.pausado&&o.a.createElement(ne.a,{className:u.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"warning"},"Esta publicaci\xf3n se encuentra pausada."),V.bloqueado&&o.a.createElement(ne.a,{className:u.inputAncho,style:{marginBottom:"10px"},variant:"outlined",severity:"error"},"Esta publicaci\xf3n se encuentra bloqueada, contacte a un administrador."),o.a.createElement(g.a,{container:!0,spacing:1,justify:"center",alignItems:"center"},o.a.createElement(g.a,{item:!0,xs:12,md:3,sm:12,align:"center"},o.a.createElement("img",{className:u.imagenPublicacion,src:0!==V.imagenes.length?C.servidor+V.imagenes[0].url:C.imagen_predeterminada,alt:"1\xb0 imagen"})),o.a.createElement(g.a,{item:!0,xs:12,md:9,sm:12},o.a.createElement(b.a,{align:"left",component:"h5",variant:"h5"},"".concat(V.Usuario_id.nombre," ").concat(V.Usuario_id.apellido),o.a.createElement(H.a,{xlDown:!V.Usuario_id.identidad_verificada},o.a.createElement(W.a,{title:"Usuario verificado"},o.a.createElement(j.a,{style:{padding:1}},o.a.createElement(fe.a,{color:"inherit"}))))),o.a.createElement(b.a,{align:"left",component:"h5",variant:"h5"},V.titulo,o.a.createElement(H.a,{xlDown:O},o.a.createElement(s.b,{to:t?C.ruta+"/modificar-publicacion/"+V.id:C.ruta+"/modificar-solicitud-servicio/"+V.id},o.a.createElement(W.a,{title:"Editar publicaci\xf3n"},o.a.createElement(j.a,null,o.a.createElement(rt.a,{color:"primary"})))),o.a.createElement(W.a,{title:"Pausar publicaci\xf3n"},o.a.createElement(j.a,{onClick:function(){_(!0)}},V.pausado?o.a.createElement(ut.a,{color:"secondary"}):o.a.createElement(st.a,{color:"primary"}))),o.a.createElement(W.a,{title:"Eliminar publicaci\xf3n"},o.a.createElement(j.a,{onClick:function(){M(!0)}},o.a.createElement(mt.a,{color:"error"}))),w&&o.a.createElement(gt,{mensaje:V.pausado?'La publicaci\xf3n "'+V.titulo+'" volver\xe1 a aparecer en la secci\xf3n de b\xfasqueda.':'La publicaci\xf3n "'+V.titulo+'" ser\xe1 pausada y no se mostrar\xe1 en la secci\xf3n de b\xfasqueda.',funcionAceptar:function(e){var t="Bearer "+C.jwt;if(e){var a=!V.pausado;p.a.put(C.servidor+"/api/solicitud/"+V.id,{pausado:a},{headers:{Authorization:t}}).then((function(e){console.log("Respuesta pausa: ",e.data)})).catch((function(e){console.log("Error, no se ha podido pausar la publicaci\xf3n.",e.response)})),J((function(e){return Object(q.a)(Object(q.a)({},e),{},{pausado:a})}))}_(!1)},titulo:V.pausado?"\xbfEst\xe1 seguro que quiere despausar la publicaci\xf3n?":"\xbfEst\xe1 seguro que quiere pausar la publicaci\xf3n?"}),B&&o.a.createElement(gt,{mensaje:'Se va a eliminar la publicaci\xf3n "'+V.titulo+'", esta acci\xf3n no se puede revertir.',funcionAceptar:function(e){var t="Bearer "+C.jwt;e&&p.a.delete(C.servidor+"/api/solicitud/"+V.id,{headers:{Authorization:t}}).then((function(e){console.log("Respuesta eliminar: ",e.data),r()})).catch((function(e){console.log("Error, no se ha podido eliminar la publicaci\xf3n.",e.response)})),M(!1)},titulo:"\xbfEst\xe1 seguro que quiere eliminar la publicaci\xf3n?"}))),o.a.createElement("div",{style:{overflow:"auto",textOverflow:"ellipsis",textJustify:"auto",align:"left",WebkitLineClamp:"3",height:"3"}},o.a.createElement(b.a,null,V.descripcion)))),o.a.createElement(g.a,{item:!0,xs:8,sm:12,md:6,lg:3,align:"center"},o.a.createElement(b.a,{component:"h6",variant:"h6"},h,": $",V.precio_estimado)),t&&null!==V.Servicio_id&&o.a.createElement(g.a,{item:!0,xs:4,sm:6,md:6,lg:3,align:"center"},o.a.createElement(Ae.a,{variant:"outlined",label:V.Servicio_id.nombre})),t&&o.a.createElement(g.a,{item:!0,xs:12,sm:6,md:6,lg:3,align:"center"},o.a.createElement(ie,{valor:F,clickeable:!1,cambiarValor:function(){}})),V.Usuario_id.id!==C.datosSesion.id&&1!==C.datosSesion.tipo&&(!!V.tipo||1!==C.datosSesion.tipo)&&o.a.createElement(g.a,{item:!0,xs:6,sm:6,md:6,lg:3,align:"center",hidden:!i},o.a.createElement(Ve,{fijo:!1,esDePerfil:!1,datos:{idS:V.id,idP:V.Usuario_id.id,nombre:"".concat(V.Usuario_id.nombre," ").concat(V.Usuario_id.apellido),imagen_perfil:null===V.Usuario_id.imagen_perfil?null:C.servidor+V.Usuario_id.imagen_perfil.url}})),o.a.createElement(g.a,{item:!0,xs:6,lg:12,md:12,sm:6,align:"center"},o.a.createElement(s.b,{to:C.ruta+"/publicacion/"+V.id,style:{textDecoration:"none",padding:0,color:"black"}},o.a.createElement(E.a,{variant:"outlined",color:"default"},"Leer m\xe1s")))))}function jt(){var e=R(),t=Object(l.h)().id,a=Object(n.useState)([]),i=Object(c.a)(a,2),r=i[0],s=i[1],u=Object(n.useContext)(L),d=u.state,m=(u.dispatch,Object(n.useState)({nombre:""})),h=Object(c.a)(m,2),f=h[0],v=h[1],g=Object(n.useState)([]),E=Object(c.a)(g,2),j=E[0],y=E[1],O=Object(n.useState)([]),S=Object(c.a)(O,2),x=S[0],C=S[1],k=Object(n.useState)(!1),N=Object(c.a)(k,2),w=N[0],_=N[1],A=Object(n.useState)(null),P=Object(c.a)(A,2),B=P[0],M=P[1],F=Object(n.useState)(!0),q=Object(c.a)(F,2),I=q[0],U=q[1],T=Object(n.useState)(""),V=Object(c.a)(T,2),H=V[0],W=V[1];function J(){p.a.get(d.servidor+"/api/solicitud?Categoria_id="+t+"&pausado=false&bloqueado=false&tipo="+I).then((function(e){if(_(!1),I){var t=e.data.filter((function(e){return!1===e.Usuario_id.estado&&!1===e.Usuario_id.bloqueado}));C(t)}else C(e.data)})).catch((function(e){alert("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)}))}Object(n.useEffect)((function(){_(!0),""===d.jwt&&!0!==d.publico||p.a.get(d.servidor+"/api/categorias/"+t).then((function(e){v(e.data),y(e.data.servicios)})).catch((function(e){alert("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)})),J()}),[d.jwt,d.publico]);return Object(n.useEffect)((function(){if(0!==j.length){var e="";j.map((function(t){e+="servicios="+t.id+"&"})),p.a.get(d.servidor+"/api/resenas?"+e).then((function(e){var t={};e.data.map((function(e){e.servicios.map((function(a){t.hasOwnProperty(a.nombre)||(t[a.nombre]={resenas:[]}),t[a.nombre].resenas.push(e)}))})),M(t)})).catch((function(e){alert("Un error ha ocurrido al buscar las rese\xf1as."),console.log(e.response)}))}}),[j]),o.a.createElement("div",{className:e.fondo},o.a.createElement(D.a,{elevation:3,style:{width:950,padding:15},className:"Fondo"},o.a.createElement(b.a,{variant:"h5",component:"h2",align:"center"},f.nombre),o.a.createElement(nt,{tipoPublicacion:I,settipoPublicacion:U,inputBusqueda:H,setinputBusqueda:W,servicios:j,agregarSeleccionado:function(e){var t=r.some((function(t){return t===e}));s(t?r.filter((function(t){return e!==t})):function(t){return[].concat(Object(ge.a)(t),[e])})},buscarServicios:function(){var e="&";_(!0),r.map((function(t){null!==t&&(e+="Servicio_id="+t+"&")})),1===e.length&&(I?j.map((function(t){null!==t&&(e+="Servicio_id="+t.id+"&")})):e+="Categoria_id="+t+"&"),p.a.get(d.servidor+"/api/solicitud?"+e+"pausado=false&bloqueado=false&tipo="+I+"&titulo_contains="+H).then((function(e){if(I){var t=e.data.filter((function(e){return!1===e.Usuario_id.estado&&!1===e.Usuario_id.bloqueado}));C(t)}else C(e.data);_(!1)})).catch((function(e){alert("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)}))}}),o.a.createElement("br",null),w&&o.a.createElement(z.a,null),!w&&0===x.length&&o.a.createElement(ne.a,{variant:"outlined",severity:"info"},"Lo sentimos, por el momento no hay ",I?"publicaciones ":"solicitudes "," de servicios que coincidan con los filtros de b\xfasqueda."),x.map((function(e,t){return o.a.createElement(Et,{key:t,resenas:e.tipo?null===B?null:B[e.Servicio_id.nombre]:null,buscarSolicitudes:J,datos:e,tipoPublicacion:I,contactar:!0})}))))}a(241);var yt=a(161),Ot=a.n(yt),St=function(e){var t=e.cantidad,a=e.funcionSetImagen,i=e.ids,r=e.setcargando,s=Object(n.useState)([]),l=Object(c.a)(s,2),u=l[0],d=l[1],m=Object(n.useState)([]),h=Object(c.a)(m,2),f=h[0],b=h[1],v=Object(n.useContext)(L),g=v.state;v.dispatch;Object(n.useEffect)((function(){if(console.log(i),null!==g.datosSesion.id&&i.some((function(e){return null!==e}))){var e="";i.map((function(t){null!==t&&(e+="id_in="+t+"&")})),p.a.get(g.servidor+"/upload/files?"+e).then((function(e){e.data.map((function(e){!function(e){var t,a=g.servidor+e.url;fetch(a).then((function(a){a.arrayBuffer().then((function(a){t=new File([a],""+e.id,{type:"image/jpeg"}),d([].concat(Object(ge.a)(u),[t])),b((function(e){return[].concat(Object(ge.a)(e),[t])}))}))}))}(e)}))})).catch((function(e){console.log("Error: ",e.response)}))}}),[i]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ot.a,{getUploadParams:function(e){var n=e.file;e.meta;return a(n,t,0,f),{url:"https://httpbin.org/post"}},onChangeStatus:function(e,n){e.meta;var o=e.file;"removed"===n&&a(o,t,1,f),"uploading"===n&&r(!0),"done"===n&&r(!1)},maxFiles:t,initialFiles:0!==i.length?u:null,multiple:!0,maxSizeBytes:5e6,canCancel:!1,accept:"image/*",inputWithFilesContent:"Subir otra imagen",inputContent:function(){return 1===t?"Selecciona ".concat(t," imagen"):"Selecciona hasta ".concat(t," im\xe1genes")},styles:{dropzone:{width:"100%",height:"100%",overflow:"auto"},dropzoneActive:{borderColor:"green"}}}))};function xt(e){var t=e.registrar,a=R(),i=Object(n.useState)(""),r=Object(c.a)(i,2),s=r[0],u=r[1],m=Object(n.useState)(""),h=Object(c.a)(m,2),f=h[0],v=h[1],j=Object(l.g)(),y=Object(n.useState)(""),O=Object(c.a)(y,2),S=O[0],x=O[1],C=Object(n.useState)(!1),k=Object(c.a)(C,2),N=k[0],w=k[1],_=Object(n.useContext)(L),A=_.state,P=_.dispatch,B=Object(n.useState)([]),M=Object(c.a)(B,2),F=M[0],I=M[1],U=Object(n.useState)([]),T=Object(c.a)(U,2),V=T[0],W=T[1],K=Object(n.useState)([]),G=Object(c.a)(K,2),Y=G[0],Q=G[1],Z=Object(n.useState)([]),$=Object(c.a)(Z,2),X=$[0],ee=$[1],te=Object(n.useState)(!1),ae=Object(c.a)(te,2),ne=ae[0],oe=ae[1],ie=Object(n.useState)({nombre:"",apellido:"",email:"",usuario:"",telefono:"",contrasena:"",contrasena_rep:"",dni:"",descripcion:"",imagen_perfil:null}),re=Object(c.a)(ie,2),ce=re[0],le=re[1],ue=Object(n.useState)(!1),de=Object(c.a)(ue,2),me=de[0],pe=de[1];Object(n.useEffect)((function(){""===A.jwt&&!0!==A.publico||t||(le({nombre:A.datosSesion.nombre,apellido:A.datosSesion.apellido,email:A.datosSesion.email,usuario:A.datosSesion.username,telefono:A.datosSesion.telefono,contrasena:"",contrasena_rep:"",dni:A.datosSesion.dni,descripcion:A.datosSesion.descripcion,tipo:A.datosSesion.tipo,imagen_perfil:A.datosSesion.imagen_perfil}),null!==A.datosSesion.imagen_perfil&&I([A.datosSesion.imagen_perfil.id]))}),[A.jwt,A.publico]);var he=function(e){""!==s&&u("");var t=e.target.value,a=e.target.name;le(Object(q.a)(Object(q.a)({},ce),{},Object(d.a)({},a,t)))};function fe(e){var t=[],a="Bearer "+e.jwt;V.map((function(e){X.some((function(t){return t===e}))||t.push(e)}));var n=[];Y.map((function(e){X.some((function(t){return t===e}))&&n.push(e)}));for(var o=0;o<Y.length;o++){var i=Number(Y[o].name);p.a.delete(A.servidor+"/upload/files/"+i,{headers:{Authorization:a}}).then((function(e){console.log("Borrando imagenes",e)})).catch((function(e){alert("Error al borrar las imagenes"),console.log(e.response)}))}for(var r=new FormData,c=0;c<t.length;c++)r.append("files",t[c]);0!==t.length&&(r.append("ref","user"),r.append("refId",e.usuario.id),r.append("field","imagen_perfil"),r.append("source","users-permissions"),p.a.post(A.servidor+"/upload",r,{headers:{"Content-Type":"multipart/form-data",Authorization:a}}).then((function(t){var a=e.usuario;a.imagen_perfil=t.data[0],P({type:"setDatos",value:a}),P({type:"setJwt",value:e.jwt}),localStorage.setItem("datosLocal",JSON.stringify({jwt:e.jwt,datosSesion:a}))})).catch((function(e){console.log("Error: ",e.response)})))}return Object(n.useEffect)((function(){x(t?"Registrar usuario":"Modificar mi perfil")}),[]),o.a.createElement("div",{className:a.fondo},o.a.createElement(D.a,{elevation:3},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),-1===ce.email.search("[.][a-z][a-z]")||-1!==ce.email.search("[.].*[0-9].*")?u("El email se encuentra escrito incorrectamente"):t?ce.contrasena!==ce.contrasena_rep?u("Las contrase\xf1as no coinciden"):ce.contrasena.length<8?u("La contrase\xf1a debe tener al menos 8 caracteres"):(w(!0),p.a.post(A.servidor+"/auth/local/register",{username:ce.usuario,email:ce.email,password:ce.contrasena,nombre:ce.nombre,apellido:ce.apellido,telefono:ce.telefono,dni:ce.dni,descripcion:ce.descripcion,tipo:me?2:1,confirmed:!1,estado:!1,mostrar_telefono:!1,identidad_verificada:!1,espera_verificacion:!1,bloqueado:!1}).then((function(e){P({type:"setDatos",value:e.data.user}),P({type:"setJwt",value:e.data.jwt}),localStorage.setItem("datosLocal",JSON.stringify({jwt:e.data.jwt,datosSesion:e.data.user})),fe({usuario:e.data.user,jwt:e.data.jwt}),w(!1),v("Usuario creado. \xa1Bienvenido a Servia!"),oe(!0),setTimeout((function(){j.push(A.ruta+"/")}),6e3)})).catch((function(e){var t=JSON.parse(e.response.request.response).message[0].messages[0].id;u("Auth.form.error.email.taken"===t?"El email ya est\xe1 en uso.":"Auth.form.error.username.taken"===t?"El usuario ya est\xe1 en uso.":t),w(!1)}))):-1===ce.email.search("[.][a-z][a-z]")||-1!==ce.email.search("[.].*[0-9].*")?u("El email se encuentra escrito incorrectamente"):function(){var e="Bearer "+A.jwt;w(!0),p.a.put(A.servidor+"/users/"+A.datosSesion.id,{username:ce.usuario,email:ce.email,nombre:ce.nombre,apellido:ce.apellido,telefono:ce.telefono,dni:ce.dni,descripcion:ce.descripcion,tipo:2===ce.tipo||me?2:1},{headers:{Authorization:e}}).then((function(e){P({type:"setDatos",value:e.data}),P({type:"setJwt",value:A.jwt}),fe({usuario:e.data,jwt:A.jwt}),localStorage.setItem("datosLocal",JSON.stringify({jwt:A.jwt,datosSesion:e.data})),w(!1),v("\xa1Cambios guardados!"),oe(!0),setTimeout((function(){j.push(A.ruta+"/")}),3e3)})).catch((function(e){var t=JSON.parse(e.response.request.response).message[0].messages[0].id;console.log("error: ",e.response),u("Auth.form.error.email.taken"===t?"El email ya est\xe1 en uso.":"Auth.form.error.username.taken"===t?"El usuario ya est\xe1 en uso.":t),w(!1)}))}()}},o.a.createElement(g.a,{className:a.gridRegistro,spacing:1,container:!0,justify:"space-between",alignItems:"center"},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"h5",component:"h1",align:"center",className:a.inputAncho},S)),o.a.createElement(g.a,{item:!0,xs:6},o.a.createElement(Ce.a,{className:a.inputAncho,type:"text",name:"nombre",value:ce.nombre,onChange:he,label:"Nombre",variant:"filled",required:!0})),o.a.createElement(g.a,{item:!0,xs:6},o.a.createElement(Ce.a,{className:a.inputAncho,type:"text",name:"apellido",value:ce.apellido,onChange:he,label:"Apellido",variant:"filled",required:!0})),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(St,{cantidad:1,setcargando:w,funcionSetImagen:function(e,t,a,n){if(ee(n),0===a)W([].concat(Object(ge.a)(V),[e]));else{Q((function(t){return[].concat(Object(ge.a)(Y),[e])}));var o=V.filter((function(t){return t!==e}));W(o)}},ids:F})),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(Ce.a,{className:a.inputAncho,name:"email",value:ce.email,onChange:he,label:"Correo electr\xf3nico",variant:"filled",type:"email",required:!0})),o.a.createElement(g.a,{item:!0,xs:6},o.a.createElement(Ce.a,{className:a.inputAncho,name:"usuario",value:ce.usuario,onChange:he,label:"Usuario",variant:"filled",required:!0})),o.a.createElement(g.a,{item:!0,xs:6},o.a.createElement(Ce.a,{className:a.inputAncho,type:"number",name:"telefono",value:ce.telefono,onChange:he,label:"Telefono",variant:"filled"})),o.a.createElement(J.a,null),o.a.createElement(H.a,{xlDown:!t},o.a.createElement(g.a,{item:!0,xs:6},o.a.createElement(Ce.a,{required:t,name:"contrasena",value:ce.contrasena,onChange:he,type:"password",label:"Contrase\xf1a",variant:"filled",className:a.inputAncho})),o.a.createElement(g.a,{item:!0,xs:6},o.a.createElement(Ce.a,{required:t,name:"contrasena_rep",value:ce.contrasena_rep,onChange:he,type:"password",label:"Repetir contrase\xf1a",variant:"filled",className:a.inputAncho}))),o.a.createElement(H.a,{xlDown:""===s},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{color:"error"},s))),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(H.a,{xlDown:A.datosSesion.tipo>1},o.a.createElement(Ct,{soyProveedor:me,setSoyProveedor:pe}))),o.a.createElement("div",{className:a.inputAncho,hidden:!N},o.a.createElement(z.a,null)),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(E.a,{type:"submit",className:a.inputAncho,size:"large",variant:"contained",color:"primary",disabled:N},t?"Registrar Usuario":"Guardar cambios")),o.a.createElement(g.a,{item:!0,xs:12,hidden:!t},o.a.createElement(Ke,{mensaje:"\xbfYa tienes una cuenta?"})))),o.a.createElement(se,{mensaje:f,abrir:ne,setabrir:oe})))}function Ct(e){var t=e.setSoyProveedor,a=e.soyProveedor;return o.a.createElement(Se.a,{control:o.a.createElement(xe.a,{checked:a,onChange:function(e){t(!a)},name:"checkedB",color:"primary"}),label:"Soy proveedor de servicios"})}function kt(){var e=R(),t=Object(l.g)(),a=Object(n.useContext)(L),i=a.state,r=a.dispatch,s=Object(n.useState)(!1),u=Object(c.a)(s,2),m=u[0],h=u[1],f=Object(n.useState)(!1),v=Object(c.a)(f,2),j=v[0],y=v[1],O=Object(n.useState)([]),S=Object(c.a)(O,2),x=S[0],C=S[1],k=Object(n.useState)([]),N=Object(c.a)(k,2),w=N[0],_=N[1],A=Object(n.useState)(!1),P=Object(c.a)(A,2),B=P[0],M=P[1],F=Object(n.useState)(!1),I=Object(c.a)(F,2),U=I[0],T=I[1],V=Object(n.useState)({descripcion:"",estado:!1,mostrar_telefono:!1,pasarImagenes:[]}),W=Object(c.a)(V,2),J=W[0],K=W[1],G=Object(n.useState)([]),Y=Object(c.a)(G,2),Q=Y[0],Z=Y[1],$=Object(n.useState)([]),X=Object(c.a)($,2),ee=X[0],te=X[1],ae=Object(n.useState)([]),ne=Object(c.a)(ae,2),oe=ne[0],ie=ne[1];Object(n.useEffect)((function(){if(""!==i.jwt||!0===i.publico){var e=i.datosSesion.imagenes_proveedor.map((function(e){return e.id}));K({descripcion:i.datosSesion.descripcion,estado:i.datosSesion.estado,mostrar_telefono:i.datosSesion.mostrar_telefono,pasarImagenes:e}),p.a.get(i.servidor+"/api/categorias").then((function(e){e.data.map((function(t){t.seleccionado=!1,t.servicios.map((function(e){e.seleccionado=!1})),0!==i.datosSesion.servicios.length&&e.data.map((function(e){e.servicios.map((function(t){i.datosSesion.servicios.map((function(a){a.categoria===e.id&&(e.seleccionado=!0),a.id===t.id&&(t.seleccionado=!0)}))}))}))})),C(e.data)})).catch((function(e){alert("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)}))}}),[i.jwt,i.publico]);var re=function(e){j||y(!0);var t=e.target.checked,a=e.target.name;K(Object(q.a)(Object(q.a)({},J),{},Object(d.a)({},a,t)))};Object(n.useEffect)((function(){console.log("img nuevas:",oe)}),[oe]);return Object(n.useEffect)((function(){if(0!==w.length){var e="Bearer "+i.jwt;h(!0),function(e){var t=[];Q.map((function(e){oe.some((function(t){return t===e}))||t.push(e)})),console.log("imagenes perfil:",Q),console.log("nuevos:",t);var a=[];ee.map((function(e){oe.some((function(t){return t===e}))&&a.push(e)})),console.log("borrados:",a);for(var n=0;n<ee.length;n++){var o=Number(ee[n].name),c="Bearer "+i.jwt;p.a.delete(i.servidor+"/upload/files/"+o,{headers:{Authorization:c}}).then((function(e){console.log("Borrando imagenes",e)})).catch((function(e){alert("Error al borrar las imagenes"),console.log(e.response)}))}for(var s=new FormData,l=0;l<t.length;l++)s.append("files",t[l]);if(0!==t.length){s.append("ref","user"),s.append("refId",e),s.append("field","imagenes_proveedor"),s.append("source","users-permissions");var u="Bearer "+i.jwt;p.a.post(i.servidor+"/upload",s,{headers:{"Content-Type":"multipart/form-data",Authorization:u}}).then((function(e){console.log("Respuesta imagen: ",e.data);var t=i.datosSesion;t.imagenes_proveedor=e.data,r({type:"setDatos",value:t}),r({type:"setJwt",value:i.jwt}),localStorage.setItem("datosLocal",JSON.stringify({jwt:i.jwt,datosSesion:t}))})).catch((function(e){alert("Error al cargar las im\xe1genes."),console.log("Error: ",e.response)}))}}(i.datosSesion.id),console.log("Se envian los datos"),p.a.put(i.servidor+"/users/"+i.datosSesion.id,{descripcion:J.descripcion,estado:J.estado,mostrar_telefono:J.mostrar_telefono,servicios:w},{headers:{Authorization:e}}).then((function(e){console.log("Respuesta cambio: ",e.data);var t=e.data;r({type:"setDatos",value:e.data}),localStorage.setItem("datosLocal",JSON.stringify({jwt:i.jwt,datosSesion:t})),console.log("Sus datos se han modificado correctamente!"),T(!0),h(!1)})).catch((function(e){console.log(e.response),alert("Ha ocurrido un error al guardar los datos"),h(!1)}))}}),[w]),o.a.createElement("div",{className:e.fondo},o.a.createElement(D.a,{elevation:3,className:e.pantallaMedia},o.a.createElement(De.a,{color:"primary",fullWidth:!0},o.a.createElement(g.a,{className:e.filaPublicacion,container:!0,direction:"row",justify:"space-around",alignItems:"center",spacing:1},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"h5",component:"h1",align:"center"},"Modificar mis datos de proveedor")),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(Se.a,{className:e.inputAncho,control:o.a.createElement(xe.a,{checked:J.estado,name:"estado",onChange:re}),label:"Pausar mis servicios"})),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(Se.a,{className:e.inputAncho,control:o.a.createElement(xe.a,{name:"mostrar_telefono",checked:J.mostrar_telefono,onChange:re}),label:"Mostrar mi n\xfamero de tel\xe9fono"})),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(Ce.a,{className:e.inputAncho,onChange:function(e){K(Object(q.a)(Object(q.a)({},J),{},{descripcion:e.target.value})),j||y(!0)},name:"descripcion",value:J.descripcion,id:"filled-basic",label:"Descripci\xf3n",multiline:!0,variant:"filled"})),o.a.createElement(g.a,{item:!0,xs:12,className:e.inputAncho},o.a.createElement(St,{setcargando:h,cantidad:10,funcionSetImagen:function(e,t,a,n){if(ie(n),0===a)Z([].concat(Object(ge.a)(Q),[e]));else{te((function(t){return[].concat(Object(ge.a)(ee),[e])}));var o=Q.filter((function(t){return t.file!==e}));Z(o)}},ids:J.pasarImagenes})),o.a.createElement(se,{mensaje:"\xa1Tus datos se han guardado correctamente!",abrir:U,setabrir:T}),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"h6",component:"h3",align:"left",className:e.alinearInputs},"Selecciona los servicios que ofreces")),x.map((function(e,t){return o.a.createElement(g.a,{key:t,item:!0,xs:12},o.a.createElement(g.a,{container:!0,justify:"flex-start"},o.a.createElement(Se.a,{control:o.a.createElement(xe.a,{checked:e.seleccionado,onChange:function(e){C(x.map((function(a,n){return t===n&&(a.seleccionado=e.target.checked),a})))}}),label:e.nombre})),o.a.createElement(H.a,{xlDown:!e.seleccionado},o.a.createElement(g.a,{container:!0,spacing:2,justify:"space-around"},e.servicios.map((function(e,a){return o.a.createElement(g.a,{item:!0,xs:6,sm:4,md:3,lg:2,key:a},o.a.createElement(Te,{servicio:e,agregarSeleccionado:function(n){e.seleccionado=n,C(x.map((function(n,o){return t===o&&(n.servicios[a]=e),n})))}}))})))))})),o.a.createElement(H.a,{xlDown:!B||m},o.a.createElement(g.a,{item:!0,xs:12,align:"center"},o.a.createElement(b.a,{color:"error"},"Debe seleccionar al menos un servicio."))),o.a.createElement("div",{className:e.inputAncho,hidden:!m},o.a.createElement(z.a,null)),o.a.createElement(g.a,{item:!0,xs:6,align:"center"},o.a.createElement(E.a,{onClick:function(){var e=[];x.map((function(t){t.seleccionado&&t.servicios.map((function(t){t.seleccionado&&(e.push(t.id),j||y(!0),console.log("control",j))}))})),0!==e.length?M(!1):M(!0),_(e)},disabled:m,size:"large",variant:"contained",color:"primary"},"Guardar")),o.a.createElement(g.a,{item:!0,xs:6,align:"center"},o.a.createElement(E.a,{onClick:function(){t.push(i.ruta+"/")},size:"large",variant:"contained",color:"secondary"},"Cancelar"))))))}function Nt(){var e=Object(n.useState)({descripcion:"",titulo:"",identidad_verificada:!1,telefono:"",mostrar_telefono:!1,servicios:[],imagenes:[],bloqueado:!1,imagen_perfil:"",precio_estimado:"perfil",pausado:!1,tipo:!1,categoria:"",servicio:"",estrella:0}),t=Object(c.a)(e,2),a=t[0],i=t[1],r=Object(n.useContext)(L),s=r.state,u=(r.dispatch,Object(l.h)().id);return Object(n.useEffect)((function(){if(""!==s.jwt||!0===s.publico){var e=""!==s.jwt?"Bearer "+s.jwt:"";p.a.get(s.servidor+"/users/"+u,{headers:{Authorization:e}}).then((function(e){i({id:e.data.id,descripcion:e.data.descripcion,titulo:"".concat(e.data.nombre," ").concat(e.data.apellido),identidad_verificada:e.data.identidad_verificada,telefono:e.data.telefono,mostrar_telefono:e.data.mostrar_telefono,servicios:e.data.servicios,imagenes:e.data.imagenes_proveedor,bloqueado:e.data.bloqueado,pausado:e.data.estado,precio_estimado:"perfil",imagen_perfil:null===e.data.imagen_perfil?null:e.data.imagen_perfil.url}),console.log(e.data)})).catch((function(e){alert("Un error ha ocurrido al buscar el usuario."),console.log(e.response)}))}}),[s.jwt,s.publico]),o.a.createElement(He.a,null,o.a.createElement(g.a,{container:!0,direction:"row",justify:"center",alignItems:"stretch"},o.a.createElement(g.a,{item:!0,md:8,xs:12},o.a.createElement(_e,{esDePerfil:!0,datosPagina:a})),o.a.createElement(g.a,{item:!0,md:4,xs:12},o.a.createElement(le,{esDePerfil:!0,datosPerfil:a})),a.id!==s.datosSesion.id&&0!==a.servicios.length&&!a.pausado&&!a.bloqueado&&o.a.createElement(Ve,{fijo:!0,esDePerfil:!0,datos:{idS:null,idP:a.id,nombre:a.titulo,servicios:a.servicios}})))}function wt(e){var t=e.tipoPublicacion,a=e.modificar,i=R(),r=Object(n.useContext)(L),s=r.state,u=(r.dispatch,Object(l.h)().id),m=Object(l.g)(),h=Object(n.useState)(""),f=Object(c.a)(h,2),v=f[0],j=f[1],y=Object(n.useState)(""),O=Object(c.a)(y,2),x=O[0],C=O[1],k=Object(n.useState)([]),N=Object(c.a)(k,2),w=N[0],_=N[1],A=Object(n.useState)([]),P=Object(c.a)(A,2),B=P[0],M=P[1],F=Object(n.useState)(!1),I=Object(c.a)(F,2),U=I[0],T=I[1],V=Object(n.useState)([]),H=Object(c.a)(V,2),W=H[0],J=H[1],K=Object(n.useState)(!1),G=Object(c.a)(K,2),Y=G[0],Q=G[1],Z=Object(n.useState)(""),$=Object(c.a)(Z,2),X=$[0],ee=$[1],te=Object(n.useState)([]),ae=Object(c.a)(te,2),ne=ae[0],oe=ae[1],ie=Object(n.useState)([]),re=Object(c.a)(ie,2),ce=re[0],le=re[1],ue=Object(n.useState)({titulo:"",precio_estimado:"",Categoria_id:{nombre:""},Servicio_id:{nombre:""},descripcion:"",imagenes:[],pausado:!1,bloqueado:!1}),de=Object(c.a)(ue,2),me=de[0],pe=de[1];function he(e){pe(Object(q.a)(Object(q.a)({},me),{},Object(d.a)({},e.target.name,e.target.value)))}Object(n.useEffect)((function(){t?(C(a?"Modificar publicaci\xf3n":"Crear publicaci\xf3n"),j("Precio estimado")):(C(a?"Modificar solicitud de servicio":"Solicitar servicio"),j("Presupuesto")),""===s.jwt&&!0!==s.publico||(T(!0),p.a.get(s.servidor+"/api/categorias").then((function(e){_(e.data),T(!1)})).catch((function(e){alert("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)})))}),[s.jwt,s.publico,t,a]),Object(n.useEffect)((function(){a&&0!==w.length&&(T(!0),p.a.get(s.servidor+"/api/solicitud/"+u).then((function(e){s.datosSesion.id===e.data.Usuario_id.id?(e.data.imagenes=e.data.imagenes.map((function(e){return e.id})),pe(e.data),t&&w.map((function(t){t.id===e.data.Servicio_id.categoria&&M(t.servicios)}))):m.push(s.ruta+"/"),T(!1)})).catch((function(e){alert("Un error ha ocurrido al cargar la solicitud."),console.log(e.response)})))}),[w]);return o.a.createElement("div",{className:i.fondo},o.a.createElement(D.a,{elevation:3,style:{padding:"10px"},className:"Fondo"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),T(!0);var n=new FormData,o=[];W.map((function(e){ne.some((function(t){return t===e}))||o.push(e)}));var i=[];ce.map((function(e){ne.some((function(t){return t===e}))&&i.push(e)}));for(var r=0;r<ce.length;r++){var c=Number(ce[r].name),l="Bearer "+s.jwt;p.a.delete(s.servidor+"/upload/files/"+c,{headers:{Authorization:l}}).then((function(e){console.log("Borrando imagenes",e)})).catch((function(e){alert("Error al borrar las imagenes"),console.log(e.response)}))}for(var d=0;d<o.length;d++)n.append("files.imagenes",o[d]);n.append("data",JSON.stringify({titulo:me.titulo,precio_estimado:""===me.precio_estimado?0:me.precio_estimado,descripcion:me.descripcion,Categoria_id:me.Categoria_id.id,Servicio_id:t?me.Servicio_id.id:null,Usuario_id:s.datosSesion.id,pausado:!1,tipo:t}));var h="Bearer "+s.jwt;a?p.a.put(s.servidor+"/api/solicitud/"+u,n,{headers:{"Content-Type":"multipart/form-data",Authorization:h}}).then((function(e){console.log("Respuesta modificar solicitud: ",e.data),e.data.bloqueado&&function(){var e="Bearer "+s.jwt;p.a.get(s.servidor+"/api/reportes?Solicitud_id="+me.id,{headers:{Authorization:e}}).then((function(t){console.log("Set bloqueado false: ",t.data),t.data.filter((function(e){return 1===e.estado})).map((function(t){p.a.put(s.servidor+"/api/reportes/"+t.id,{estado:-1},{headers:{Authorization:e}}).then((function(e){console.log("estado -1: ",e.data)})).catch((function(e){console.log("1.",e.response)}))}))})).catch((function(e){console.log("2.",e.response)}))}(),T(!1),ee("\xa1Publicaci\xf3n modificada!"),Q(!0),setTimeout((function(){m.push(s.ruta+"/")}),3e3)})).catch((function(e){console.log("Error, no se ha podido modificar la solicitud.",e.response)})):p.a.post(s.servidor+"/api/solicitud",n,{headers:{"Content-Type":"multipart/form-data",Authorization:h}}).then((function(e){console.log("Respuesta subir solicitud: ",e.data);var a=s.datosSesion.servicios.some((function(e){return e.id===me.Servicio_id.id}));if(t&&!a){var n=s.datosSesion.servicios.map((function(e){return e.id}));n.push(me.Servicio_id.id),p.a.put(s.servidor+"/users/"+s.datosSesion.id,{servicios:n},{headers:{Authorization:h}}).then((function(e){T(!1)})).catch((function(e){console.log(e.response),alert("Ha ocurrido un error al guardar los datos"),T(!1)}))}T(!1),ee("\xa1Publicaci\xf3n creada!"),Q(!0),setTimeout((function(){m.push(s.ruta+"/")}),3e3)})).catch((function(e){console.log("Error, no se ha podido crear la solicitud.",e.response)}))}},o.a.createElement(De.a,{className:i.padding2,color:"primary",fullWidth:!0},o.a.createElement(g.a,{className:i.pantallaMedia,container:!0,direction:"row",justify:"center",alignItems:"center",spacing:1},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"h5",component:"h1",align:"center"},x)),o.a.createElement(g.a,{item:!0,sm:8,xs:12},o.a.createElement(Ce.a,{onChange:he,value:me.titulo,name:"titulo",className:i.inputAncho,id:"filled-basic",label:"T\xedtulo de la publicaci\xf3n",variant:"filled",maxLength:50,required:!0})),o.a.createElement(g.a,{item:!0,sm:4,xs:12},o.a.createElement(Ce.a,{onChange:he,value:me.precio_estimado,name:"precio_estimado",type:"number",className:i.inputAncho,id:"formatted-numberformat-input",label:v,variant:"filled"})),o.a.createElement(g.a,{item:!0,sm:6,xs:12},o.a.createElement(De.a,{className:i.inputAncho},o.a.createElement(ze.a,{id:"Categoria_id",variant:"filled"},"Categor\xeda"),o.a.createElement(Fe.a,{value:me.Categoria_id.nombre,name:"Categoria_id",onChange:function(e){var t=w.filter((function(t){return t.nombre===e.target.value}));M(t[0].servicios),pe(Object(q.a)(Object(q.a)({},me),{},{Categoria_id:t[0],Servicio_id:{nombre:""}}))},id:"Categoria_id",labelId:"Categoria_id",variant:"filled",label:"Categor\xeda",required:!0},w.map((function(e,t){return o.a.createElement(S.a,{key:t,value:e.nombre},e.nombre)}))))),t&&o.a.createElement(g.a,{item:!0,sm:6,xs:12},o.a.createElement(De.a,{className:i.inputAncho},o.a.createElement(ze.a,{id:"Servicio_id",variant:"filled"},"Servicio"),o.a.createElement(Fe.a,{value:me.Servicio_id.nombre,name:"Servicio_id",id:"Servicio_id",labelId:"Servicio_id",onChange:function(e){var t;w.map((function(a){a.nombre===me.Categoria_id.nombre&&(t=a.servicios.filter((function(t){return t.nombre===e.target.value})))})),console.log(t[0]),pe(Object(q.a)(Object(q.a)({},me),{},{Servicio_id:t[0]}))},label:"Servicio",variant:"filled",required:!0},B.map((function(e,t){return o.a.createElement(S.a,{key:t,value:e.nombre},e.nombre)}))))),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(Ce.a,{onChange:he,value:me.descripcion,name:"descripcion",className:i.inputAncho,id:"filled-basic",label:"Descripci\xf3n",maxLength:400,multiline:!0,variant:"filled"})),o.a.createElement(g.a,{item:!0,xs:12,className:i.inputAncho},o.a.createElement(St,{cantidad:10,funcionSetImagen:function(e,t,a,n){if(oe(n),0===a)J([].concat(Object(ge.a)(W),[e]));else{le((function(t){return[].concat(Object(ge.a)(ce),[e])}));var o=W.filter((function(t){return t!==e}));J(o)}oe(n)},setcargando:T,ids:me.imagenes})),o.a.createElement(g.a,{item:!0,xs:12,className:i.inputAncho},U&&o.a.createElement(z.a,null)),o.a.createElement(g.a,{item:!0,xs:6,align:"center"},o.a.createElement(E.a,{className:i.botones,disabled:U,type:"submit",size:"large",variant:"contained",color:"primary"},"Guardar")),o.a.createElement(g.a,{item:!0,xs:6,align:"center"},o.a.createElement(E.a,{className:i.botones,onClick:function(){m.push(s.ruta+"/")},size:"large",variant:"contained",color:"secondary"},"Cancelar")),o.a.createElement(se,{mensaje:X,abrir:Y,setabrir:Q}))))))}var _t=a(344),At=a(432),Pt=a(461),Bt=a(162),Mt=a.n(Bt),Dt=a(163),zt=a.n(Dt),Ft=a(164),Rt=a.n(Ft);function qt(e){var t=e.estadoReporte,a=e.reportes,i=e.modificarReporte,r=e.cargando,s=R(),l=Object(n.useState)(""),u=Object(c.a)(l,2),m=u[0],p=u[1];return Object(n.useEffect)((function(){p(0===t?"Reportes pendientes de moderaci\xf3n":1===t?"Reportes en espera":"Historial de reportes")}),[]),o.a.createElement("div",Object(d.a)({className:s.fondo},"className","Fondo"),o.a.createElement(D.a,{elevation:5},o.a.createElement(g.a,{className:s.filaPublicacion,container:!0,justify:"center"},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"h4",component:"h1",align:"center"},m)),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement("br",null),!r&&0===a.length&&o.a.createElement(ne.a,{variant:"outlined",severity:"info"},"No hay reportes para mostrar."),a.map((function(e,t){return o.a.createElement(It,{key:t,datos:e,modificarReporte:i})}))))))}function It(e){var t,a=e.datos,i=e.modificarReporte,r=R(),c=Object(n.useContext)(L),l=c.state;c.dispatch;switch(a.estado){case-1:"#5d9b9b";break;case 0:"gray";break;case 1:"yellow";break;case 2:"#FFDED3";break;case 3:"#D6FFD3"}return o.a.createElement(D.a,(t={className:r.filaPublicacion},Object(d.a)(t,"className","Fondo"),Object(d.a)(t,"variant","outlined"),Object(d.a)(t,"square",!0),t),o.a.createElement(g.a,{container:!0,direction:"row",justify:"center",style:{padding:"15px"}},o.a.createElement(g.a,{item:!0,xs:12,lg:9,md:9,sm:12},o.a.createElement(E.a,{disabled:!0},o.a.createElement(b.a,{color:"secondary",variant:"h5",component:"h2",align:"left"},null===a.Solicitud_id?"Reporte al usuario ":a.Solicitud_id.titulo)),null!==a.Solicitud_id&&o.a.createElement(s.b,{to:l.ruta+"/publicacion/"+a.Solicitud_id.id,className:r.EstiloLink},o.a.createElement(W.a,{title:"Vista previa"},o.a.createElement(E.a,null,o.a.createElement(Mt.a,{color:"primary"})))),o.a.createElement(E.a,{disabled:!0},o.a.createElement(zt.a,null)),o.a.createElement(s.b,{to:l.ruta+"/perfil-proveedor/"+a.Usuario_id.id,className:r.EstiloLink},o.a.createElement(E.a,{className:r.button},o.a.createElement(b.a,{variant:"h6",component:"h5",align:"left"},"".concat(a.Usuario_id.nombre," ").concat(a.Usuario_id.apellido))))),o.a.createElement(g.a,{item:!0,xs:12,lg:3,md:3,sm:12},o.a.createElement(b.a,{variant:"h6",component:"h5",align:"right"},a.created_at.split("T")[0])),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"h6",component:"h5",align:"left"},"Motivos del reporte:")),o.a.createElement(g.a,{container:!0,direction:"row",justify:"center"},a.motivos.map((function(e,t){return o.a.createElement(g.a,{key:t,item:!0,xs:6,sm:3,md:3,lg:3},o.a.createElement(b.a,{variant:"h6",component:"h3",align:"center"},e.nombre))}))),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(Ut,{datos:a,modificarReporte:i}))))}function Ut(e){var t=e.datos,a=e.modificarReporte,i=Object(n.useContext)(L),r=i.state,s=(i.dispatch,Object(n.useState)(!1)),l=Object(c.a)(s,2),u=l[0],d=l[1],m=Object(n.useState)(!1),h=Object(c.a)(m,2),f=h[0],v=h[1],E=Object(n.useState)(!1),j=Object(c.a)(E,2),y=j[0],O=j[1];R();function S(e,n){var o="Bearer "+r.jwt;p.a.put(r.servidor+"/api/reportes/"+t.id,{accion:f,estado:n,notificacion:e,Administrador_id:r.datosSesion.id},{headers:{Authorization:o}}).then((function(e){console.log("Se ha podido crear el reporte: ",e.data),O(!1),a(e.data)})).catch((function(e){console.log("Error, no se ha podido crear el reporte.",e.response),alert("Error, no se ha podido crear el reporte.")}))}function x(e,t){var a="Bearer "+r.jwt,n=null===e.Solicitud_id?"users/":"api/solicitud/",o=null===e.Solicitud_id?e.Usuario_id.id:e.Solicitud_id.id;console.log(r.servidor+"/"+n+o),p.a.put(r.servidor+"/"+n+o,{bloqueado:t},{headers:{Authorization:a}}).then((function(e){console.log("Se ha podido bloquear",e.data)})).catch((function(e){console.log("Error, no se ha podido bloquear.",e.response),alert("Error, no se ha podido bloquear .")}))}return o.a.createElement("div",null,o.a.createElement(Y.a,{button:!0,onClick:function(){d(!u)}},o.a.createElement(Q.a,{primary:"Desplegar informaci\xf3n"}),u?o.a.createElement(te.a,null):o.a.createElement(ae.a,null)),o.a.createElement(Z.a,{in:u,timeout:"auto",unmountOnExit:!0},o.a.createElement(K.a,{component:"div",disablePadding:!0},o.a.createElement("hr",null),o.a.createElement(g.a,{item:!0,xs:12},t.descripcion.split("##").map((function(e,t){return o.a.createElement(b.a,{key:t,align:"justify"},e)}))),o.a.createElement("hr",null),t.estado<=0&&o.a.createElement(De.a,{component:"fieldset",align:"left"},o.a.createElement(_t.a,{required:!0,component:"legend"},"Acci\xf3n"),o.a.createElement(At.a,{disabled:t.estado>0,row:!0,"aria-label":"Accion",value:f,onChange:function(e){v(!f)}},o.a.createElement(Se.a,{value:"true",checked:f,control:o.a.createElement(Pt.a,null),label:-1===t.estado?null!==t.Solicitud_id?"Continuar con la publicaci\xf3n bloqueada":"Continuar con el perfil bloqueado":null!==t.Solicitud_id?"Bloquear publicaci\xf3n":"Bloquear perfil"}),o.a.createElement(Se.a,{value:"false",checked:!f,control:o.a.createElement(Pt.a,null),label:-1===t.estado?null!==t.Solicitud_id?"Desbloquear publicaci\xf3n":"Desbloquear perfil":"No hacer nada"}))),t.estado>0&&o.a.createElement(b.a,{variant:"h6",component:"h5",align:"left"},t.accion?null!==t.Solicitud_id?"La publicaci\xf3n fue bloqueada":"El perfil fue bloqueado":null!==t.Solicitud_id?"No se bloque\xf3 la publicaci\xf3n":"No se bloque\xf3 el perfil"),y&&o.a.createElement(z.a,null),o.a.createElement("div",{hidden:t.estado>0},-1===t.estado&&o.a.createElement(Tt,{datos:t.notificacion}),o.a.createElement(Lt,{enviarDatos:function(e,a){O(!0);var n="Bearer "+r.jwt,o=2,i="Su "+(null!==t.Solicitud_id?"publicaci\xf3n":"perfil")+" tiene una sugerencia de modificaci\xf3n. \nMensaje de la administraci\xf3n: "+e;a&&(f?(o=1,i=null!==t.Solicitud_id?"Su publicaci\xf3n ha sido pausada por un administrador, deber\xe1 modificarla para que vuelva a estar disponible al p\xfablico. \nMensaje de la administraci\xf3n: "+e:"Su perfil ha sido bloqueado por un adminitrador, deber\xe1 modificarlo para que vuelva a estar disponible al p\xfablico. \nMensaje de la administraci\xf3n: "+e,-1!==t.estado&&x(t,!0)):(o=3,-1===t.estado&&(x(t,!1),a=!0,i=null!==t.Solicitud_id?"\xa1Su publicaci\xf3n se encuentra nuevamente disponible!":"\xa1Su perfil se encuentra nuevamente disponible!"))),!0===a?p.a.post(r.servidor+"/api/notificaciones/",{tipo:0,emisor:r.datosSesion.id,receptor:t.Usuario_id.id,solicitud:null!==t.Solicitud_id?t.Solicitud_id.id:null,datos_notificacion:i,leido:!1},{headers:{Authorization:n}}).then((function(e){console.log("Se ha podido crear la notificacion: ",e.data),-1!==t.estado&&S(e.data.id,o)})).catch((function(e){console.log("Error, no se ha podido crear la notificacion.",e.response),alert("Error, no se ha podido crear la notificacion.")})):S(null,o)},datos:t,cargando:y,esRespuesta:-1===t.estado})),o.a.createElement("div",{hidden:t.estado<=0},o.a.createElement(Tt,{datos:t.notificacion})))))}var Lt=function(e){var t=e.enviarDatos,a=e.datos,i=e.cargando,r=e.esRespuesta,s=Object(n.useState)(""),l=Object(c.a)(s,2),u=l[0],d=l[1];return o.a.createElement("div",null,o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(Ce.a,{onChange:function(e){d(e.target.value)},value:u,id:"outlined-basic",label:"Agregar mensaje",multiline:!0,variant:"outlined",size:"medium",fullWidth:!0})),o.a.createElement("div",{align:"center"},o.a.createElement(E.a,{disabled:i,startIcon:o.a.createElement(Rt.a,null),onClick:function(){t(u,!0)}},r?"Confirmar acci\xf3n":"Aceptar reporte"),-1!==a.estado&&o.a.createElement(E.a,{disabled:i,color:"secondary",startIcon:o.a.createElement(Le.a,null),onClick:function(){t(u,!1)}},"Descartar reporte")))},Tt=function(e){return e.datos.map((function(e,t){return o.a.createElement("div",{key:t},o.a.createElement("hr",null),o.a.createElement(g.a,{container:!0,justify:"center"},o.a.createElement(g.a,{item:!0,xs:9},o.a.createElement(b.a,{color:"secondary",variant:"h5",component:"h4",align:"left"},"Mensaje del administrador")),o.a.createElement(g.a,{item:!0,xs:3},o.a.createElement(b.a,{variant:"h6",component:"h5",align:"right"},e.created_at.split("T")[0])),o.a.createElement(g.a,{item:!0,xs:12},e.datos_notificacion)))}))},Vt=a(433),Ht=a(165),Wt=a.n(Ht);a(139);function Jt(){var e=Object(n.useContext)(L),t=e.state,a=(e.dispatch,Object(n.useState)([])),i=Object(c.a)(a,2),r=i[0],s=i[1];function l(e){s(r.filter((function(t){return t.id!==e})))}Object(n.useEffect)((function(){f(!0);var e="Bearer "+t.jwt;""!==t.jwt&&p.a.get(t.servidor+"/users?espera_verificacion=true",{headers:{Authorization:e}}).then((function(e){console.log(e.data),s(e.data),f(!1)})).catch((function(e){alert("Un error ha ocurrido al buscar los usuarios a verificar."),console.log(e.response)}))}),[t.jwt]);var u=R(),d=Object(n.useState)(!1),m=Object(c.a)(d,2),h=m[0],f=m[1];return o.a.createElement("div",{className:u.fondo},o.a.createElement(D.a,{elevation:5,style:{margin:"10px 0px",padding:"20px",width:"90%"},className:"Fondo"},o.a.createElement(g.a,{container:!0,justify:"center",spacing:2},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"h4",component:"h1",align:"center"},"Verificar identidades")),o.a.createElement(g.a,{item:!0,xs:12},h&&o.a.createElement(z.a,null),o.a.createElement("br",null),!h&&0===r.length&&o.a.createElement(ne.a,{variant:"outlined",severity:"info"},"No hay usuarios que deseen verificar su identidad.")),r.map((function(e,t){return o.a.createElement(g.a,{item:!0,xs:12,key:t},o.a.createElement(Kt,{usuario:e,actualizarUsuario:l}))})))))}function Kt(e){var t=e.usuario,a=e.actualizarUsuario,n=R();return o.a.createElement(D.a,{className:n.filaPublicacion,variant:"outlined",square:!0},o.a.createElement(g.a,{container:!0,direction:"row",alignItems:"center"},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(E.a,{className:n.button},o.a.createElement(b.a,{variant:"h5",component:"h5",align:"left"},"".concat(t.nombre," ").concat(t.apellido))),o.a.createElement(E.a,{disabled:!0},o.a.createElement(b.a,{variant:"h5",component:"h2",align:"left"},"DNI: ",t.dni))),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(Gt,{usuario:t,actualizarUsuario:a}))))}function Gt(e){var t=e.usuario,a=e.actualizarUsuario,i=R(),r=Object(n.useContext)(L),s=r.state,l=(r.dispatch,Object(n.useState)(!1)),u=Object(c.a)(l,2),d=u[0],m=u[1],h=Object(n.useState)([]),f=Object(c.a)(h,2),v=f[0],j=f[1],y=Object(n.useState)(!1),O=Object(c.a)(y,2),S=O[0],x=O[1],C=Object(n.useState)(""),k=Object(c.a)(C,2),N=k[0],w=k[1],_=Object(n.useState)(""),A=Object(c.a)(_,2),P=A[0],B=A[1];function M(e){x(!0);var n="Bearer "+s.jwt;p.a.post(s.servidor+"/api/notificaciones/",{tipo:1,emisor:s.datosSesion.id,receptor:t.id,solicitud:null,datos_notificacion:e?"":N,leido:!1},{headers:{Authorization:n}}).then((function(o){console.log("Se ha podido crear la notificacion: ",o.data),p.a.put(s.servidor+"/users/"+t.id,{espera_verificacion:!1,identidad_verificada:e},{headers:{Authorization:n}}).then((function(e){console.log("Se ha podido actualizar al usuario",e.data),a(e.data.id),x(!1)})).catch((function(e){console.log("Error, no se ha podido actualizar al usuario.",e.response),alert("Error, no se ha podido actualizar al usuario.")}))})).catch((function(e){console.log("Error, no se ha podido crear la notificacion.",e.response),alert("Error, no se ha podido crear la notificacion.")}))}return Object(n.useEffect)((function(){if(t.imagenes_dni){var e=t.imagenes_dni.map((function(e){return{src:s.servidor+e.url,title:e.name,description:"Imagenes de D.N.I."}}));j(e)}}),[t]),o.a.createElement("div",null,o.a.createElement(Y.a,{button:!0,onClick:function(){m(!d)}},o.a.createElement(Q.a,{primary:"Desplegar informaci\xf3n"}),d?o.a.createElement(te.a,null):o.a.createElement(ae.a,null)),o.a.createElement(Z.a,{in:d,timeout:"auto",unmountOnExit:!0},o.a.createElement(K.a,{component:"div",disablePadding:!0},o.a.createElement(g.a,{container:!0,direction:"row",alignItems:"center",justify:"center"},o.a.createElement(g.a,{item:!0,xs:4,sm:12},o.a.createElement("div",{align:"center"},o.a.createElement(Wt.a,{images:v,thumbnailWidth:"100px",thumbnailHeight:"100px"}))),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(Ce.a,{id:"outlined-basic",name:"descripcion",label:"Agregar mensaje",multiline:!0,variant:"outlined",size:"medium",fullWidth:!0,className:i.inputAncho,onChange:function(e){w(e.target.value)}})),o.a.createElement(H.a,{xlDown:""===P||""!==N},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{color:"error"},P))),S&&o.a.createElement(z.a,null),o.a.createElement("div",{align:"center"},o.a.createElement(E.a,{disabled:S,onClick:function(){M(!0)},color:"secondary",startIcon:o.a.createElement(Vt.a,null)},"Validar Identidad"),o.a.createElement(E.a,{disabled:S,onClick:function(){""===N?B("Debe escribir un mensaje para rechazar la solicitud."):M(!1)},color:"error",startIcon:o.a.createElement(at.a,null)},"Rechazar Solicitud"))))))}var Yt=a(190),Qt=a(456),Zt=a(457),$t=a(434),Xt=a(435),ea=a(166),ta=a.n(ea),aa=a(167),na=a.n(aa),oa=a(168),ia=a.n(oa);function ra(e){var t=e.children,a=e.value,n=e.index,i=Object(Yt.a)(e,["children","value","index"]);return o.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"scrollable-force-tabpanel-".concat(n),"aria-labelledby":"scrollable-force-tab-".concat(n)},i),a===n&&o.a.createElement(Qt.a,{p:3},t))}function ca(e){return{id:"scrollable-force-tab-".concat(e),"aria-controls":"scrollable-force-tabpanel-".concat(e)}}var sa=Object(F.a)((function(e){return{root:{flexGrow:1,width:"100%",backgroundColor:e.palette.background.paper,display:"flex",alignItems:"center",flexWrap:"wrap",padding:10,minHeight:"calc(100vh - 130px)"},backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}}));function la(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],i=t[1],r=sa(),s=Object(n.useState)(0),l=Object(c.a)(s,2),u=l[0],m=l[1],f=Object(n.useState)([]),b=Object(c.a)(f,2),v=b[0],g=b[1],E=Object(n.useContext)(L),j=E.state;E.dispatch;return Object(n.useEffect)((function(){if(""!==j.jwt||!0===j.publico){i(!0);var e="Bearer "+j.jwt;p.a.get(j.servidor+"/api/reportes",{headers:{Authorization:e}}).then((function(e){g(e.data),i(!1)})).catch((function(e){alert("Un error ha ocurrido al cargar las categor\xedas."),console.log(e.response)}))}}),[j.jwt,j.publico]),o.a.createElement("div",Object(d.a)({className:r.root,style:{padding:"20px"}},"className","fondo"),o.a.createElement(He.a,null,o.a.createElement(h.a,{position:"static",color:"default"},o.a.createElement(Zt.a,{value:u,onChange:function(e,t){m(t)},variant:"fullWidth",scrollButtons:"auto",indicatorColor:"primary",textColor:"primary","aria-label":"scrollable force tabs example"},o.a.createElement($t.a,Object.assign({label:"Gestionar nuevos reportes",icon:o.a.createElement(ta.a,null)},ca(0))),o.a.createElement($t.a,Object.assign({label:"Reportes en espera",icon:o.a.createElement(na.a,null)},ca(1))),o.a.createElement($t.a,Object.assign({label:"Historial de reportes",icon:o.a.createElement(ia.a,null)},ca(2))))),o.a.createElement(je.a,{className:r.backdrop,open:a},o.a.createElement(Xt.a,null)),o.a.createElement(ra,{value:u,index:0},o.a.createElement(qt,{estadoReporte:0,cargando:a,modificarReporte:function(e){g(v.map((function(t){return e.id===t.id?e:t})))},reportes:v.filter((function(e){return e.estado<=0}))})),o.a.createElement(ra,{value:u,index:1},o.a.createElement(qt,{estadoReporte:1,cargando:a,modificarReporte:function(){},reportes:v.filter((function(e){return 1===e.estado}))})),o.a.createElement(ra,{value:u,index:2},o.a.createElement(qt,{estadoReporte:2,cargando:a,modificarReporte:function(){},reportes:v.filter((function(e){return e.estado>=2}))}))))}function ua(e){var t=e.tipoPublicacion,a=R(),i=Object(n.useContext)(L),r=i.state,s=(i.dispatch,Object(n.useState)("")),l=Object(c.a)(s,2),u=l[0],d=l[1],m=Object(n.useState)(!1),h=Object(c.a)(m,2),f=h[0],v=h[1],g=Object(n.useState)([]),E=Object(c.a)(g,2),j=E[0],y=E[1],O=Object(n.useState)(null),S=Object(c.a)(O,2),x=S[0],C=S[1];function k(){p.a.get(r.servidor+"/api/solicitud?Usuario_id="+r.datosSesion.id+"&tipo="+t).then((function(e){y(e.data),v(!1)})).catch((function(e){alert("Un error ha ocurrido al cargar las solicitudes."),console.log(e.response)})),t&&p.a.get(r.servidor+"/api/resenas?proveedor="+r.datosSesion.id).then((function(e){var t={};e.data.map((function(e){e.servicios.map((function(a){t.hasOwnProperty(a.nombre)||(t[a.nombre]={resenas:[]}),t[a.nombre].resenas.push(e)}))})),C(t)})).catch((function(e){alert("Un error ha ocurrido al buscar los servicios."),console.log(e.response)}))}return Object(n.useEffect)((function(){v(!0),d(t?"Mis publicaciones":"Mis servicios solicitados"),""!==r.jwt&&(console.log(t),C(null),k())}),[r.jwt,t]),o.a.createElement("div",{className:a.fondo,style:{margin:"auto"}},o.a.createElement(He.a,null,o.a.createElement(D.a,{elevation:3,style:{maxWidth:950,padding:15},className:"Fondo"},o.a.createElement(b.a,{variant:"h5",component:"h2",align:"center"},u),o.a.createElement("br",null),f&&o.a.createElement(z.a,null),!f&&0===j.length&&o.a.createElement(ne.a,{variant:"outlined",severity:"info"},"No tienes ",t?"publicaciones ":"solicitudes ","de servicios"),j.map((function(e,a){return o.a.createElement(Et,{resenas:null===x?null:x[e.Servicio_id.nombre],buscarSolicitudes:k,key:a,datos:e,tipoPublicacion:t,contactar:!0})})))))}var da=a(470),ma=a(436),pa=a(437),ha=a(169),fa=a.n(ha);function ba(){var e=R(),t=o.a.useState([{pregunta:"\xbfQu\xe9 es Servia?",respuesta:"Servia es una aplicaci\xf3n en la cual vas a poder encontrar servicios domesticos, publicar tus servicios o solicitar un servicio determinado."},{pregunta:"\xbfC\xf3mo busco un servicio?",respuesta:'Para buscar un servicio, debes hacer click en la opcion "Explorar servicios", luego se mostrar\xe1 una pagina donde podr\xe1s seleccionar la categor\xeda referente al servicio que buscas, al hacer esto se abrir\xe1 una p\xe1gina donde podr\xe1s ver y buscar servicios.'},{pregunta:"\xbfC\xf3mo me vuelvo proveedor de servicios?",respuesta:'Para ser proveedor, debes seleccionar la opci\xf3n "Quiero ser proveedor de servicios" al momento de registrarte o yendo a "Editar mi perfil".'},{pregunta:"Si soy un proveedor de servicios, \xbfC\xf3mo verifico mi identidad en Servia?",respuesta:'Para verificar tu identidad, debes ir a la opcion "Verificar mi identidad", all\xed podr\xe1s cargar tu n\xfamero de DNI y las fotos del mismo. Luego un administrador validar\xe1 tus datos y te notificar\xe1 los resultados.'},{pregunta:"\xbfC\xf3mo me publicito en Servia?",respuesta:"Servia ofrece a los proveedores la posibilidad de crear publicaciones en donde pueden mostrar una descripci\xf3n de sus servicio e im\xe1genes que la acompa\xf1en."},{pregunta:"\xbfC\xf3mo solicito un servicio?",respuesta:'Para solicitar un servicio, debes ir a la opci\xf3n "Solicitar servicio", all\xed podr\xe1s especificar todos los requerimientos, de modo de que alg\xfan proveedor se pueda contactar contigo para ayudarte.'},{pregunta:"\xbfC\xf3mo administro las publicaciones/solicitudes que he hecho?",respuesta:'Para administrar tus publicaciones/solicitudes, debes ir a la opcion "Mis servicios solicitados" o "Mis publicaciones", all\xed podr\xe1s modificar o eliminar las publicaciones/solicitudes que hiciste.'},{pregunta:"\xbfC\xf3mo contacto a un proveedor de servicios?",respuesta:'Para contactar a un proveedor de servicios, debes ir a la publicacion del servicio que deseas y hacer click en la opci\xf3n "Contactar". Al hacer click en el boton "Enviar", se generar\xe1 un Chat en el cual el proveedor podr\xe1 responderte.'},{pregunta:"\xbfC\xf3mo me mantengo en contacto con un proveedor de servicios?",respuesta:"Para mantenerte en contacto con uno o varios proveedores existe un chat, el cual tendr\xe1 los chats con los proveedores que hiciste contacto. Par accederlo debes hacer click en el \xedcono de mensaje, al lado de la campana de notificaciones."}]),a=Object(c.a)(t,2),n=a[0];a[1];return o.a.createElement("div",{className:e.fondo},o.a.createElement(D.a,{elevation:3,style:{margin:"auto",width:850,padding:"20px"},className:"Fondo"},o.a.createElement(b.a,{component:"h3",variant:"h4",align:"center"},"Preguntas frecuentes"),o.a.createElement("br",null),o.a.createElement(o.a.Fragment,null,n.map((function(e,t){return o.a.createElement(da.a,{key:t},o.a.createElement(ma.a,{expandIcon:o.a.createElement(fa.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},o.a.createElement(b.a,{component:"h6",variant:"h6"},e.pregunta)),o.a.createElement(pa.a,null,o.a.createElement(b.a,null,e.respuesta)))})))))}function va(){var e=R();return o.a.createElement("div",{className:e.fondo},o.a.createElement(D.a,{elevation:3,style:{width:650,minHeight:300,padding:15}},o.a.createElement(b.a,{component:"h3",variant:"h4",align:"center"},"\xbfQuienes somos?"),o.a.createElement(b.a,{variant:"body1",align:"left"},"Somos...")))}a(439),a(440),a(441),a(442),a(443),a(170),a(171),a(438),a(444),a(445),a(446);var ga=a(447),Ea={estadoEditado:!1};Object(n.createContext)(Ea);function ja(){var e=R(),t=Object(n.useContext)(L),a=t.state,i=t.dispatch,r=Object(l.g)(),s=Object(n.useState)(!1),u=Object(c.a)(s,2),d=u[0],m=u[1],h=Object(n.useState)(!1),f=Object(c.a)(h,2),v=f[0],j=f[1],y=Object(n.useState)(""),O=Object(c.a)(y,2),S=O[0],x=O[1],C=Object(n.useState)([]),k=Object(c.a)(C,2),N=k[0],w=k[1],_=Object(n.useState)([]),A=Object(c.a)(_,2),P=A[0],B=A[1],M=Object(n.useState)([]),F=Object(c.a)(M,2),q=F[0],I=F[1],U=Object(n.useState)([]),T=Object(c.a)(U,2),V=T[0],H=T[1];Object(n.useEffect)((function(){if(""!==a.jwt){x(a.datosSesion.dni);var e=a.datosSesion.imagenes_dni.map((function(e){return e.id}));w(e)}}),[a.jwt]);function W(){var e="Bearer "+a.jwt;p.a.put(a.servidor+"/users/"+a.datosSesion.id,{dni:S,espera_verificacion:!0},{headers:{Authorization:e}}).then((function(e){i({type:"setDatos",value:e.data}),localStorage.setItem("datosLocal",JSON.stringify({jwt:a.jwt,datosSesion:e.data})),m(!1),j(!0),setTimeout((function(){r.push(a.ruta+"/")}),3e3)})).catch((function(e){console.log("Error, no se han podido enviar los datos.",e.response)}))}return o.a.createElement("div",{className:e.fondo},o.a.createElement(D.a,{elevation:3},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),m(!0),x(String(S));var t=[];P.map((function(e){q.some((function(t){return t===e}))||t.push(e)})),console.log("imagenes dni:",P),console.log("nuevos:",t);var n=[];V.map((function(e){q.some((function(t){return t===e}))&&n.push(e)})),console.log("borrados:",n);for(var o=0;o<V.length;o++){var i=Number(V[o].name),r="Bearer "+a.jwt;p.a.delete(a.servidor+"/upload/files/"+i,{headers:{Authorization:r}}).then((function(e){console.log("Borrando imagenes",e)})).catch((function(e){alert("Error al borrar las imagenes"),console.log(e.response)}))}for(var c=new FormData,s=0;s<t.length;s++)c.append("files",t[s]);if(0!==t.length){c.append("ref","user"),c.append("refId",a.datosSesion.id),c.append("field","imagenes_dni"),c.append("source","users-permissions");var l="Bearer "+a.jwt;p.a.post(a.servidor+"/upload",c,{headers:{"Content-Type":"multipart/form-data",Authorization:l}}).then((function(e){console.log("Respuesta imagen: ",e.data),W()})).catch((function(e){alert("Error al cargar las im\xe1genes."),console.log("Error: ",e.response)}))}else W()}},o.a.createElement(g.a,{className:e.gridRegistro,spacing:1,container:!0,justify:"space-between",alignItems:"center"},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"h5",component:"h1",align:"center",className:e.inputAncho},"Verificar mi identidad")),o.a.createElement(g.a,{item:!0,xs:12,align:"center"},o.a.createElement(Ce.a,{className:e.inputAncho,type:"number",name:"dni",value:S,style:{width:"50%"},onChange:function(e){x(e.target.value)},id:"filled-basic",label:"N\xfamero de documento",variant:"filled",required:!0})),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"subtitle1",component:"h1",align:"justify",className:e.inputAncho},"Para que puedas verificar tu identidad, necesitamos que subas una foto del frente y otra del dorso de tu DNI. Procura que ambas im\xe1genes se vean legibles y correspondan con los datos que proporcionaste en tu perfil.")),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(St,{cantidad:2,funcionSetImagen:function(e,t,a,n){if(I(n),0===a)B([].concat(Object(ge.a)(P),[e]));else{H((function(t){return[].concat(Object(ge.a)(V),[e])}));var o=P.filter((function(t){return t!==e}));B(o)}I(n)},setcargando:m,ids:N})),o.a.createElement(g.a,{item:!0,xs:12,className:e.inputAncho},d&&o.a.createElement(z.a,null)),(a.datosSesion.identidad_verificada||a.datosSesion.espera_verificacion)&&o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"subtitle1",component:"h1",align:"justify",color:"error",className:e.inputAncho},a.datosSesion.espera_verificacion?"Ya tienes una solicitud de verificaci\xf3n pendiente.":"\xa1Tu perfil ya est\xe1 verificado!")),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(E.a,{type:"submit",className:e.inputAncho,size:"large",variant:"contained",color:"primary",disabled:d||a.datosSesion.identidad_verificada||a.datosSesion.espera_verificacion},"Enviar solicitud")))),o.a.createElement(se,{mensaje:"\xa1Solicitud enviada con \xe9xito! Pronto nos pondremos en contacto contigo.",abrir:v,setabrir:j})))}var ya=a(448),Oa=a(449),Sa=a(450),xa=a(451),Ca=a(111);function ka(e){var t=e.eliminarNotificacion,a=e.datos,i=R(),r=Object(n.useContext)(L),s=r.state,l=(r.dispatch,o.a.useState(!1)),u=Object(c.a)(l,2),d=u[0],m=u[1],h=o.a.useState(!1),f=Object(c.a)(h,2),j=f[0],y=f[1],O=Object(n.useState)(0),S=Object(c.a)(O,2),x=S[0],C=S[1],k=Object(n.useState)(""),N=Object(c.a)(k,2),w=N[0],_=N[1],A=Object(n.useState)(""),P=Object(c.a)(A,2),B=P[0],M=P[1],D=Object(n.useState)([]),F=Object(c.a)(D,2),q=F[0],I=F[1],U=Object(n.useState)([]),T=Object(c.a)(U,2),V=T[0],W=T[1],K=Object(n.useState)(!1),G=Object(c.a)(K,2),Y=G[0],Q=G[1],Z=Object(n.useState)(!1),$=Object(c.a)(Z,2),X=$[0],ee=$[1];return Object(n.useEffect)((function(){var e=null!==a.solicitud?a.solicitud.Categoria_id:Number(a.datos_notificacion.split("_")[0]),t="Bearer "+s.jwt,n=null!==a.solicitud?[a.solicitud.Servicio_id]:[];W(n),p.a.get(s.servidor+"/api/servicios?categoria="+e,{headers:{Authorization:t}}).then((function(e){var t=e.data.map((function(e){return e.seleccionado=!1,e}));console.log("Servicios",t),I(t)})).catch((function(e){alert("Un error ha ocurrido al buscar los servicios."),console.log(e.response)}))}),[a]),o.a.createElement("div",null,o.a.createElement(E.a,{variant:"contained",color:"primary",onClick:function(){m(!0)}},"Realizar rese\xf1a"),o.a.createElement(se,{mensaje:"\xa1Rese\xf1a enviada!",setabrir:y,abrir:j}),o.a.createElement(Ee.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:i.mostrarFlex,open:d,onClose:function(){m(!1)},closeAfterTransition:!0,BackdropComponent:je.a,BackdropProps:{timeout:500}},o.a.createElement(ye.a,{in:d},o.a.createElement("div",null,o.a.createElement(g.a,{className:i.papelFondo,style:{maxWidth:"500px"},container:!0,direction:"row",justify:"space-between",alignItems:"center"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var n="Bearer "+s.jwt;console.log(V),0!==V.length?(Q(!0),p.a.post(s.servidor+"/api/resenas/",{titulo:w,descripcion:B,recomendacion:Number(x),votos_positivos:0,votos_negativos:0,proveedor:a.emisor.id,servicios:0!==V.length?V:null},{headers:{Authorization:n}}).then((function(e){console.log("Se ha podido crear la rese\xf1a: ",e.data),t(a.id),Q(!1),y(!0),m(!1)})).catch((function(e){console.log("Error, no se ha podido crear la rese\xf1a.",e.response),alert("Error, no se ha podido crear la rese\xf1a.")}))):ee(!0)}},o.a.createElement(De.a,null,o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement("div",{align:"center"},o.a.createElement(v.a,{alt:"Nombre proveedor",src:0!==a.emisor.imagenes_proveedor.length?s.servidor+a.emisor.imagenes_proveedor[0].url:"",className:i.imagenPublicacion}))),o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"h5",component:"h2",align:"center",className:i.form},"".concat(a.emisor.nombre," ").concat(a.emisor.apellido))),o.a.createElement(b.a,{variant:"h5",component:"h3",align:"center",className:i.form},null!==a.solicitud?"Publicaci\xf3n: ":"Categor\xeda: ",null!==a.solicitud?a.solicitud.titulo:a.datos_notificacion.split("_")[1]),o.a.createElement(Ce.a,{onChange:function(e){_(e.target.value)},className:i.inputAncho,id:"filled-basic",label:"T\xedtulo de la rese\xf1a",variant:"filled",required:!0}),o.a.createElement(J.a,null),o.a.createElement("br",null),o.a.createElement(Ce.a,{onChange:function(e){M(e.target.value)},className:i.inputAncho,id:"filled-basic",label:"Descripci\xf3n (opcional)",variant:"filled",multiline:!0}),o.a.createElement("br",null),0!==q.length&&o.a.createElement(g.a,{container:!0,spacing:2,justify:"space-around"},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"subtitle1",component:"h4",align:"center",className:i.form},null!==a.solicitud?"Si el proveedor te ha ofrecido otros servicios, puedes seleccionarlos aqu\xed: ":"Selecciona los servicios llevados a cabo: ")),q.map((function(e,t){return null!==a.solicitud?a.solicitud.Servicio_id!==e.id:o.a.createElement(g.a,{item:!0,xs:6,sm:4,md:3,lg:2,key:t},o.a.createElement(Te,{servicio:e,agregarSeleccionado:function(t){!function(e){X&&ee(!1);var t=V.some((function(t){return t===e.id}));W(t?V.filter((function(t){return t!==e.id})):[].concat(Object(ge.a)(V),[e.id]))}(e),e.seleccionado=t}}))}))),o.a.createElement(b.a,{variant:"h5",component:"h4",align:"center",className:i.form},"\xa1Valora el servicio brindado!"),o.a.createElement(ie,{valor:x,cambiarValor:function(e){C(Number(e.target.value))},clickeable:!0}),o.a.createElement(H.a,{xlDown:!X||Y},o.a.createElement(b.a,{color:"error"},"Debes seleccionar al menos un servicio.")),Y&&o.a.createElement(z.a,null),o.a.createElement(E.a,{type:"submit",disabled:0===Number(x)||Y,variant:"contained",color:"primary"},"Enviar rese\xf1a"))))))))}function Na(){var e=R(),t=Object(n.useContext)(L),a=t.state,i=(t.dispatch,Object(n.useState)([])),r=Object(c.a)(i,2),s=r[0],l=r[1],u=Object(n.useState)(!1),d=Object(c.a)(u,2),m=d[0],h=d[1],f=Object(n.useState)(!1),v=Object(c.a)(f,2),E=v[0],y=v[1],O=Object(n.useState)([o.a.createElement(ya.a,{style:{fontSize:"75px"}}),o.a.createElement(Oa.a,{style:{fontSize:"75px"}}),o.a.createElement(Sa.a,{style:{fontSize:"75px"}})]),S=Object(c.a)(O,2),x=S[0];S[1];function C(e){l(s.filter((function(t){return t.id!==e})));var t="Bearer "+a.jwt;p.a.delete(a.servidor+"/api/notificaciones/"+e,{headers:{Authorization:t}}).then((function(e){})).catch((function(e){alert("Un error ha ocurrido al eliminar la notificaci\xf3n."),console.log(e.response)}))}return Object(Pe.b)("spanish",(function(e,t,a){return[["justo ahora","justo ahora"],["hace %s segundos","en %s segundos"],["hace 1 minuto","en 1 minuto"],["hace %s minutos","en %s minutos"],["hace 1 hora","en 1 hora"],["hace %s horas","en %s horas"],["hace 1 d\xeda","en 1 d\xeda"],["hace %s d\xedas","en %s d\xedas"],["hace 1 semana","en 1 semana"],["hace %s semanas","en %s semanas"],["hace 1 mes","en 1 mes"],["hace %s meses","en %s meses"],["hace 1 a\xf1o","en 1 a\xf1o"],["hace %s a\xf1os","en %s a\xf1os"]][t]})),Object(n.useEffect)((function(){h(!0);var e="Bearer "+a.jwt;""===a.jwt&&!0!==a.publico||p.a.get(a.servidor+"/api/notificaciones?receptor="+a.datosSesion.id,{headers:{Authorization:e}}).then((function(e){console.log(e.data),l(e.data.reverse()),e.data.map((function(e){!0!==e.leido&&function(e){var t="Bearer "+a.jwt;p.a.put(a.servidor+"/api/notificaciones/"+e,{leido:!0},{headers:{Authorization:t}}).then((function(e){console.log(e.data)})).catch((function(e){alert("Un error ha ocurrido al cambiar la variable true."),console.log(e.response)}))}(e.id)})),h(!1)})).catch((function(e){alert("Un error ha ocurrido al buscar las notificaciones."),console.log(e.response)}))}),[a.jwt,a.publico]),o.a.createElement(He.a,{className:e.fondo},o.a.createElement(D.a,{style:{padding:"15px",width:"100%"},className:"Fondo",variant:"outlined",square:!0},o.a.createElement(g.a,{container:!0,direction:"row",alignItems:"center"},o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(b.a,{variant:"h4",component:"h4",align:"center"},"Notificaciones"),o.a.createElement("br",null)),m&&o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(z.a,null)),!m&&0===s.length&&o.a.createElement(g.a,{item:!0,xs:12},o.a.createElement(ne.a,{variant:"outlined",severity:"info"},"No tienes notificaciones nuevas.")),s.map((function(t,a){return o.a.createElement(D.a,{key:a,className:e.filaPublicacion,style:{margin:"auto",width:"95%"},variant:"outlined",square:!0},o.a.createElement(g.a,{container:!0,item:!0,xs:12,alignItems:"center"},o.a.createElement(g.a,{item:!0,xs:12,sm:2,md:1,lg:1,align:"center"},x[t.tipo]),o.a.createElement(g.a,{item:!0,xs:10,sm:8,md:10,lg:10},o.a.createElement(b.a,{variant:"h5",component:"h5",align:"left"},0===t.tipo&&(null!==t.solicitud?'Reporte a la publicaci\xf3n "'+t.solicitud.titulo+'"':"Reporte a su perfil"),1===t.tipo&&"Respuesta a tu solicitud de verificaci\xf3n de identidad",2===t.tipo&&(""===t.datos_notificacion?'Nueva solicitud de rese\xf1a a la publicaci\xf3n "'+t.solicitud.titulo+'"':'Nueva solicitud de rese\xf1a a la categor\xeda "'+t.datos_notificacion.split("_")[1]+'"')," - "+Object(Pe.a)(new Date(t.created_at),"spanish"),!t.leido&&o.a.createElement(xa.a,{style:{color:Ca.a[500]}})),o.a.createElement(b.a,{align:"justify"},t.tipo<2?""!==t.datos_notificacion?t.datos_notificacion:"\xa1Felicitaciones! Tu perfil ahora est\xe1 verificado.":""===t.datos_notificacion?t.solicitud.tipo?'Tienes una nueva petici\xf3n de rese\xf1a al servicio "'+t.solicitud.titulo:"Tienes una nueva petici\xf3n de rese\xf1a al servicio ofrecido por el proveedor "+"".concat(t.emisor.nombre," ").concat(t.emisor.apellido)+' por tu solicitud "'+t.solicitud.titulo+'". \xa1Cu\xe9ntanos tu experiencia haciendo click en el bot\xf3n!':'Tienes una nueva petici\xf3n de rese\xf1a a la categor\xeda "'+t.datos_notificacion.split("_")[1],2===t.tipo&&t.solicitud.tipo&&'" realizada por el proveedor '+"".concat(t.emisor.nombre," ").concat(t.emisor.apellido)+". \xa1Cu\xe9ntanos tu experiencia haciendo click en el bot\xf3n!"),2===t.tipo&&o.a.createElement("div",{align:"center"},o.a.createElement(ka,{datos:t,eliminarNotificacion:C}))),o.a.createElement(g.a,{item:!0,xs:2,sm:2,md:1,lg:1,align:"center"},o.a.createElement(j.a,{onClick:function(){y(!0)}},o.a.createElement(ga.a,{color:"error"}))),E&&o.a.createElement(gt,{mensaje:"",funcionAceptar:function(e){e&&C(t.id),y(!1)},titulo:"\xbfEst\xe1 seguro que quiere eliminar la notificaci\xf3n?"})))})))))}a(242);var wa=a(15),_a=a(16),Aa=a(18),Pa=a(17),Ba=(a(243),a(244),a(109)),Ma=a.n(Ba),Da=a(110),za=a.n(Da),Fa=a(140).Circle,Ra=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(){return Object(wa.a)(this,a),t.apply(this,arguments)}return Object(_a.a)(a,[{key:"render",value:function(){var e={strokeWidth:2.3,color:"#efe",trailColor:"#aaa",trailWidth:1,step:function(e,t){t.path.setAttribute("trail",e.color),t.path.setAttribute("trailwidth-width",e.width);var a=Math.round(100*t.value());0===a?t.setText(""):t.setText(a)}},t=this.props.data.status&&!0===this.props.data.status.error;return o.a.createElement("div",{className:"rce-mbox-photo"},o.a.createElement("div",{className:"rce-mbox-photo--img",style:this.props.data.width&&this.props.data.height&&{width:this.props.data.width,height:this.props.data.height}},o.a.createElement("img",{src:this.props.data.uri,alt:this.props.data.alt,onClick:this.props.onOpen,onLoad:this.props.onLoad,onError:this.props.onPhotoError}),t&&o.a.createElement("div",{className:"rce-mbox-photo--img__block"},o.a.createElement("span",{className:"rce-mbox-photo--img__block-item rce-mbox-photo--error"},o.a.createElement(za.a,null))),!t&&this.props.data.status&&!this.props.data.status.download&&o.a.createElement("div",{className:"rce-mbox-photo--img__block"},!this.props.data.status.click&&o.a.createElement("button",{onClick:this.props.onDownload,className:"rce-mbox-photo--img__block-item rce-mbox-photo--download"},o.a.createElement(Ma.a,null)),"number"===typeof this.props.data.status.loading&&0!==this.props.data.status.loading&&o.a.createElement(Fa,{progress:this.props.data.status.loading,options:e,initialAnimate:!0,containerClassName:"rce-mbox-photo--img__block-item"}))),this.props.text&&o.a.createElement("div",{className:"rce-mbox-text"},this.props.text))}}]),a}(n.Component);Ra.defaultProps={text:"",data:{},onDownload:null,onOpen:null,onLoad:null,onPhotoError:null};var qa=Ra,Ia=(a(318),a(172)),Ua=a.n(Ia),La=a(140).Circle,Ta=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(){return Object(wa.a)(this,a),t.apply(this,arguments)}return Object(_a.a)(a,[{key:"onClick",value:function(e){this.props.data.status&&(!this.props.data.status.download&&this.props.onDownload instanceof Function?this.props.onDownload(e):this.props.data.status.download&&this.props.onOpen instanceof Function&&this.props.onOpen(e))}},{key:"render",value:function(){var e={strokeWidth:5,color:"#333",trailColor:"#aaa",trailWidth:5,step:function(e,t){t.path.setAttribute("trail",e.color),t.path.setAttribute("trailwidth-width",e.width);var a=Math.round(100*t.value());0===a?t.setText(""):t.setText(a)}},t=this.props.data.status&&!0===this.props.data.status.error;return o.a.createElement("div",{className:"rce-mbox-file"},o.a.createElement("button",{onClick:this.onClick.bind(this)},o.a.createElement("div",{className:"rce-mbox-file--icon"},o.a.createElement(Ua.a,{color:"#aaa"}),o.a.createElement("div",{className:"rce-mbox-file--size"},this.props.data.size)),o.a.createElement("div",{className:"rce-mbox-file--text"},this.props.text),o.a.createElement("div",{className:"rce-mbox-file--buttons"},t&&o.a.createElement("span",{className:"rce-error-button"},o.a.createElement(za.a,{color:"#ff3d3d"})),!t&&this.props.data.status&&!this.props.data.status.download&&!this.props.data.status.click&&o.a.createElement(Ma.a,{color:"#aaa"}),!t&&this.props.data.status&&"number"===typeof this.props.data.status.loading&&0!==this.props.data.status.loading&&o.a.createElement(La,{progress:this.props.data.status.loading,options:e,initialAnimate:!0,containerClassName:"rce-mbox-file--loading"}))))}}]),a}(n.Component);Ta.defaultProps={text:"",data:{},onClick:null,onDownload:null,onOpen:null};var Va=Ta,Ha=(a(319),a(20)),Wa=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(){return Object(wa.a)(this,a),t.apply(this,arguments)}return Object(_a.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:Ha("rce-container-smsg",this.props.className)},o.a.createElement("div",{className:"rce-smsg"},o.a.createElement("div",{className:"rce-smsg-text"},this.props.text)))}}]),a}(n.Component),Ja=a(56),Ka=(a(320),a(20)),Ga=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(e){var n;return Object(wa.a)(this,a),(n=t.call(this,e)).className=n.className.bind(Object(Ja.a)(n)),n}return Object(_a.a)(a,[{key:"buildURL",value:function(e){var t=this.props.data||{};return e.replace(/LATITUDE/g,t.latitude).replace(/LONGITUDE/g,t.longitude).replace("MARKER_COLOR",this.props.markerColor).replace("ZOOM",this.props.zoom).replace("KEY",this.props.apiKey)}},{key:"className",value:function(){var e=Ka("rce-mbox-location",this.props.className);return this.props.text&&(e=Ka(e,"rce-mbox-location-has-text")),e}},{key:"render",value:function(){var e=this.props.data||{};return o.a.createElement("div",{className:"rce-container-lmsg"},o.a.createElement("a",{onClick:this.props.onOpen,target:this.props.target,href:this.props.href||this.props.src||this.buildURL(e.mapURL||"https://www.google.com/maps/search/?api=1&query=LATITUDE,LONGITUDE&zoom=ZOOM"),className:this.className()},o.a.createElement("img",{onError:this.props.onError,className:"rce-mbox-location-img",src:this.props.src||this.buildURL(e.staticURL||"https://maps.googleapis.com/maps/api/staticmap?markers=color:MARKER_COLOR|LATITUDE,LONGITUDE&zoom=ZOOM&size=270x200&scale=2&key=KEY")})),this.props.text&&o.a.createElement("div",{className:"rce-mbox-text rce-mbox-location-text"},this.props.text))}}]),a}(n.Component);Ga.defaultProps={target:"_blank",apiKey:"",zoom:14,markerColor:"red",onError:function(){}};var Ya=Ga,Qa=(a(321),a(20),function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(){return Object(wa.a)(this,a),t.apply(this,arguments)}return Object(_a.a)(a,[{key:"toUrl",value:function(){var e=[],t={uri:this.props.uri,theme:this.props.theme,view:this.props.view};for(var a in t){var n=encodeURIComponent(a),o=encodeURIComponent(t[a]);e.push(n+"="+o)}return e=e.join("&")}},{key:"render",value:function(){return this.props.uri?o.a.createElement("div",{className:"rce-mbox-spotify"},o.a.createElement("iframe",{src:"https://open.spotify.com/embed?"+this.toUrl(),width:this.props.width,height:this.props.height,frameBorder:"0",allowtransparency:"true"})):null}}]),a}(n.Component));Qa.defaultProps={uri:"",theme:"black",view:"list",width:300,height:380};var Za=Qa,$a=(a(322),a(20)),Xa=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(e){return Object(wa.a)(this,a),t.call(this,e)}return Object(_a.a)(a,[{key:"render",value:function(){var e=this.props,t=e.photoURL,a=e.title,n=e.titleColor,i=e.message,r=e.onClick;return o.a.createElement("div",{className:$a("rce-mbox-reply",{"rce-mbox-reply-border":!!n}),style:n&&{borderColor:n},onClick:r},o.a.createElement("div",{className:"rce-mbox-reply-left"},o.a.createElement("div",{style:n&&{color:n},className:"rce-mbox-reply-owner"},a||"Unknown"),o.a.createElement("div",{className:"rce-mbox-reply-message"},i||"...")),t&&o.a.createElement("div",{className:"rce-mbox-reply-right"},o.a.createElement("img",{src:t,alt:""})))}}]),a}(n.Component);Xa.defaultProps={photoURL:null,title:null,titleColor:null,message:null,onClick:function(){}};var en=Xa,tn=(a(323),a(173)),an=a.n(tn),nn=a(174),on=a.n(nn),rn=a(175),cn=a.n(rn),sn=a(176),ln=a.n(sn),un=a(177),dn=a.n(un),mn=a(178),pn=a.n(mn),hn=(a(324),a(20)),fn=[],bn=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(e){var n;return Object(wa.a)(this,a),(n=t.call(this,e)).requestImage=n.requestImage.bind(Object(Ja.a)(n)),n}return Object(_a.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"isLoaded",value:function(e){return-1!==fn.indexOf(e)}},{key:"requestImage",value:function(e){var t=this,a=this;this.loading=!0;var n=function(){fn.push(e),delete a.loading,!1!==t._isMounted&&a.setState({})},o=document.createElement("img");o.src=e,o.onload=n,o.onerror=n}},{key:"stringToColour",value:function(e){for(var t=0,a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);for(var n="#",o=0;o<3;o++){var i=t>>8*o&255;n+=("00"+(i=i%150+50).toString(16)).substr(-2)}return n}},{key:"render",value:function(){var e=this.props.src,t=!1;return this.props.lazyLoadingImage&&(t=!0,this.isLoaded(e)?t=!1:(e=this.props.lazyLoadingImage,this.loading||this.requestImage(this.props.src))),o.a.createElement("div",{className:hn("rce-avatar-container",this.props.type,this.props.size,this.props.className)},this.props.letterItem?o.a.createElement("div",{className:"rce-avatar-letter-background",style:{backgroundColor:this.stringToColour(this.props.letterItem.id)}},o.a.createElement("span",{className:"rce-avatar-letter"},this.props.letterItem.letter)):o.a.createElement("img",{alt:this.props.alt,src:e,onError:this.props.onError,className:hn("rce-avatar",{"rce-avatar-lazy":t})}),this.props.sideElement)}}]),a}(n.Component);bn.defaultProps={type:"default",size:"default",src:"",alt:"",sideElement:null,lazyLoadingImage:void 0,onError:function(){}};var vn=bn,gn=a(20),En=a.n(gn),jn=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(e){var n;return Object(wa.a)(this,a),(n=t.call(this,e)).state={toogle:!1},n}return Object(_a.a)(a,[{key:"toggleClick",value:function(){this.setState({toogle:!this.state.toogle})}},{key:"render",value:function(){var e=this,t=this.props,a=t.date,n=t.dateString,i=t.title,r=t.subject,c=t.onClick,s=t.collapseTitle,l=t.dataSource,u=t.participants,d=t.onMeetingTitleClick,m=t.onMeetingVideoLinkClick,p=this.props.participantsLimit,h=n||a&&!isNaN(a)&&Object(Pe.a)(a);return o.a.createElement("div",{className:"rce-mbox-mtmg"},o.a.createElement("div",{className:"rce-mtmg"},o.a.createElement("div",{className:"rce-mtmg-subject"},r||"Unknown Meeting"),o.a.createElement("div",{className:"rce-mtmg-body",onClick:c},o.a.createElement("div",{className:"rce-mtmg-item"},o.a.createElement(an.a,null),o.a.createElement("div",{className:"rce-mtmg-content"},o.a.createElement("span",{className:"rce-mtmg-title"},i),o.a.createElement("span",{className:"rce-mtmg-date"},h))),o.a.createElement("div",{className:"rce-mtmg-right-icon"},o.a.createElement(on.a,null))),o.a.createElement("div",{className:"rce-mtmg-body-bottom",onClick:function(){return e.toggleClick()}},!0===this.state.toogle?o.a.createElement("div",{className:"rce-mtmg-bottom--tptitle"},o.a.createElement(cn.a,null),o.a.createElement("span",null,s)):o.a.createElement("div",{className:"rce-mtmg-body-bottom--bttitle"},o.a.createElement(ln.a,null),o.a.createElement("span",null,u.slice(0,p).map((function(e){return e.title||"Unknow"})).join(", "),u.length>p&&", +".concat(u.length-p)))),o.a.createElement("div",{className:En()("rce-mtmg-toogleContent",{"rce-mtmg-toogleContent--click":!0===this.state.toogle})},l&&l.map((function(e,t){return o.a.createElement("div",{key:t},!e.event&&o.a.createElement("div",{className:"rce-mitem"},o.a.createElement("div",{className:En()("rce-mitem avatar",{"rce-mitem no-avatar":!e.avatar})},e.avatar?o.a.createElement(vn,{src:e.avatar}):o.a.createElement(pn.a,null)),o.a.createElement("div",{className:"rce-mitem-body"},o.a.createElement("div",{className:"rce-mitem-body--top"},o.a.createElement("div",{className:"rce-mitem-body--top-title",onClick:function(a){return d(e,t,a)}},e.title),o.a.createElement("div",{className:"rce-mitem-body--top-time"},e.dateString?e.dateString:e.date&&!isNaN(e.date)&&Object(Pe.a)(e.date))),o.a.createElement("div",{className:"rce-mitem-body--bottom"},o.a.createElement("div",{className:"rce-mitem-body--bottom-title"},e.message)))),e.event&&o.a.createElement("div",{className:"rce-mitem-event"},o.a.createElement("div",{className:"rce-mitem-bottom-body"},o.a.createElement("div",{className:"rce-mitem-body avatar"},o.a.createElement(dn.a,null)),o.a.createElement("div",{className:"rce-mitem-bottom-body-top"},e.event.title,o.a.createElement("div",{className:"rce-mitem-body--top-time"},e.dateString?e.dateString:e.date&&!isNaN(e.date)&&Object(Pe.a)(e.date)),o.a.createElement("div",{className:"rce-mitem-avatar-content"},e.event.avatars&&e.event.avatars.map((function(e,t){return e instanceof vn?e:o.a.createElement("div",{key:t,className:"rce-mitem-avatar"},o.a.createElement(vn,{src:e.src}))}))),e.record&&o.a.createElement("div",{className:"rce-mtmg-call-record"},o.a.createElement("div",{className:"rce-mtmg-call-body"},o.a.createElement("div",{onClick:function(a){return m(e,t,a)},className:"rce-mtmg-call-avatars"},o.a.createElement(vn,{className:"rce-mtmg-call-avatars",src:e.record.avatar}),o.a.createElement("div",{className:"rce-mtmg-record-time"},e.record.time)),o.a.createElement("div",{className:"rce-mtmg-call-body-title"},o.a.createElement("span",null,e.record.title),o.a.createElement("div",{className:"rce-mtmg-call-body-bottom"},e.record.savedBy))))))))})))))}}]),a}(n.Component);jn.defaultProps={date:new Date,dateString:"",title:"",subject:"",collapseTitle:"",participantsLimit:3,avatarFlexible:!1,dataSource:[],participants:[],onClick:function(){},onMeetingTitleClick:function(){},onMeetingVideoLinkClick:function(){},onAvatarError:function(){}};var yn=jn,On=a(179),Sn=a.n(On),xn=a(122),Cn=a.n(xn),kn=a(180),Nn=a.n(kn),wn=a(181),_n=a.n(wn),An=a(182),Pn=a.n(An),Bn=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(){return Object(wa.a)(this,a),t.apply(this,arguments)}return Object(_a.a)(a,[{key:"componentWillReceiveProps",value:function(e){e.focus!==this.props.focus&&!0===e.focus&&this.refs.message&&(this.refs.message.scrollIntoView({block:"center",behavior:"smooth"}),this.props.onMessageFocused(e))}},{key:"render",value:function(){var e=En()("rce-mbox",{"rce-mbox-right":"right"===this.props.position}),t=!/(text|file|meeting)/g.test(this.props.type)&&!("location"===this.props.type&&this.props.text),a=this.props.date&&!isNaN(this.props.date)&&(this.props.dateString||Object(Pe.a)(this.props.date));return o.a.createElement("div",{ref:"message",className:En()("rce-container-mbox",this.props.className),onClick:this.props.onClick},this.props.renderAddCmp instanceof Function&&this.props.renderAddCmp(),"system"===this.props.type?o.a.createElement(Wa,{text:this.props.text}):o.a.createElement("div",{className:En()(e,{"rce-mbox--clear-padding":t},{"rce-mbox--clear-notch":!this.props.notch},{"message-focus":this.props.focus})},o.a.createElement("div",{className:"rce-mbox-body",onContextMenu:this.props.onContextMenu},!0===this.props.forwarded&&o.a.createElement("div",{className:En()("rce-mbox-forward",{"rce-mbox-forward-right":"left"===this.props.position},{"rce-mbox-forward-left":"right"===this.props.position}),onClick:this.props.onForwardClick},o.a.createElement(Sn.a,null)),!0===this.props.replyButton&&o.a.createElement("div",{className:!0!==this.props.forwarded?En()("rce-mbox-forward",{"rce-mbox-forward-right":"left"===this.props.position},{"rce-mbox-forward-left":"right"===this.props.position}):En()("rce-mbox-forward",{"rce-mbox-reply-btn-right":"left"===this.props.position},{"rce-mbox-reply-btn-left":"right"===this.props.position}),onClick:this.props.onReplyClick},o.a.createElement(Pn.a,null)),(this.props.title||this.props.avatar)&&o.a.createElement("div",{style:this.props.titleColor&&{color:this.props.titleColor},onClick:this.props.onTitleClick,className:En()("rce-mbox-title",{"rce-mbox-title--clear":"text"===this.props.type})},this.props.avatar&&o.a.createElement(vn,{letterItem:this.props.letterItem,src:this.props.avatar}),this.props.title&&o.a.createElement("span",null,this.props.title)),this.props.reply&&o.a.createElement(en,{photoURL:this.props.reply.photoURL,title:this.props.reply.title,titleColor:this.props.reply.titleColor,message:this.props.reply.message,onClick:this.props.onReplyMessageClick}),"text"===this.props.type&&o.a.createElement("div",{className:"rce-mbox-text"},this.props.text),"location"===this.props.type&&o.a.createElement(Ya,{onOpen:this.props.onOpen,data:this.props.data,target:this.props.target,href:this.props.href,apiKey:this.props.apiKey,src:this.props.src,zoom:this.props.zoom,markerColor:this.props.markerColor,text:this.props.text}),"photo"===this.props.type&&o.a.createElement(qa,{onOpen:this.props.onOpen,onDownload:this.props.onDownload,onLoad:this.props.onLoad,onPhotoError:this.props.onPhotoError,data:this.props.data,width:this.props.width,height:this.props.height,text:this.props.text}),"file"===this.props.type&&o.a.createElement(Va,{onOpen:this.props.onOpen,onDownload:this.props.onDownload,data:this.props.data,text:this.props.text}),"spotify"===this.props.type&&o.a.createElement(Za,{width:this.props.width,height:this.props.height,theme:this.props.theme,view:this.props.view,data:this.props.data,uri:this.props.uri||this.props.text}),"meeting"===this.props.type&&this.props.meeting&&o.a.createElement(yn,{subject:this.props.meeting.subject,title:this.props.meeting.title,date:this.props.meeting.date,dateString:this.props.meeting.dateString,collapseTitle:this.props.meeting.collapseTitle,participants:this.props.meeting.participants,dataSource:this.props.meeting.dataSource,onMeetingMessageClick:this.props.onMeetingMessageClick,onMeetingVideoLinkClick:this.props.onMeetingVideoLinkClick,onMeetingTitleClick:this.props.onMeetingTitleClick}),o.a.createElement("div",{className:En()("rce-mbox-time",{"rce-mbox-time-block":t},{"non-copiable":!this.props.copiableDate}),"data-text":this.props.copiableDate?void 0:a},this.props.copiableDate&&this.props.date&&!isNaN(this.props.date)&&(this.props.dateString||Object(Pe.a)(this.props.date)),this.props.status&&o.a.createElement("span",{className:"rce-mbox-status"},"waiting"===this.props.status&&o.a.createElement(Nn.a,null),"sent"===this.props.status&&o.a.createElement(_n.a,null),"received"===this.props.status&&o.a.createElement(Cn.a,null),"read"===this.props.status&&o.a.createElement(Cn.a,{color:"#4FC3F7"})))),this.props.notch&&("right"===this.props.position?o.a.createElement("svg",{className:En()("rce-mbox-right-notch",{"message-focus":this.props.focus}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},o.a.createElement("path",{d:"M0 0v20L20 0"})):o.a.createElement("div",null,o.a.createElement("svg",{className:En()("rce-mbox-left-notch",{"message-focus":this.props.focus}),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},o.a.createElement("defs",null,o.a.createElement("filter",{id:"filter1",x:"0",y:"0"},o.a.createElement("feOffset",{result:"offOut",in:"SourceAlpha",dx:"-2",dy:"-5"}),o.a.createElement("feGaussianBlur",{result:"blurOut",in:"offOut",stdDeviation:"3"}),o.a.createElement("feBlend",{in:"SourceGraphic",in2:"blurOut",mode:"normal"}))),o.a.createElement("path",{d:"M20 0v20L0 0",filter:"url(#filter1)"}))))))}}]),a}(n.Component);Bn.defaultProps={position:"left",type:"text",text:"",title:null,titleColor:null,onTitleClick:null,onForwardClick:null,onReplyClick:null,onReplyMessageClick:null,date:new Date,data:{},onClick:null,onOpen:null,onDownload:null,onLoad:null,onPhotoError:null,forwarded:!1,reply:!1,status:null,dateString:null,notch:!0,avatar:null,renderAddCmp:null,copiableDate:!1,onContextMenu:null,focus:!1,onMessageFocused:null};var Mn=Bn,Dn=(a(325),function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(){return Object(wa.a)(this,a),t.apply(this,arguments)}return Object(_a.a)(a,[{key:"render",value:function(){var e=this.props.statusColorType;return o.a.createElement("div",{className:En()("rce-container-citem",this.props.className),onClick:this.props.onClick,onContextMenu:this.props.onContextMenu},o.a.createElement("div",{className:"rce-citem"},o.a.createElement("div",{className:En()("rce-citem-avatar",{"rce-citem-status-encircle":"encircle"===e})},o.a.createElement(vn,{src:this.props.avatar,alt:this.props.alt,className:"encircle"===e?"rce-citem-avatar-encircle-status":"",size:"large",letterItem:this.props.letterItem,sideElement:this.props.statusColor&&o.a.createElement("span",{className:"rce-citem-status",style:"encircle"===e?{boxShadow:"inset 0 0 0 2px ".concat(this.props.statusColor,", inset 0 0 0 5px #FFFFFF")}:{backgroundColor:this.props.statusColor}},this.props.statusText),onError:this.props.onAvatarError,lazyLoadingImage:this.props.lazyLoadingImage,type:En()("circle",{flexible:this.props.avatarFlexible})})),o.a.createElement("div",{className:"rce-citem-body"},o.a.createElement("div",{className:"rce-citem-body--top"},o.a.createElement("div",{className:"rce-citem-body--top-title"},this.props.title),o.a.createElement("div",{className:"rce-citem-body--top-time"},this.props.date&&!isNaN(this.props.date)&&(this.props.dateString||Object(Pe.a)(this.props.date)))),o.a.createElement("div",{className:"rce-citem-body--bottom"},o.a.createElement("div",{className:"rce-citem-body--bottom-title"},this.props.subtitle),o.a.createElement("div",{className:"rce-citem-body--bottom-status"},this.props.unread>0&&o.a.createElement("span",null,this.props.unread))))))}}]),a}(n.Component));Dn.defaultProps={id:"",onClick:null,avatar:"",avatarFlexible:!1,alt:"",title:"",subtitle:"",date:new Date,unread:0,statusColor:null,statusColorType:"badge",statusText:null,dateString:null,lazyLoadingImage:void 0,onAvatarError:function(){}};var zn=Dn,Fn=(a(326),a(20)),Rn=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(){return Object(wa.a)(this,a),t.apply(this,arguments)}return Object(_a.a)(a,[{key:"onClick",value:function(e,t,a){this.props.onClick instanceof Function&&this.props.onClick(e,t,a)}},{key:"onContextMenu",value:function(e,t,a){a.preventDefault(),this.props.onContextMenu instanceof Function&&this.props.onContextMenu(e,t,a)}},{key:"onAvatarError",value:function(e,t,a){this.props.onAvatarError instanceof Function&&this.props.onAvatarError(e,t,a)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{ref:this.props.cmpRef,className:Fn("rce-container-clist",this.props.className)},this.props.dataSource.map((function(t,a){return o.a.createElement(zn,Object.assign({id:t.id||a,key:a,lazyLoadingImage:e.props.lazyLoadingImage},t,{onAvatarError:function(n){return e.onAvatarError(t,a,n)},onContextMenu:function(n){return e.onContextMenu(t,a,n)},onClick:function(n){return e.onClick(t,a,n)}}))})))}}]),a}(n.Component);Rn.defaultProps={dataSource:[],onClick:null,lazyLoadingImage:void 0};var qn=Rn,In=(a(327),a(183)),Un=a.n(In),Ln=a(20),Tn=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(e){var n;return Object(wa.a)(this,a),(n=t.call(this,e)).state={scrollBottom:0,downButton:!1},n.loadRef=n.loadRef.bind(Object(Ja.a)(n)),n.onScroll=n.onScroll.bind(Object(Ja.a)(n)),n}return Object(_a.a)(a,[{key:"checkScroll",value:function(){var e=this.mlistRef;e&&("100%"===this.props.toBottomHeight||this.state.scrollBottom<this.props.toBottomHeight?e.scrollTop=e.scrollHeight:!0===this.props.lockable&&(e.scrollTop=e.scrollHeight-e.offsetHeight-this.state.scrollBottom))}},{key:"componentWillReceiveProps",value:function(e){this.mlistRef&&e.dataSource.length!==this.props.dataSource.length&&this.setState({scrollBottom:this.getBottom(this.mlistRef)},this.checkScroll.bind(this))}},{key:"getBottom",value:function(e){return e.scrollHeight-e.scrollTop-e.offsetHeight}},{key:"onOpen",value:function(e,t,a){this.props.onOpen instanceof Function&&this.props.onOpen(e,t,a)}},{key:"onDownload",value:function(e,t,a){this.props.onDownload instanceof Function&&this.props.onDownload(e,t,a)}},{key:"onPhotoError",value:function(e,t,a){this.props.onPhotoError instanceof Function&&this.props.onPhotoError(e,t,a)}},{key:"onClick",value:function(e,t,a){this.props.onClick instanceof Function&&this.props.onClick(e,t,a)}},{key:"onTitleClick",value:function(e,t,a){this.props.onTitleClick instanceof Function&&this.props.onTitleClick(e,t,a)}},{key:"onForwardClick",value:function(e,t,a){this.props.onForwardClick instanceof Function&&this.props.onForwardClick(e,t,a)}},{key:"onReplyClick",value:function(e,t,a){this.props.onReplyClick instanceof Function&&this.props.onReplyClick(e,t,a)}},{key:"onReplyMessageClick",value:function(e,t,a){this.props.onReplyMessageClick instanceof Function&&this.props.onReplyMessageClick(e,t,a)}},{key:"onContextMenu",value:function(e,t,a){this.props.onContextMenu instanceof Function&&this.props.onContextMenu(e,t,a)}},{key:"onMessageFocused",value:function(e,t,a){this.props.onMessageFocused instanceof Function&&this.props.onMessageFocused(e,t,a)}},{key:"onMeetingMessageClick",value:function(e,t,a){this.props.onMeetingMessageClick instanceof Function&&this.props.onMeetingMessageClick(e,t,a)}},{key:"loadRef",value:function(e){this.mlistRef=e,this.props.cmpRef instanceof Function&&this.props.cmpRef(e)}},{key:"onScroll",value:function(e){var t=this.getBottom(e.target);this.state.scrollBottom=t,"100%"===this.props.toBottomHeight||t>this.props.toBottomHeight?!0!==this.state.downButton&&(this.state.downButton=!0,this.setState({downButton:!0,scrollBottom:t})):!1!==this.state.downButton&&(this.state.downButton=!1,this.setState({downButton:!1,scrollBottom:t})),this.props.onScroll instanceof Function&&this.props.onScroll(e)}},{key:"toBottom",value:function(e){this.mlistRef&&(this.mlistRef.scrollTop=this.mlistRef.scrollHeight,this.props.onDownButtonClick instanceof Function&&this.props.onDownButtonClick(e))}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:Ln(["rce-container-mlist",this.props.className])},o.a.createElement("div",{ref:this.loadRef,onScroll:this.onScroll,className:"rce-mlist"},this.props.dataSource.map((function(t,a){return o.a.createElement(Mn,Object.assign({key:a},t,{onOpen:e.props.onOpen&&function(n){return e.onOpen(t,a,n)},onPhotoError:e.props.onPhotoError&&function(n){return e.onPhotoError(t,a,n)},onDownload:e.props.onDownload&&function(n){return e.onDownload(t,a,n)},onTitleClick:e.props.onTitleClick&&function(n){return e.onTitleClick(t,a,n)},onForwardClick:e.props.onForwardClick&&function(n){return e.onForwardClick(t,a,n)},onReplyClick:e.props.onReplyClick&&function(n){return e.onReplyClick(t,a,n)},onReplyMessageClick:e.props.onReplyMessageClick&&function(n){return e.onReplyMessageClick(t,a,n)},onClick:e.props.onClick&&function(n){return e.onClick(t,a,n)},onContextMenu:e.props.onContextMenu&&function(n){return e.onContextMenu(t,a,n)},onMessageFocused:e.props.onMessageFocused&&function(n){return e.onMessageFocused(t,a,n)},onMeetingMessageClick:e.props.onMeetingMessageClick&&function(n){return e.onMeetingMessageClick(t,a,n)},onMeetingTitleClick:e.props.onMeetingTitleClick,onMeetingVideoLinkClick:e.props.onMeetingVideoLinkClick}))}))),!0===this.props.downButton&&this.state.downButton&&"100%"!==this.props.toBottomHeight&&o.a.createElement("div",{className:"rce-mlist-down-button",onClick:this.toBottom.bind(this)},o.a.createElement(Un.a,null),this.props.downButtonBadge&&o.a.createElement("span",{className:"rce-mlist-down-button--badge"},this.props.downButtonBadge)))}}]),a}(n.Component);Tn.defaultProps={onClick:null,onTitleClick:null,onForwardClick:null,onReplyClick:null,onReplyMessageClick:null,onMeetingMessageClick:null,onDownButtonClick:null,onOpen:null,onPhotoError:null,onDownload:null,dataSource:[],lockable:!1,toBottomHeight:300,downButton:!0,downButtonBadge:null};var Vn=Tn,Hn=(a(328),a(20)),Wn=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(){return Object(wa.a)(this,a),t.apply(this,arguments)}return Object(_a.a)(a,[{key:"onChange",value:function(e){if(this.props.maxlength&&(e.target.value||"").length>this.props.maxlength)return this.props.onMaxLengthExceed instanceof Function&&this.props.onMaxLengthExceed(),void(this.input.value=(e.target.value||"").substring(0,this.props.maxlength));var t;(this.props.onChange instanceof Function&&this.props.onChange(e),!0===this.props.multiline)&&(!0===this.props.autoHeight&&(e.target.style.height!==this.props.minHeight+"px"&&(e.target.style.height=this.props.minHeight+"px"),t=e.target.scrollHeight<=this.props.maxHeight?e.target.scrollHeight+"px":this.props.maxHeight+"px",e.target.style.height!==t&&(e.target.style.height=t)))}},{key:"clear",value:function(){var e={FAKE_EVENT:!0,target:this.input};this.input.value&&(this.input.value=""),this.onChange(e)}},{key:"componentDidMount",value:function(){!0===this.props.autofocus&&this.input.focus()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:Hn("rce-container-input",this.props.className)},this.props.leftButtons&&o.a.createElement("div",{className:"rce-input-buttons"},this.props.leftButtons),!1===this.props.multiline?o.a.createElement("input",{ref:function(t){e.props.inputRef instanceof Function&&e.props.inputRef(t),e.input=t},type:this.props.type,className:Hn("rce-input"),placeholder:this.props.placeholder,defaultValue:this.props.defaultValue,style:this.props.inputStyle,onChange:this.onChange.bind(this),onCopy:this.props.onCopy,onCut:this.props.onCut,onPaste:this.props.onPaste,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onSelect:this.props.onSelect,onSubmit:this.props.onSubmit,onReset:this.props.onReset,onKeyDown:this.props.onKeyDown,onKeyPress:this.props.onKeyPress,onKeyUp:this.props.onKeyUp}):o.a.createElement("textarea",{ref:function(t){e.props.inputRef instanceof Function&&e.props.inputRef(t),e.input=t},type:this.props.type,className:Hn("rce-input","rce-input-textarea"),placeholder:this.props.placeholder,defaultValue:this.props.defaultValue,style:this.props.inputStyle,onChange:this.onChange.bind(this),onCopy:this.props.onCopy,onCut:this.props.onCut,onPaste:this.props.onPaste,onBlur:this.props.onBlur,onFocus:this.props.onFocus,onSelect:this.props.onSelect,onSubmit:this.props.onSubmit,onReset:this.props.onReset,onKeyDown:this.props.onKeyDown,onKeyPress:this.props.onKeyPress,onKeyUp:this.props.onKeyUp}),this.props.rightButtons&&o.a.createElement("div",{className:"rce-input-buttons"},this.props.rightButtons))}}]),a}(n.Component);Wn.defaultProps={type:"text",placeholder:"",defaultValue:"",onChange:null,rightButtons:null,leftButtons:null,multiline:!1,minHeight:25,maxHeight:200,autoHeight:!0,inputStyle:null,inputRef:null,maxlength:null,onMaxLengthExceed:null,autofocus:!1};var Jn=Wn,Kn=(a(329),a(20)),Gn=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(){return Object(wa.a)(this,a),t.apply(this,arguments)}return Object(_a.a)(a,[{key:"render",value:function(){return o.a.createElement("button",{ref:this.props.buttonRef,title:this.props.title,className:Kn("rce-button",this.props.type,this.props.className),style:{backgroundColor:this.props.backgroundColor,color:this.props.color,borderColor:this.props.backgroundColor},disabled:this.props.disabled,onClick:this.props.onClick},this.props.icon?o.a.createElement("span",{className:"rce-button-icon--container"},("right"===this.props.icon.float||!this.props.icon.float)&&o.a.createElement("span",null,this.props.text),o.a.createElement("span",{style:{float:this.props.icon.float,fontSize:this.props.icon.size||12},className:"rce-button-icon"},this.props.icon.component),"left"===this.props.icon.float&&o.a.createElement("span",null,this.props.text)):o.a.createElement("span",null,this.props.text))}}]),a}(n.Component);Gn.defaultProps={text:"",disabled:!1,type:null,icon:null,backgroundColor:"#3979aa",color:"white",className:null,buttonRef:null,title:null};var Yn=Gn,Qn=(a(330),a(20)),Zn=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(){return Object(wa.a)(this,a),t.apply(this,arguments)}return Object(_a.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:Qn("rce-navbar",this.props.type,this.props.className)},o.a.createElement("div",{className:"rce-navbar-item rce-navbar-item__left"},this.props.left),o.a.createElement("div",{className:"rce-navbar-item rce-navbar-item__center"},this.props.center),o.a.createElement("div",{className:"rce-navbar-item rce-navbar-item__right"},this.props.right))}}]),a}(n.Component);Zn.defaultProps={left:null,center:null,right:null,type:"light"};a(331);var $n=a(20),Xn=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(e){var n;return Object(wa.a)(this,a),(n=t.call(this,e)).state={show:void 0},n}return Object(_a.a)(a,[{key:"onBlur",value:function(e){!0===this.state.show&&this.setState({show:!1})}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:$n("rce-dropdown-container",this.props.className),onBlur:this.onBlur.bind(this)},o.a.createElement(Yn,Object.assign({},this.props.buttonProps,{onClick:function(){return e.setState({show:!e.state.show})}})),o.a.createElement("div",{className:$n("rce-dropdown",this.props.animationType,"rce-dropdown-open__"+this.props.animationPosition,{"dropdown-hide":!1===this.state.show},{"dropdown-show":!0===this.state.show})},o.a.createElement("ul",null,this.props.title&&o.a.createElement("span",{className:"rce-dropdown-title"},this.props.title),this.props.items.map((function(t,a){return o.a.createElement("li",{key:a,onMouseDown:function(t){return e.props.onSelect(a)}},t instanceof Object?t.icon?o.a.createElement("span",{className:"rce-button-icon--container"},("right"===t.icon.float||!t.icon.float)&&o.a.createElement("a",null,t.text),o.a.createElement("span",{style:{float:t.icon.float,color:t.icon.color,fontSize:t.icon.size||12},className:$n("rce-button-icon",t.icon.className)},t.icon.component),"left"===t.icon.float&&o.a.createElement("a",null,t.text)):o.a.createElement("a",null,t.text):o.a.createElement("a",null,t))})))))}}]),a}(n.Component);Xn.defaultProps={animationType:"default",animationPosition:"nortwest",items:[],onSelect:Function,buttonProps:null};a(332);var eo=a(20),to=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(){return Object(wa.a)(this,a),t.apply(this,arguments)}return Object(_a.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:eo("rce-sbar",this.props.type,this.props.className)},o.a.createElement("div",{className:"rce-sbar-item"},this.props.top),o.a.createElement("div",{className:"rce-sbar-item rce-sbar-item__center"},this.props.center),o.a.createElement("div",{className:"rce-sbar-item"},this.props.bottom))}}]),a}(n.Component);to.defaultProps={top:null,center:null,bottom:null,type:"dark"};var ao=to,no=(a(333),a(20)),oo=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(){return Object(wa.a)(this,a),t.apply(this,arguments)}return Object(_a.a)(a,[{key:"render",value:function(){return!0===this.props.show?o.a.createElement("div",{className:no("rce-popup-wrapper",this.props.type,this.props.className)},o.a.createElement("div",{className:"rce-popup"},this.props.renderHeader?o.a.createElement("div",{className:"rce-popup-header"},this.props.renderHeader()):o.a.createElement("div",{className:"rce-popup-header"},o.a.createElement("span",null,this.props.header),this.props.header&&this.props.headerButtons.map((function(e,t){return o.a.createElement(Yn,Object.assign({key:t},e))}))),o.a.createElement("div",{className:"rce-popup-content",style:{color:this.props.color}},this.props.renderContent?this.props.renderContent():this.props.text),o.a.createElement("div",{className:"rce-popup-footer"},this.props.renderFooter?this.props.renderFooter():this.props.footerButtons.map((function(e,t){return o.a.createElement(Yn,Object.assign({key:t},e))}))))):null}}]),a}(n.Component);oo.defaultProps={show:!1,header:null,text:null,headerButtons:[],footerButtons:[],renderHeader:null,renderContent:null,renderFooter:null,color:"#333"};a(334);var io=a(184),ro=a.n(io),co=a(185),so=a.n(co),lo=a(186),uo=a.n(lo),mo=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(){return Object(wa.a)(this,a),t.apply(this,arguments)}return Object(_a.a)(a,[{key:"render",value:function(){var e=this,t=this.props.statusColorType,a=this.props.avatarLimit,n=this.props.date&&!isNaN(this.props.date)&&(this.props.dateString||Object(Pe.a)(this.props.date)),i=this.props.subject.substring(0,this.props.subjectLimit)+(this.props.subject.length>this.props.subjectLimit?"...":"");return o.a.createElement("div",{className:En()("rce-container-mtitem",this.props.className),onClick:this.props.onClick,onContextMenu:this.props.onContextMenu},o.a.createElement("div",{className:"rce-mtitem"},o.a.createElement("div",{className:"rce-mtitem-top"},o.a.createElement("div",{className:"rce-mtitem-subject"},i),o.a.createElement("div",{className:"rce-mtitem-share",onClick:this.props.onShareClick},o.a.createElement(so.a,null))),o.a.createElement("div",{className:"rce-mtitem-body"},o.a.createElement("div",{className:"rce-mtitem-body--avatars"},this.props.avatars.slice(0,a).map((function(a,n){return a instanceof vn?a:o.a.createElement(vn,{key:n,src:a.src,alt:a.alt,className:"encircle"===a.statusColorType?"rce-mtitem-avatar-encircle-status":"",size:"small",letterItem:a.letterItem,sideElement:a.statusColor&&o.a.createElement("span",{className:"rce-mtitem-status",style:"encircle"===t?{boxShadow:"inset 0 0 0 2px ".concat(a.statusColor,", inset 0 0 0 5px #FFFFFF")}:{backgroundColor:a.statusColor}},a.statusText),onError:e.props.onAvatarError,lazyLoadingImage:e.props.lazyLoadingImage,type:En()("circle",{flexible:e.props.avatarFlexible})})})),this.props.avatars.length>a&&o.a.createElement("div",{className:"rce-avatar-container circle small rce-mtitem-letter"},o.a.createElement("span",null,"+"+(this.props.avatars.length-a)))),o.a.createElement("div",{className:"rce-mtitem-body--functions"},this.props.closable&&o.a.createElement("div",{className:"rce-mtitem-closable",onClick:this.props.onCloseClick},o.a.createElement(uo.a,null)),o.a.createElement("div",{className:"rce-mtitem-button",onClick:this.props.onMeetingClick},o.a.createElement(ro.a,null)))),o.a.createElement("div",{className:"rce-mtitem-footer"},o.a.createElement("span",{className:"rce-mtitem-date"},n))))}}]),a}(n.Component);mo.defaultProps={id:"",subject:"",subjectLimit:60,onClick:null,avatarFlexible:!1,alt:"",title:"",subtitle:"",date:new Date,dateString:"",lazyLoadingImage:void 0,avatarLimit:5,avatars:[],onAvatarError:function(){},onMeetingClick:function(){},onShareClick:function(){}};var po=mo,ho=(a(335),a(20)),fo=function(e){Object(Aa.a)(a,e);var t=Object(Pa.a)(a);function a(){return Object(wa.a)(this,a),t.apply(this,arguments)}return Object(_a.a)(a,[{key:"onClick",value:function(e,t,a){this.props.onClick instanceof Function&&this.props.onClick(e,t,a)}},{key:"onContextMenu",value:function(e,t,a){a.preventDefault(),this.props.onContextMenu instanceof Function&&this.props.onContextMenu(e,t,a)}},{key:"onAvatarError",value:function(e,t,a){this.props.onAvatarError instanceof Function&&this.props.onAvatarError(e,t,a)}},{key:"onMeetingClick",value:function(e,t,a){this.props.onMeetingClick instanceof Function&&this.props.onMeetingClick(e,t,a)}},{key:"onShareClick",value:function(e,t,a){this.props.onShareClick instanceof Function&&this.props.onShareClick(e,t,a)}},{key:"onCloseClick",value:function(e,t,a){this.props.onCloseClick instanceof Function&&this.props.onCloseClick(e,t,a)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{ref:this.props.cmpRef,className:ho("rce-container-mtlist",this.props.className)},this.props.dataSource.map((function(t,a){return o.a.createElement(po,Object.assign({id:t.id||a,key:a,lazyLoadingImage:e.props.lazyLoadingImage},t,{onAvatarError:function(n){return e.onAvatarError(t,a,n)},onContextMenu:function(n){return e.onContextMenu(t,a,n)},onClick:function(n){return e.onClick(t,a,n)},onMeetingClick:function(n){return e.onMeetingClick(t,a,n)},onShareClick:function(n){return e.onShareClick(t,a,n)},onCloseClick:function(n){return e.onCloseClick(t,a,n)}}))})))}}]),a}(n.Component);fo.defaultProps={dataSource:[],onClick:null,lazyLoadingImage:void 0};var bo=a(452),vo=a(453);a(336);var go=function(){var e=R(),t=Object(n.useContext)(L),a=t.state,i=(t.dispatch,Object(n.useState)(!1)),r=Object(c.a)(i,2),s=r[0],l=r[1],u=Object(n.useState)([]),m=Object(c.a)(u,2),h=m[0],f=m[1],b=Object(n.useState)([]),v=Object(c.a)(b,2),g=(v[0],v[1],Object(n.useState)([])),y=Object(c.a)(g,2),O=y[0],S=y[1],x=Object(n.useState)(null),C=Object(c.a)(x,2),k=C[0],N=C[1],w=Object(n.useState)(!1),_=Object(c.a)(w,2),A=_[0],P=_[1],B=Object(n.useState)(!1),M=Object(c.a)(B,2),D=M[0],F=M[1],q=Object(n.useState)(!1),I=Object(c.a)(q,2),U=I[0],T=I[1],V=Object(n.useState)(""),H=Object(c.a)(V,2),W=H[0],J=H[1],K=Object(n.useState)(!1),G=Object(c.a)(K,2),Y=G[0],Q=G[1];function Z(){var e="Bearer "+a.jwt;if(null!==k){var t="".concat(k.emisor.nombre," ").concat(k.emisor.apellido),n="".concat(k.receptor.nombre," ").concat(k.receptor.apellido),o=null===k.emisor.imagen_perfil?a.imagen_predeterminada:a.servidor+k.emisor.imagen_perfil.url,i=null===k.receptor.imagen_perfil?a.imagen_predeterminada:a.servidor+k.receptor.imagen_perfil.url;S([].concat(Object(ge.a)(O),[{position:a.datosSesion.id===k.emisor.id?"right":"left",forwarded:!1,replyButton:!1,reply:null,meeting:null,type:"text",theme:"white",view:"list",title:a.datosSesion.id===k.emisor.id?t:n,titleColor:"#EB7887",text:W,onLoad:function(){console.log("Photo loaded")},status:null,date:new Date,onReplyMessageClick:function(){console.log("onReplyMessageClick")},avatar:a.datosSesion.id===k.emisor.id?o:i}])),console.log("Mensajes",O),p.a.post(a.servidor+"/api/mensajes/",{chat:k.id,enviado_por:a.datosSesion.id===k.emisor.id,contenido:W},{headers:{Authorization:e}}).then((function(e){console.log(e.data)})).catch((function(e){alert("Un error ha ocurrido al cargar los mensajes."),console.log(e.response)}));var r={};if(console.log(k),a.datosSesion.id===k.emisor.id){r.noleido_receptor=k.noleido_receptor+1;var c=k;c.noleido_receptor++,N(c)}else{r.noleido_emisor=k.noleido_emisor+1;var s=k;s.noleido_receptor++,N(s)}p.a.put(a.servidor+"/api/chats/"+k.id,r,{headers:{Authorization:e}}).then((function(e){console.log(e.data)}))}}return Object(n.useEffect)((function(){var e="Bearer "+a.jwt;l(!0),""!==a.jwt&&p.a.get(a.servidor+"/api/chats/",{headers:{Authorization:e}}).then((function(e){var t=e.data.filter((function(e){return e.receptor.id===a.datosSesion.id||e.emisor.id===a.datosSesion.id}));f(t.map((function(e){var t="".concat(e.emisor.nombre," ").concat(e.emisor.apellido),n="".concat(e.receptor.nombre," ").concat(e.receptor.apellido),o=null===e.emisor.imagen_perfil?a.imagen_predeterminada:a.servidor+e.emisor.imagen_perfil.url,i=null===e.receptor.imagen_perfil?a.imagen_predeterminada:a.servidor+e.receptor.imagen_perfil.url,r=e.mensajes.map((function(e){return{position:e.enviado_por?"right":"left",forwarded:!1,replyButton:!1,reply:null,meeting:null,type:"text",theme:"white",view:"list",title:e.enviado_por?t:n,titleColor:"#EB7887",text:e.contenido,onLoad:function(){console.log("Photo loaded")},status:null,date:new Date(e.created_at),onReplyMessageClick:function(){console.log("onReplyMessageClick")},avatar:e.enviado_por?o:i}})),c=null,s=null;return null===e.solicitud?c=null===e.categoria.imagen?a.imagen_predeterminada:a.servidor+e.categoria.imagen.url:s=0===e.solicitud.imagenes.length?a.imagen_predeterminada:a.servidor+e.solicitud.imagenes[0].url,{chat:{id:e.id,avatar:null===e.solicitud?c:s,avatarFlexible:!0,statusColor:"lightgreen",statusColorType:"encircle",alt:"Imagen de perfil",title:null===e.solicitud?e.categoria.nombre:e.solicitud.titulo,date:new Date(e.mensajes[e.mensajes.length-1].created_at),subtitle:e.mensajes[e.mensajes.length-1].contenido,unread:a.datosSesion.id===e.emisor.id?e.noleido_emisor:e.noleido_receptor,mensajes:r,emisor:e.emisor,receptor:e.receptor,noleido_emisor:e.noleido_emisor,noleido_receptor:e.noleido_receptor,categoria:e.categoria,solicitud:e.solicitud,peticion:e.peticion}}}))),l(!1)})).catch((function(e){alert("Un error ha ocurrido al cargar los chats."),console.log(e.response)}))}),[a.jwt]),Object(n.useEffect)((function(){0!==h.length&&(N(h[0].chat),S(h[0].chat.mensajes))}),[h]),Object(n.useEffect)((function(){null!==k&&k.peticion&&T(!0)}),[k]),Object(n.useEffect)((function(){0!==h.length&&console.log(h.sort((function(e,t){return e.chat.mensajes[e.chat.mensajes.length-1].date.getTime()>t.chat.mensajes[t.chat.mensajes.length-1].date.getTime()})))}),[h]),o.a.createElement("div",{className:"container"},o.a.createElement("div",Object(d.a)({className:"chat-list"},"className",Y?e.EstiloMovil:e.EstiloPC),o.a.createElement(ao,{top:o.a.createElement("div",null),center:o.a.createElement(qn,{className:"chat-list",onClick:function(e){!function(e){if(!s){l(!0),S(e.mensajes),N(e),Q(!1);var t="Bearer "+a.jwt,n={};a.datosSesion.id===e.emisor.id?n.noleido_emisor=0:n.noleido_receptor=0,p.a.put(a.servidor+"/api/chats/"+e.id,n,{headers:{Authorization:t}}).then((function(e){console.log(e.data)})),p.a.get(a.servidor+"/api/chats/"+e.id,{headers:{Authorization:t}}).then((function(e){var t="".concat(e.data.emisor.nombre," ").concat(e.data.emisor.apellido),n="".concat(e.data.receptor.nombre," ").concat(e.data.receptor.apellido),o=null===e.data.emisor.imagen_perfil?a.imagen_predeterminada:a.servidor+e.data.emisor.imagen_perfil.url,i=null===e.data.receptor.imagen_perfil?a.imagen_predeterminada:a.servidor+e.data.receptor.imagen_perfil.url,r=e.data.mensajes.map((function(e,a){return{position:e.enviado_por?"right":"left",forwarded:!1,replyButton:!1,reply:null,meeting:null,type:"text",theme:"white",view:"list",title:e.enviado_por?t:n,titleColor:"#EB7887",text:e.contenido,onLoad:function(){console.log("Photo loaded")},status:null,date:new Date(e.created_at),onReplyMessageClick:function(){console.log("onReplyMessageClick")},avatar:e.enviado_por?o:i}}));S(r),T(e.data.peticion),l(!1)})).catch((function(e){alert("Un error ha ocurrido al cargar los mensajes."),console.log(e.response)}))}}(e)},dataSource:h.map((function(e){return e.chat}))}),bottom:o.a.createElement("div",null)})),o.a.createElement(j.a,{className:e.EstiloMovil,style:{position:Y?"relative":"absolute",left:"0px",top:"70px",zIndex:100},onClick:function(){Q(!Y)}},o.a.createElement(bo.a,null)),o.a.createElement("div",Object(d.a)({className:Y?e.EstiloPC:e.EstiloVacio},"className","right-panel"),s&&o.a.createElement(z.a,null),!s&&0===h.length&&o.a.createElement(ne.a,{className:e.inputAncho,style:{marginTop:"15px"},variant:"outlined",severity:"info"},"No tienes ning\xfan chat a\xfan."),null!==k&&o.a.createElement(zn,{avatar:k.avatar,alt:"Reactjs",title:k.title,subtitle:k.emisor.id===a.datosSesion.id?"".concat(k.receptor.nombre," ").concat(k.receptor.apellido):"".concat(k.emisor.nombre," ").concat(k.emisor.apellido),date:null,unread:0}),!s&&null!==k&&!Y&&(null===k.solicitud||k.solicitud.tipo?k.receptor.id===a.datosSesion.id:k.emisor.id===a.datosSesion.id)&&o.a.createElement("div",null,o.a.createElement(E.a,{disabled:U,onClick:function(){return P(!0)},color:"primary",className:e.BotonSolicitar,variant:"contained"},"Petici\xf3n de rese\xf1a"),o.a.createElement(E.a,{disabled:U,onClick:function(){return P(!0)},color:"primary",className:e.BotonSolicitarMovil,variant:"contained"},o.a.createElement(vo.a,null))),A&&o.a.createElement(gt,{mensaje:"Esta acci\xf3n solo se debe realizar cuando ya se haya cumplido con el servicio pactado. \xbfEst\xe1 seguro que quiere enviar la petici\xf3n?",funcionAceptar:function(e){if(P(!1),e){var t="Bearer "+a.jwt,n=k.receptor.id,o=k.emisor.id;null!==k.solicitud&&(k.solicitud.tipo||(n=k.emisor.id,o=k.receptor.id)),p.a.post(a.servidor+"/api/notificaciones/",{tipo:2,emisor:n,receptor:o,solicitud:null===k.solicitud?null:k.solicitud.id,datos_notificacion:null===k.categoria?"":String(k.categoria.id+"_"+k.categoria.nombre),leido:!1},{headers:{Authorization:t}}).then((function(e){console.log("Se ha podido crear la notificacion: ",e.data);var t="Bearer "+a.jwt;p.a.put(a.servidor+"/api/chats/"+k.id,{peticion:!0},{headers:{Authorization:t}}).then((function(e){console.log(e.data),T(!0)})),F(!0)})).catch((function(e){console.log("Error, no se ha podido crear la notificacion.",e.response),alert("Error, no se ha podido crear la notificacion.")}))}},titulo:"Enviar petici\xf3n de rese\xf1a al cliente"}),o.a.createElement(se,{mensaje:"\xa1Petici\xf3n de rese\xf1a enviada!",setabrir:F,abrir:D}),o.a.createElement(Vn,{className:"message-list",lockable:!0,downButtonBadge:10,dataSource:O}),null!==k&&o.a.createElement(Jn,{placeholder:"Escribe tu mensaje.",defaultValue:"",onChange:function(e){J(e.target.value)},multiline:!0,onKeyPress:function(e){return!(!e.shiftKey||13!==e.charCode)||(13===e.charCode?(Z(),e.preventDefault(),!1):void 0)},rightButtons:o.a.createElement(Yn,{color:"white",backgroundColor:"black",text:"Enviar",onClick:function(){Z()}})})))},Eo=a(454),jo=a(188),yo=(a(337),a(338),a(187)),Oo=Object(jo.a)(yo);var So=function(){var e=Object(n.useContext)(L),t=e.state,a=(e.dispatch,o.a.useState(!1)),i=Object(c.a)(a,2),r=i[0],d=i[1];return o.a.useEffect((function(){d(!0)}),[]),o.a.createElement("div",{className:"App",style:{height:"auto"}},o.a.createElement(Eo.a,{theme:Oo},o.a.createElement(s.a,null,o.a.createElement(Ye,null),o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,null),o.a.createElement("div",{style:{minHeight:"calc(100vh - 130px)"},className:"Fondo"},o.a.createElement(l.d,null,o.a.createElement(l.b,{exact:!0,path:t.ruta+"/"},o.a.createElement(V,{tipo:!0})),o.a.createElement(l.b,{path:t.ruta+"/crear-publicacion"},r&&t.datosSesion.tipo<2?o.a.createElement(l.a,{to:"/"}):o.a.createElement(wt,{modificar:!1,tipoPublicacion:!0})),o.a.createElement(l.b,{path:t.ruta+"/solicitar-servicio"},r&&0===t.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(wt,{modificar:!1,tipoPublicacion:!1})),o.a.createElement(l.b,{path:t.ruta+"/modificar-publicacion/:id"},r&&t.datosSesion.tipo<0?o.a.createElement(l.a,{to:"/"}):o.a.createElement(wt,{modificar:!0,tipoPublicacion:!0})),o.a.createElement(l.b,{path:t.ruta+"/modificar-solicitud-servicio/:id"},r&&0===t.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(wt,{modificar:!0,tipoPublicacion:!1})),o.a.createElement(l.b,{path:t.ruta+"/publicaciones/:id"},o.a.createElement(jt,null)),o.a.createElement(l.b,{path:t.ruta+"/registrar"},r&&0!==t.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(xt,{registrar:!0})),o.a.createElement(l.b,{path:t.ruta+"/modificar-usuario"},r&&0===t.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(xt,{registrar:!1})),o.a.createElement(l.b,{path:t.ruta+"/publicacion/:id"},o.a.createElement(We,null)),o.a.createElement(l.b,{path:t.ruta+"/mis-publicaciones"},r&&t.datosSesion.tipo<2?o.a.createElement(l.a,{to:"/"}):o.a.createElement(ua,{tipoPublicacion:!0})),o.a.createElement(l.b,{path:t.ruta+"/mis-servicios-solicitados"},r&&0===t.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(ua,{tipoPublicacion:!1})),o.a.createElement(l.b,{path:t.ruta+"/modificar-proveedor"},r&&t.datosSesion.tipo<2?o.a.createElement(l.a,{to:"/"}):o.a.createElement(kt,null)),o.a.createElement(l.b,{path:t.ruta+"/verificar-mi-identidad"},r&&t.datosSesion.tipo<2?o.a.createElement(l.a,{to:"/"}):o.a.createElement(ja,null)),o.a.createElement(l.b,{path:t.ruta+"/verificar-identidad"},r&&3!==t.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(Jt,null)),o.a.createElement(l.b,{path:t.ruta+"/gestionar-reportes"},r&&3!==t.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(la,null)),o.a.createElement(l.b,{path:t.ruta+"/perfil-proveedor/:id"},o.a.createElement(Nt,null)),o.a.createElement(l.b,{path:t.ruta+"/notificaciones"},r&&0===t.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(Na,null)),o.a.createElement(l.b,{path:t.ruta+"/mis-chats"},r&&0===t.datosSesion.tipo?o.a.createElement(l.a,{to:"/"}):o.a.createElement(go,{state:t})),o.a.createElement(l.b,{path:t.ruta+"/preguntas-frecuentes"},o.a.createElement(ba,null)),o.a.createElement(l.b,{path:t.ruta+"/sobre-nosotros"},o.a.createElement(va,null))))),o.a.createElement($e,null))))},xo=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Co(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function ko(){var e=Object(n.useContext)(L);e.state,e.dispatch;return o.a.createElement(T,null,o.a.createElement(So,null))}r.a.render(o.a.createElement(ko,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/App-Servicios",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/App-Servicios","/service-worker.js");xo?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Co(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Co(t,e)}))}}()}},[[206,1,2]]]);
//# sourceMappingURL=main.e9c82fa2.chunk.js.map